# Implementation Log: Task 10

**Summary:** Redesigned rtx_access_list_ipv6 from individual filter resource to group-based resource following the same pattern as rtx_access_list_ip. Added name attribute as identifier, entry block for multiple filters, apply block for interface bindings, and sequence_start/sequence_step for automatic sequence calculation. Also added IPv6 interface filter application methods to the client layer.

**Timestamp:** 2026-01-26T21:43:51.845Z
**Log ID:** 3e5de3b1-1bab-4668-bff7-e6f071a7f621

---

## Statistics

- **Lines Added:** +680
- **Lines Removed:** -300
- **Files Changed:** 3
- **Net Change:** 380

## Files Modified
- internal/provider/resource_rtx_access_list_ipv6.go
- internal/client/client.go
- internal/client/interfaces.go

## Files Created
_No files created_

---

## Artifacts

### Functions

#### resourceRTXAccessListIPv6
- **Purpose:** Returns the schema for the rtx_access_list_ipv6 resource with group-based design supporting multiple entries and apply blocks
- **Location:** internal/provider/resource_rtx_access_list_ipv6.go:21
- **Signature:** () *schema.Resource
- **Exported:** No

#### validateAccessListIPv6Entries
- **Purpose:** Validates IPv6 filter entry constraints including port specification rules for TCP/UDP protocols
- **Location:** internal/provider/resource_rtx_access_list_ipv6.go:132
- **Signature:** (ctx context.Context, diff *schema.ResourceDiff, meta interface{}) error
- **Exported:** No

#### resourceRTXAccessListIPv6Create
- **Purpose:** Creates a group of IPv6 filters and applies them to interfaces
- **Location:** internal/provider/resource_rtx_access_list_ipv6.go:156
- **Signature:** (ctx context.Context, d *schema.ResourceData, meta interface{}) diag.Diagnostics
- **Exported:** No

#### resourceRTXAccessListIPv6Read
- **Purpose:** Reads IPv6 filter group state from the router
- **Location:** internal/provider/resource_rtx_access_list_ipv6.go:184
- **Signature:** (ctx context.Context, d *schema.ResourceData, meta interface{}) diag.Diagnostics
- **Exported:** No

#### resourceRTXAccessListIPv6Update
- **Purpose:** Updates IPv6 filter group including adding/removing entries and modifying applies
- **Location:** internal/provider/resource_rtx_access_list_ipv6.go:248
- **Signature:** (ctx context.Context, d *schema.ResourceData, meta interface{}) diag.Diagnostics
- **Exported:** No

#### resourceRTXAccessListIPv6Delete
- **Purpose:** Deletes all IPv6 filters in the group and removes interface bindings
- **Location:** internal/provider/resource_rtx_access_list_ipv6.go:317
- **Signature:** (ctx context.Context, d *schema.ResourceData, meta interface{}) diag.Diagnostics
- **Exported:** No

#### resourceRTXAccessListIPv6Import
- **Purpose:** Imports existing IPv6 filters by name:seq1,seq2,seq3 format
- **Location:** internal/provider/resource_rtx_access_list_ipv6.go:355
- **Signature:** (ctx context.Context, d *schema.ResourceData, meta interface{}) ([]*schema.ResourceData, error)
- **Exported:** No

#### buildIPv6FiltersFromResourceData
- **Purpose:** Builds IPv6 filter structs from Terraform resource data supporting both auto and manual sequence modes
- **Location:** internal/provider/resource_rtx_access_list_ipv6.go:422
- **Signature:** (d *schema.ResourceData) []client.IPFilter
- **Exported:** No

#### getIPv6ExpectedSequences
- **Purpose:** Returns expected sequence numbers based on state for reading/deleting filters
- **Location:** internal/provider/resource_rtx_access_list_ipv6.go:462
- **Signature:** (d *schema.ResourceData) []int
- **Exported:** No

#### applyIPv6FiltersToInterfacesFromResourceData
- **Purpose:** Handles apply blocks during create operation
- **Location:** internal/provider/resource_rtx_access_list_ipv6.go:490
- **Signature:** (ctx context.Context, d *schema.ResourceData, apiClient *apiClient) error
- **Exported:** No

#### readIPv6ApplyBlocksFromRouter
- **Purpose:** Reads apply block state from the router for state refresh
- **Location:** internal/provider/resource_rtx_access_list_ipv6.go:514
- **Signature:** (ctx context.Context, d *schema.ResourceData, apiClient *apiClient) error
- **Exported:** No

#### ApplyIPv6FiltersToInterface
- **Purpose:** Client method to apply IPv6 filters to an interface in a specific direction
- **Location:** internal/client/client.go:4578
- **Signature:** (ctx context.Context, iface, direction string, filterIDs []int) error
- **Exported:** Yes

#### RemoveIPv6FiltersFromInterface
- **Purpose:** Client method to remove IPv6 filter bindings from an interface
- **Location:** internal/client/client.go:4595
- **Signature:** (ctx context.Context, iface, direction string) error
- **Exported:** Yes

#### GetIPv6InterfaceFilters
- **Purpose:** Client method to get current IPv6 filter IDs applied to an interface
- **Location:** internal/client/client.go:4612
- **Signature:** (ctx context.Context, iface, direction string) ([]int, error)
- **Exported:** Yes

### Integrations

#### Integration
- **Description:** rtx_access_list_ipv6 resource uses client.ApplyIPv6FiltersToInterface, RemoveIPv6FiltersFromInterface, and GetIPv6InterfaceFilters for interface binding management
- **Frontend Component:** resource_rtx_access_list_ipv6.go
- **Backend Endpoint:** RTXClient interface methods
- **Data Flow:** Terraform resource -> apiClient -> rtxClient methods -> ACLApplyService -> SSH commands to router

