# Implementation Log: Task 7

**Summary:** Updated rtx_access_list_mac resource to support multiple apply blocks and auto sequence mode. Changed apply block from MaxItems=1 to unlimited, added sequence_start and sequence_step attributes, integrated validateMACACLSchema in CustomizeDiff for validation, and updated CRUD handlers to support both auto and manual sequence modes.

**Timestamp:** 2026-01-26T21:40:17.697Z
**Log ID:** 4e90b911-6df9-4cc1-be29-70d46e3a45fc

---

## Statistics

- **Lines Added:** +250
- **Lines Removed:** -80
- **Files Changed:** 2
- **Net Change:** 170

## Files Modified
- internal/provider/resource_rtx_access_list_mac.go
- internal/client/interfaces.go

## Files Created
_No files created_

---

## Artifacts

### Functions

#### validateMACACLSchema
- **Purpose:** CustomizeDiff validation function that validates the MAC ACL schema for auto/manual mode consistency and validates apply block interface compatibility (rejects PP/Tunnel interfaces for MAC ACLs)
- **Location:** internal/provider/resource_rtx_access_list_mac.go:217
- **Signature:** (ctx context.Context, diff *schema.ResourceDiff, meta interface{}) error
- **Exported:** No

#### buildAccessListMACFromResourceData
- **Purpose:** Builds client.AccessListMAC from Terraform ResourceData, handling both auto and manual sequence modes, and building multiple apply blocks
- **Location:** internal/provider/resource_rtx_access_list_mac.go:585
- **Signature:** (d *schema.ResourceData) client.AccessListMAC
- **Exported:** No

### Classes

#### AccessListMAC (updated)
- **Purpose:** Extended struct to include SequenceStart, SequenceStep, and Applies slice for multiple interface bindings
- **Location:** internal/client/interfaces.go:1600
- **Exported:** Yes

### Integrations

#### Integration
- **Description:** MAC ACL resource now integrates with shared components from acl_schema_common.go (uses MaxSequenceValue, DefaultSequenceStep, MaxSequence, ACLTypeMAC, InterfaceSupportsACLType)
- **Frontend Component:** resource_rtx_access_list_mac
- **Backend Endpoint:** N/A (Terraform provider resource)
- **Data Flow:** Terraform config -> buildAccessListMACFromResourceData -> client.AccessListMAC -> CreateAccessListMAC/UpdateAccessListMAC

