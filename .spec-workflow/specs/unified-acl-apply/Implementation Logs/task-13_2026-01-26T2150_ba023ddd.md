# Implementation Log: Task 13

**Summary:** Created rtx_access_list_mac_apply resource for applying MAC access list filters to interfaces. Added interface validation to reject PP and Tunnel interfaces since MAC filters are only supported on Ethernet interfaces (lan, bridge). Also added required client methods for MAC filter operations.

**Timestamp:** 2026-01-26T21:50:47.315Z
**Log ID:** ba023ddd-08b0-4b6f-958b-dff88a579b40

---

## Statistics

- **Lines Added:** +420
- **Lines Removed:** -6
- **Files Changed:** 6
- **Net Change:** 414

## Files Modified
- internal/client/client.go
- internal/client/interfaces.go
- internal/provider/data_source_rtx_system_info_test.go
- internal/provider/data_source_rtx_interfaces_test.go
- internal/provider/data_source_rtx_routes_test.go

## Files Created
- internal/provider/resource_rtx_access_list_mac_apply.go

---

## Artifacts

### Functions

#### resourceRTXAccessListMACApply
- **Purpose:** Returns the schema for the rtx_access_list_mac_apply resource
- **Location:** internal/provider/resource_rtx_access_list_mac_apply.go:15
- **Signature:** func resourceRTXAccessListMACApply() *schema.Resource
- **Exported:** Yes

#### resourceRTXAccessListMACApplyCustomizeDiff
- **Purpose:** Validates interface type in CustomizeDiff to reject PP and Tunnel interfaces
- **Location:** internal/provider/resource_rtx_access_list_mac_apply.go:67
- **Signature:** func resourceRTXAccessListMACApplyCustomizeDiff(ctx context.Context, d *schema.ResourceDiff, meta interface{}) error
- **Exported:** No

#### validateMACInterfaceType
- **Purpose:** Validates that the interface type supports MAC filters (only lan and bridge)
- **Location:** internal/provider/resource_rtx_access_list_mac_apply.go:92
- **Signature:** func validateMACInterfaceType(iface string) error
- **Exported:** No

#### resourceRTXAccessListMACApplyCreate
- **Purpose:** Creates MAC access list apply binding to interface
- **Location:** internal/provider/resource_rtx_access_list_mac_apply.go:118
- **Signature:** func resourceRTXAccessListMACApplyCreate(ctx context.Context, d *schema.ResourceData, meta interface{}) diag.Diagnostics
- **Exported:** No

#### resourceRTXAccessListMACApplyRead
- **Purpose:** Reads MAC access list apply state from router
- **Location:** internal/provider/resource_rtx_access_list_mac_apply.go:163
- **Signature:** func resourceRTXAccessListMACApplyRead(ctx context.Context, d *schema.ResourceData, meta interface{}) diag.Diagnostics
- **Exported:** No

#### resourceRTXAccessListMACApplyUpdate
- **Purpose:** Updates MAC access list apply binding
- **Location:** internal/provider/resource_rtx_access_list_mac_apply.go:219
- **Signature:** func resourceRTXAccessListMACApplyUpdate(ctx context.Context, d *schema.ResourceData, meta interface{}) diag.Diagnostics
- **Exported:** No

#### resourceRTXAccessListMACApplyDelete
- **Purpose:** Deletes MAC access list apply binding from interface
- **Location:** internal/provider/resource_rtx_access_list_mac_apply.go:261
- **Signature:** func resourceRTXAccessListMACApplyDelete(ctx context.Context, d *schema.ResourceData, meta interface{}) diag.Diagnostics
- **Exported:** No

#### resourceRTXAccessListMACApplyImport
- **Purpose:** Imports MAC access list apply resource
- **Location:** internal/provider/resource_rtx_access_list_mac_apply.go:297
- **Signature:** func resourceRTXAccessListMACApplyImport(ctx context.Context, d *schema.ResourceData, meta interface{}) ([]*schema.ResourceData, error)
- **Exported:** No

#### ApplyMACFiltersToInterface
- **Purpose:** Client method to apply MAC filters to an interface
- **Location:** internal/client/client.go:4629
- **Signature:** func (c *rtxClient) ApplyMACFiltersToInterface(ctx context.Context, iface, direction string, filterIDs []int) error
- **Exported:** Yes

#### RemoveMACFiltersFromInterface
- **Purpose:** Client method to remove MAC filter bindings from interface
- **Location:** internal/client/client.go:4646
- **Signature:** func (c *rtxClient) RemoveMACFiltersFromInterface(ctx context.Context, iface, direction string) error
- **Exported:** Yes

#### GetMACInterfaceFilters
- **Purpose:** Client method to get current MAC filter IDs applied to interface
- **Location:** internal/client/client.go:4663
- **Signature:** func (c *rtxClient) GetMACInterfaceFilters(ctx context.Context, iface, direction string) ([]int, error)
- **Exported:** Yes

### Integrations

#### Integration
- **Description:** MAC apply resource uses client MAC filter methods which delegate to ACLApplyService with ACLTypeMAC
- **Frontend Component:** resource_rtx_access_list_mac_apply.go
- **Backend Endpoint:** ACLApplyService.ApplyFiltersToInterface/RemoveFiltersFromInterface/GetInterfaceFilters
- **Data Flow:** Resource CRUD -> rtxClient methods -> ACLApplyService -> SSH execution -> RTX router

