{
  "id": "snapshot_1768916736222_ykdf5tdfn",
  "approvalId": "approval_1768916021400_h1fe8dmkb",
  "approvalTitle": "Tasks: RTX PPP/PPPoE Resource (17 tasks)",
  "version": 2,
  "timestamp": "2026-01-20T13:45:36.222Z",
  "trigger": "approved",
  "status": "pending",
  "content": "# Tasks Document: RTX PPP/PPPoE Resource\n\n## Phase 1: Parser Layer\n\n- [ ] 1. Create PPP parser core structures\n  - File: internal/rtx/parsers/ppp.go\n  - Define PPPoEConfig, PPInterfaceConfig, LCPEchoConfig structs\n  - Add validation functions for auth methods, MTU ranges\n  - Purpose: Establish data models for PPP/PPPoE\n  - _Leverage: internal/rtx/parsers/interface_config.go for patterns_\n  - _Requirements: REQ-1, REQ-2, REQ-3_\n  - _Prompt: Role: Go Developer | Task: Create ppp.go with core data structures for PPPoE and PP interface configurations from REQ-1, REQ-2, REQ-3 | Restrictions: Follow existing parser patterns | Success: Structs defined, validation implemented_\n\n- [ ] 2. Implement PPPoE config parser\n  - File: internal/rtx/parsers/ppp.go\n  - Add ParsePPPoEConfig function\n  - Parse: pp bind, pp auth myname, pp auth accept, pppoe service-name, pp always-on\n  - Purpose: Parse existing PPPoE configurations\n  - _Leverage: RTX command documentation Chapter 10_\n  - _Requirements: REQ-1_\n  - _Prompt: Role: Go Developer | Task: Implement ParsePPPoEConfig to parse all PPPoE settings from REQ-1 | Success: All PPPoE commands parsed correctly_\n\n- [ ] 3. Implement PP interface config parser\n  - File: internal/rtx/parsers/ppp.go\n  - Add ParsePPInterfaceConfig function\n  - Parse: ip pp address, ip pp mtu, ip pp tcp mss, ip pp nat descriptor\n  - Purpose: Parse PP interface IP configurations\n  - _Leverage: RTX command documentation Chapter 10_\n  - _Requirements: REQ-2_\n  - _Prompt: Role: Go Developer | Task: Implement ParsePPInterfaceConfig to parse all PP interface settings from REQ-2 | Success: All PP interface commands parsed_\n\n- [ ] 4. Implement PPP command builders\n  - File: internal/rtx/parsers/ppp.go\n  - Add BuildPPPoECommand, BuildPPInterfaceCommand functions\n  - Generate RTX commands from config structs\n  - Purpose: Generate configuration commands\n  - _Leverage: Existing command builder patterns_\n  - _Requirements: REQ-1, REQ-2, REQ-3_\n  - _Prompt: Role: Go Developer | Task: Implement command builders for PPPoE and PP interface configurations | Success: Commands generate correctly_\n\n- [ ] 5. Create PPP parser tests\n  - File: internal/rtx/parsers/ppp_test.go\n  - Add tests for ParsePPPoEConfig, ParsePPInterfaceConfig\n  - Add tests for command builders\n  - Purpose: Ensure parser reliability\n  - _Leverage: Existing test patterns_\n  - _Requirements: REQ-1, REQ-2_\n  - _Prompt: Role: Go Test Developer | Task: Create comprehensive tests for PPP parser | Success: All parser functions tested_\n\n- [ ] 6. Create PPP pattern catalog\n  - File: internal/rtx/testdata/patterns/ppp.yaml\n  - Document all PPP/PPPoE command patterns\n  - Include examples from RTX documentation\n  - Purpose: Document command formats\n  - _Leverage: internal/rtx/testdata/patterns/schema.yaml_\n  - _Requirements: REQ-1, REQ-2, REQ-3_\n  - _Prompt: Role: Documentation Engineer | Task: Create ppp.yaml pattern catalog | Success: All PPP commands documented_\n\n## Phase 2: Client Layer\n\n- [ ] 7. Create PPP service interface\n  - File: internal/client/ppp_service.go\n  - Define PPPService interface with all methods\n  - Purpose: Establish service contract\n  - _Leverage: internal/client/interface_service.go for patterns_\n  - _Requirements: REQ-1, REQ-2, REQ-4_\n  - _Prompt: Role: Go Developer | Task: Define PPPService interface with CRUD methods | Success: Interface defined_\n\n- [ ] 8. Implement PPPoE service methods\n  - File: internal/client/ppp_service.go\n  - Implement GetPPPoE, ConfigurePPPoE, UpdatePPPoE, DeletePPPoE\n  - Add error handling for authentication failures\n  - Purpose: Enable PPPoE operations via SSH\n  - _Leverage: internal/client/client.go executor_\n  - _Requirements: REQ-1, REQ-4_\n  - _Prompt: Role: Go Developer | Task: Implement PPPoE CRUD operations | Success: All PPPoE operations work_\n\n- [ ] 9. Implement PP interface service methods\n  - File: internal/client/ppp_service.go\n  - Implement GetPPInterface, ConfigurePPInterface\n  - Implement GetConnectionStatus for status monitoring\n  - Purpose: Enable PP interface operations via SSH\n  - _Leverage: internal/client/client.go executor_\n  - _Requirements: REQ-2, REQ-4_\n  - _Prompt: Role: Go Developer | Task: Implement PP interface operations | Success: All PP interface operations work_\n\n- [ ] 10. Create PPP service tests\n  - File: internal/client/ppp_service_test.go\n  - Add tests with mock executor\n  - Test CRUD operations and error handling\n  - Purpose: Ensure service reliability\n  - _Leverage: Existing client test patterns_\n  - _Requirements: REQ-1, REQ-2_\n  - _Prompt: Role: Go Test Developer | Task: Create PPP service tests with mocks | Success: All service methods tested_\n\n## Phase 3: Provider Layer\n\n- [ ] 11. Create PPPoE Terraform resource\n  - File: internal/provider/resource_rtx_pppoe.go\n  - Define schema with all PPPoE attributes\n  - Implement Create, Read, Update, Delete functions\n  - Purpose: Enable Terraform management of PPPoE\n  - _Leverage: internal/provider/resource_rtx_interface.go for patterns_\n  - _Requirements: REQ-1, REQ-3_\n  - _Prompt: Role: Terraform Provider Developer | Task: Create rtx_pppoe resource with full CRUD | Restrictions: Mark password as sensitive | Success: Resource CRUD works_\n\n- [ ] 12. Add PPPoE resource import support\n  - File: internal/provider/resource_rtx_pppoe.go\n  - Implement Importer function\n  - Handle encrypted password preservation\n  - Purpose: Enable import of existing configs\n  - _Leverage: Existing import patterns_\n  - _Requirements: REQ-4_\n  - _Prompt: Role: Terraform Provider Developer | Task: Add import support for rtx_pppoe | Success: Import works correctly_\n\n- [ ] 13. Create PP interface Terraform resource\n  - File: internal/provider/resource_rtx_pp_interface.go\n  - Define schema with IP, MTU, NAT attributes\n  - Implement Create, Read, Update, Delete functions\n  - Purpose: Enable Terraform management of PP interfaces\n  - _Leverage: internal/provider/resource_rtx_interface.go for patterns_\n  - _Requirements: REQ-2, REQ-5_\n  - _Prompt: Role: Terraform Provider Developer | Task: Create rtx_pp_interface resource with full CRUD | Success: Resource CRUD works_\n\n- [ ] 14. Register resources in provider\n  - File: internal/provider/provider.go\n  - Add rtx_pppoe and rtx_pp_interface to ResourcesMap\n  - Purpose: Make resources available in Terraform\n  - _Leverage: Existing provider.go registration_\n  - _Requirements: All_\n  - _Prompt: Role: Terraform Provider Developer | Task: Register PPP resources in provider.go | Success: Resources registered_\n\n## Phase 4: Documentation and Examples\n\n- [ ] 15. Create PPPoE example configurations\n  - File: examples/pppoe/main.tf\n  - Add examples for NTT FLET'S, common Japanese ISPs\n  - Include multi-WAN failover example\n  - Purpose: Provide user documentation\n  - _Leverage: Existing examples format_\n  - _Requirements: All_\n  - _Prompt: Role: Technical Writer | Task: Create PPPoE example configurations | Success: Examples are clear and complete_\n\n- [ ] 16. Create provider tests\n  - File: internal/provider/resource_rtx_pppoe_test.go, resource_rtx_pp_interface_test.go\n  - Add unit tests with mock client\n  - Purpose: Ensure provider reliability\n  - _Leverage: Existing provider test patterns_\n  - _Requirements: All_\n  - _Prompt: Role: Go Test Developer | Task: Create provider resource tests | Success: All provider functions tested_\n\n## Phase 5: Integration\n\n- [ ] 17. Build and test full stack\n  - Run go build ./...\n  - Run go test ./...\n  - Fix any integration issues\n  - Purpose: Ensure everything works together\n  - _Leverage: Existing build/test infrastructure_\n  - _Requirements: All_\n  - _Prompt: Role: Integration Engineer | Task: Build and test full PPP implementation | Success: Build succeeds, all tests pass_\n",
  "fileStats": {
    "size": 7737,
    "lines": 162,
    "lastModified": "2026-01-20T13:33:30.199Z"
  },
  "comments": []
}