{
  "id": "snapshot_1768916732220_vmod1r0b6",
  "approvalId": "approval_1768916021733_lpq38bfte",
  "approvalTitle": "Tasks: RTX DDNS Resource (20 tasks)",
  "version": 2,
  "timestamp": "2026-01-20T13:45:32.220Z",
  "trigger": "approved",
  "status": "pending",
  "content": "# Tasks Document: RTX DDNS Resource\n\n## Phase 1: Parser Layer\n\n- [ ] 1. Create DDNS parser core structures\n  - File: internal/rtx/parsers/ddns.go\n  - Define NetVolanteConfig, DDNSConfig, DDNSStatus structs\n  - Add validation functions for hostnames, URLs\n  - Purpose: Establish data models for DDNS\n  - _Leverage: internal/rtx/parsers/dns.go for patterns_\n  - _Requirements: REQ-1, REQ-3_\n  - _Prompt: Role: Go Developer | Task: Create ddns.go with core data structures for DDNS configurations from REQ-1, REQ-3 | Restrictions: Follow existing parser patterns | Success: Structs defined, validation implemented_\n\n- [ ] 2. Implement NetVolante DNS parser\n  - File: internal/rtx/parsers/ddns.go\n  - Add ParseNetVolanteDNS function\n  - Parse: netvolante-dns hostname, server, go, timeout, ipv6, auto hostname\n  - Purpose: Parse existing NetVolante configurations\n  - _Leverage: RTX command documentation Chapter 27_\n  - _Requirements: REQ-3_\n  - _Prompt: Role: Go Developer | Task: Implement ParseNetVolanteDNS to parse all NetVolante settings from REQ-3 | Success: All NetVolante commands parsed_\n\n- [ ] 3. Implement custom DDNS parser\n  - File: internal/rtx/parsers/ddns.go\n  - Add ParseDDNSConfig function\n  - Parse: ddns server url, hostname, user, password, go\n  - Purpose: Parse custom DDNS provider configurations\n  - _Leverage: RTX command documentation Chapter 27_\n  - _Requirements: REQ-1_\n  - _Prompt: Role: Go Developer | Task: Implement ParseDDNSConfig for custom DDNS providers from REQ-1 | Success: All DDNS commands parsed_\n\n- [ ] 4. Implement DDNS status parser\n  - File: internal/rtx/parsers/ddns.go\n  - Add ParseDDNSStatus function\n  - Parse: show status netvolante-dns, show status ddns\n  - Purpose: Parse DDNS registration status\n  - _Leverage: RTX show command output patterns_\n  - _Requirements: REQ-4_\n  - _Prompt: Role: Go Developer | Task: Implement ParseDDNSStatus for status monitoring from REQ-4 | Success: Status parsing works_\n\n- [ ] 5. Implement DDNS command builders\n  - File: internal/rtx/parsers/ddns.go\n  - Add BuildNetVolanteCommand, BuildDDNSCommand functions\n  - Generate RTX commands from config structs\n  - Purpose: Generate configuration commands\n  - _Leverage: Existing command builder patterns_\n  - _Requirements: REQ-1, REQ-2, REQ-3_\n  - _Prompt: Role: Go Developer | Task: Implement command builders for DDNS configurations | Success: Commands generate correctly_\n\n- [ ] 6. Create DDNS parser tests\n  - File: internal/rtx/parsers/ddns_test.go\n  - Add tests for all parser and builder functions\n  - Include status parsing tests\n  - Purpose: Ensure parser reliability\n  - _Leverage: Existing test patterns_\n  - _Requirements: All_\n  - _Prompt: Role: Go Test Developer | Task: Create comprehensive tests for DDNS parser | Success: All parser functions tested_\n\n- [ ] 7. Create DDNS pattern catalog\n  - File: internal/rtx/testdata/patterns/ddns.yaml\n  - Document all DDNS command patterns\n  - Include examples from RTX documentation\n  - Purpose: Document command formats\n  - _Leverage: internal/rtx/testdata/patterns/schema.yaml_\n  - _Requirements: REQ-1, REQ-3_\n  - _Prompt: Role: Documentation Engineer | Task: Create ddns.yaml pattern catalog | Success: All DDNS commands documented_\n\n## Phase 2: Client Layer\n\n- [ ] 8. Create DDNS service interface\n  - File: internal/client/ddns_service.go\n  - Define DDNSService interface with all methods\n  - Purpose: Establish service contract\n  - _Leverage: internal/client/dns_service.go for patterns_\n  - _Requirements: REQ-1, REQ-3, REQ-4_\n  - _Prompt: Role: Go Developer | Task: Define DDNSService interface with CRUD and status methods | Success: Interface defined_\n\n- [ ] 9. Implement NetVolante DNS service methods\n  - File: internal/client/ddns_service.go\n  - Implement GetNetVolanteDNS, ConfigureNetVolanteDNS, UpdateNetVolanteDNS, DeleteNetVolanteDNS\n  - Implement TriggerNetVolanteUpdate for manual updates\n  - Purpose: Enable NetVolante operations via SSH\n  - _Leverage: internal/client/client.go executor_\n  - _Requirements: REQ-3_\n  - _Prompt: Role: Go Developer | Task: Implement NetVolante CRUD operations | Success: All NetVolante operations work_\n\n- [ ] 10. Implement custom DDNS service methods\n  - File: internal/client/ddns_service.go\n  - Implement GetDDNS, ConfigureDDNS, DeleteDDNS\n  - Add error handling for network failures\n  - Purpose: Enable custom DDNS operations via SSH\n  - _Leverage: internal/client/client.go executor_\n  - _Requirements: REQ-1_\n  - _Prompt: Role: Go Developer | Task: Implement custom DDNS CRUD operations | Success: All DDNS operations work_\n\n- [ ] 11. Implement DDNS status service methods\n  - File: internal/client/ddns_service.go\n  - Implement GetDDNSStatus for status monitoring\n  - Parse last update time, registered IP, status\n  - Purpose: Enable status monitoring\n  - _Leverage: Status parsing from ddns.go_\n  - _Requirements: REQ-4_\n  - _Prompt: Role: Go Developer | Task: Implement DDNS status monitoring | Success: Status retrieval works_\n\n- [ ] 12. Create DDNS service tests\n  - File: internal/client/ddns_service_test.go\n  - Add tests with mock executor\n  - Test CRUD operations and status retrieval\n  - Purpose: Ensure service reliability\n  - _Leverage: Existing client test patterns_\n  - _Requirements: All_\n  - _Prompt: Role: Go Test Developer | Task: Create DDNS service tests with mocks | Success: All service methods tested_\n\n## Phase 3: Provider Layer\n\n- [ ] 13. Create NetVolante DNS Terraform resource\n  - File: internal/provider/resource_rtx_netvolante_dns.go\n  - Define schema with hostname, server, interface, update_interval, ipv6_enabled\n  - Implement Create, Read, Update, Delete functions\n  - Purpose: Enable Terraform management of NetVolante DNS\n  - _Leverage: internal/provider/resource_rtx_dns_server.go for singleton patterns_\n  - _Requirements: REQ-3_\n  - _Prompt: Role: Terraform Provider Developer | Task: Create rtx_netvolante_dns resource with full CRUD | Success: Resource CRUD works_\n\n- [ ] 14. Create custom DDNS Terraform resource\n  - File: internal/provider/resource_rtx_ddns.go\n  - Define schema with provider_url, hostname, username, password, interface\n  - Implement Create, Read, Update, Delete functions\n  - Purpose: Enable Terraform management of custom DDNS\n  - _Leverage: Existing resource patterns_\n  - _Requirements: REQ-1, REQ-2_\n  - _Prompt: Role: Terraform Provider Developer | Task: Create rtx_ddns resource with full CRUD | Restrictions: Mark password as sensitive | Success: Resource CRUD works_\n\n- [ ] 15. Create DDNS status data source\n  - File: internal/provider/data_source_rtx_ddns_status.go\n  - Define schema for status output\n  - Implement Read function\n  - Purpose: Enable status monitoring in Terraform\n  - _Leverage: Existing data source patterns_\n  - _Requirements: REQ-4_\n  - _Prompt: Role: Terraform Provider Developer | Task: Create rtx_ddns_status data source | Success: Data source works_\n\n- [ ] 16. Add import support to resources\n  - File: internal/provider/resource_rtx_netvolante_dns.go, resource_rtx_ddns.go\n  - Implement Importer functions\n  - Handle credential preservation\n  - Purpose: Enable import of existing configs\n  - _Leverage: Existing import patterns_\n  - _Requirements: REQ-1, REQ-3_\n  - _Prompt: Role: Terraform Provider Developer | Task: Add import support for DDNS resources | Success: Import works_\n\n- [ ] 17. Register resources in provider\n  - File: internal/provider/provider.go\n  - Add rtx_netvolante_dns, rtx_ddns to ResourcesMap\n  - Add rtx_ddns_status to DataSourcesMap\n  - Purpose: Make resources available in Terraform\n  - _Leverage: Existing provider.go registration_\n  - _Requirements: All_\n  - _Prompt: Role: Terraform Provider Developer | Task: Register DDNS resources in provider.go | Success: Resources registered_\n\n## Phase 4: Documentation and Examples\n\n- [ ] 18. Create DDNS example configurations\n  - File: examples/ddns/main.tf\n  - Add examples for NetVolante DNS and common providers\n  - Include multi-WAN failover example\n  - Purpose: Provide user documentation\n  - _Leverage: Existing examples format_\n  - _Requirements: All_\n  - _Prompt: Role: Technical Writer | Task: Create DDNS example configurations | Success: Examples are clear_\n\n- [ ] 19. Create provider tests\n  - File: internal/provider/resource_rtx_netvolante_dns_test.go, resource_rtx_ddns_test.go, data_source_rtx_ddns_status_test.go\n  - Add unit tests with mock client\n  - Purpose: Ensure provider reliability\n  - _Leverage: Existing provider test patterns_\n  - _Requirements: All_\n  - _Prompt: Role: Go Test Developer | Task: Create provider resource tests | Success: All functions tested_\n\n## Phase 5: Integration\n\n- [ ] 20. Build and test full stack\n  - Run go build ./...\n  - Run go test ./...\n  - Fix any integration issues\n  - Purpose: Ensure everything works together\n  - _Leverage: Existing build/test infrastructure_\n  - _Requirements: All_\n  - _Prompt: Role: Integration Engineer | Task: Build and test full DDNS implementation | Success: Build succeeds, all tests pass_\n",
  "fileStats": {
    "size": 8995,
    "lines": 190,
    "lastModified": "2026-01-20T13:33:30.650Z"
  },
  "comments": []
}