{
  "id": "snapshot_1768915637202_tuwkn7s6q",
  "approvalId": "approval_1768915637196_hpgl1amid",
  "approvalTitle": "Requirements: Parser Pattern Catalogs",
  "version": 1,
  "timestamp": "2026-01-20T13:27:17.202Z",
  "trigger": "initial",
  "status": "pending",
  "content": "# Requirements Document: Parser Pattern Catalogs\n\n## Introduction\n\nThis feature creates YAML pattern catalogs for parsers that currently lack explicit documentation, and adds test coverage for the IPsec transport mode parser. The goal is to achieve 100% documentation parity across all RTX command parsers, establishing a consistent reference for command formats and validation rules.\n\n## Alignment with Product Vision\n\nThis feature supports the product vision by:\n- Ensuring consistent documentation across all parsers\n- Enabling automated test generation from pattern catalogs\n- Improving maintainability through structured command documentation\n- Supporting future parser enhancements with clear specifications\n\n## Requirements\n\n### REQ-1: IP Filter Pattern Catalog\n\n**User Story:** As a provider developer, I want a YAML pattern catalog for IP filter commands, so that all filter command formats are documented and testable.\n\n#### Acceptance Criteria\n\n1. WHEN creating ip_filter.yaml THEN the catalog SHALL document:\n   - ip filter command with all parameter variations\n   - ip filter set command\n   - ip filter dynamic command\n   - no-form commands for deletion\n2. WHEN documenting parameters THEN each parameter SHALL include:\n   - Type (int, string, enum, ipv4, etc.)\n   - Valid range or values\n   - Default value if applicable\n3. WHEN providing examples THEN each command variant SHALL have:\n   - At least 2 working examples from RTX documentation\n   - Edge case examples for boundary values\n\n### REQ-2: Ethernet Filter Pattern Catalog\n\n**User Story:** As a provider developer, I want a YAML pattern catalog for Ethernet filter commands, so that all MAC-based filter formats are documented.\n\n#### Acceptance Criteria\n\n1. WHEN creating ethernet_filter.yaml THEN the catalog SHALL document:\n   - ethernet filter command with all parameter variations\n   - MAC address matching patterns\n   - VLAN ID filtering\n   - EtherType filtering\n2. WHEN documenting MAC patterns THEN the catalog SHALL include:\n   - Single MAC address format (xx:xx:xx:xx:xx:xx)\n   - MAC address range format\n   - Wildcard patterns\n\n### REQ-3: Bridge Pattern Catalog\n\n**User Story:** As a provider developer, I want a YAML pattern catalog for bridge commands, so that bridge interface configurations are documented.\n\n#### Acceptance Criteria\n\n1. WHEN creating bridge.yaml THEN the catalog SHALL document:\n   - bridge member command for interface grouping\n   - bridge group command for L2VPN\n   - ip bridge address command\n   - no-form commands for deletion\n2. WHEN documenting bridge members THEN the catalog SHALL include:\n   - Valid interface types (lan, vlan, pp, tunnel)\n   - Member limit constraints\n\n### REQ-4: Service Pattern Catalog\n\n**User Story:** As a provider developer, I want a YAML pattern catalog for service commands, so that HTTPD/SSHD/SFTPD configurations are documented.\n\n#### Acceptance Criteria\n\n1. WHEN creating service.yaml THEN the catalog SHALL document:\n   - httpd host command\n   - httpd listen command\n   - sshd host command\n   - sshd host key command\n   - sftpd host command\n2. WHEN documenting host access THEN the catalog SHALL include:\n   - IP address formats\n   - Network CIDR formats\n   - Wildcard (*) patterns\n\n### REQ-5: System Pattern Catalog\n\n**User Story:** As a provider developer, I want a YAML pattern catalog for system commands, so that core system configurations are documented.\n\n#### Acceptance Criteria\n\n1. WHEN creating system.yaml THEN the catalog SHALL document:\n   - timezone command\n   - console character command\n   - console speed command\n   - statistics command\n   - packet-buffer command\n2. WHEN documenting timezone THEN the catalog SHALL include:\n   - UTC offset formats (+09:00, -05:00)\n   - Named timezone support\n\n### REQ-6: IPv6 Interface Pattern Catalog\n\n**User Story:** As a provider developer, I want a YAML pattern catalog for IPv6 interface commands, so that IPv6 address and RTADV configurations are documented.\n\n#### Acceptance Criteria\n\n1. WHEN creating ipv6_interface.yaml THEN the catalog SHALL document:\n   - ipv6 address command with all variations\n   - rtadv send command\n   - dhcp service client command\n   - ipv6 mtu command\n   - ipv6 secure filter command\n2. WHEN documenting IPv6 addresses THEN the catalog SHALL include:\n   - Full address format\n   - Compressed address format\n   - Link-local addresses\n   - Prefix delegation references\n\n### REQ-7: IPv6 Prefix Pattern Catalog\n\n**User Story:** As a provider developer, I want a YAML pattern catalog for IPv6 prefix commands, so that prefix delegation and RA configurations are documented.\n\n#### Acceptance Criteria\n\n1. WHEN creating ipv6_prefix.yaml THEN the catalog SHALL document:\n   - ipv6 prefix command for static prefixes\n   - ipv6 prefix ra-prefix command\n   - ipv6 prefix dhcp-prefix command\n2. WHEN documenting prefix types THEN the catalog SHALL include:\n   - Static prefix assignments\n   - RA-derived prefixes\n   - DHCPv6-PD prefixes\n\n### REQ-8: IPsec Transport Mode Tests\n\n**User Story:** As a provider developer, I want test coverage for IPsec transport mode parser, so that transport mode configurations can be validated.\n\n#### Acceptance Criteria\n\n1. WHEN testing ipsec_transport.go THEN tests SHALL cover:\n   - Transport mode enable/disable\n   - SA configuration parsing\n   - Key lifetime settings\n   - Peer address configuration\n2. WHEN creating test file THEN it SHALL follow:\n   - Existing test patterns from ipsec_tunnel_test.go\n   - Table-driven test structure\n   - Pattern catalog integration\n\n## Non-Functional Requirements\n\n### Code Architecture and Modularity\n- **Schema Compliance**: All catalogs SHALL follow the schema defined in schema.yaml\n- **Consistent Format**: All catalogs SHALL use identical YAML structure\n- **Documentation References**: Each pattern SHALL reference RTX documentation chapter/section\n\n### Performance\n- Pattern catalog loading SHALL complete within 100ms\n- Test generation from catalogs SHALL be deterministic\n\n### Maintainability\n- Catalogs SHALL be human-readable without tooling\n- Each catalog SHALL include version and last-update metadata\n- Changes to catalogs SHALL be tracked in version control\n\n### Coverage Goals\n- 100% of existing parsers SHALL have corresponding pattern catalogs\n- All documented command variations SHALL be represented in catalogs\n",
  "fileStats": {
    "size": 6321,
    "lines": 168,
    "lastModified": "2026-01-20T13:27:07.923Z"
  },
  "comments": []
}