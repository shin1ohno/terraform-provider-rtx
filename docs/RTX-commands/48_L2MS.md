# 第48章: L2MS

> 元PDFページ: 623-679

---

第 48 章
L2MS
L2MS とは、ヤマハネットワーク機器  (スイッチ、無線  LAN アクセスポイント、ルーター ) をルーターから制御する
ための機能です。 L2MS では制御を行う機器をマネージャー、 マネージャーから制御される機器をエージェントと呼
びます。エージェントの制御を行うためには、共通の設定の他に、それぞれの機器に対応する制御コマンドを参照
してください。
当機能の各コマンドでスイッチまたはアクセスポイントを指定する場合、 MAC アドレスによる指定と経路による指
定の 2つの方法があります。
経路による指定方法では、ルーターを基点として途中にある各スイッチのポート番号を順に記述します。
上図のような構成でスイッチ  C を指定する場合の表記は  "lan1:2-5-13" となります。
•最初にルーターの  LAN インターフェースを指定します。
• LAN インターフェースがスイッチングハブである場合、ポート番号を指定します。 LAN インターフェース名と
ポート番号の間はコロン  ":" で区切ります。
• LAN インターフェースがスイッチングハブでない場合、ポート番号の指定は不要です。
•ルーターとスイッチ  C の間にある各スイッチのポート番号をルーターに近い方から順に指定します。各ポート
番号はハイフン  "-" で区切ります。
L2MS によって制御できる機器の種類や対応ファームウェアリビジョンの詳細については、以下に示す、 L2MS の技
術資料をご覧ください。
https://www.rtpro.yamaha.co.jp/RT/docs/swctl/
48.1 共通の設定
48.1.1 L2MS の動作モードの設定
[書式 ]
switch  control  mode  mode
no switch  control  mode  [mode ]
[設定値及び初期値 ]
•modeコマンドリファレンス  | L2MS | 623

• [設定値 ] :
設定値 説明
manager L2MS のマネージャーとして動作する
agent L2MS のエージェントとして動作する
off L2MS を使用しない
• [初期値 ] : manager
[説明 ]
L2MS の動作モードを設定する。 mode  が manager である場合は  L2MS のマネージャーとして動作する。 mode  が
agent である場合は  L2MS のエージェントとして動作する。
[ノート ]
RTX1210 は Rev.14.01.20 以降で使用可能。
manager オプションと  agent オプションは  RTX1210 Rev.14.01.41 以降、 RTX830 Rev.15.02.24 以降、 RTX1220
Rev.15.04.04 以降で使用可能。
[適用モデル ]
RTX1220, RTX1210, RTX840, RTX830
48.1.2 L2MS を使用するか否かの設定
[書式 ]
switch  control  use interface  use [terminal= terminal ]
no switch  control  use interface  [use [terminal= terminal ]]
[設定値及び初期値 ]
•interface
• [設定値 ] : LAN インターフェース名、ブリッジインターフェース名、 VLAN インターフェース
• [初期値 ] : -
•use
• [設定値 ] :
設定値 説明
on L2MS を使用する
off L2MS を使用しない
• [初期値 ] : off
•terminal
• [設定値 ] :
設定値 説明
on 端末情報の取得を行う
off 端末情報の取得を行わない
• [初期値 ] : off
[説明 ]
L2MS を使用するか否かをインターフェースごとに設定する。 use が on であるインターフェースで  L2MS を使用す
る。 L2MS は switch  control  use コマンドの設定にしたがって動作する。 L2MS のマネージャーとして動作している
場合は、 L2MS に対応したエージェントを制御するための通信を行う。また、 terminal  オプションが  on に設定され
たインターフェースでは端末情報の取得も行う。 L2MS を使用しないインターフェースでは  use を off に設定するこ
とで不要なパケットの送出を抑えることができる。 L2MS のエージェントとして動作している場合は、 マネージャー
からの探索パケットに対して応答パケットを返す。
[ノート ]
switch  control  mode  コマンドで  mode  に off が設定されている場合、本コマンドの設定は反映されない。624 | コマンドリファレンス  | L2MS

switch  control  mode  コマンドで  mode  に agent が設定されている場合、本コマンドの設定に関わらず、 VLAN インタ
ーフェースでは  L2MS は有効にならない。
LAN 分割機能が有効になっているインターフェースでは本コマンドを設定することができない。
ポート分離機能が有効になっているインターフェースで本コマンドを設定できるのは、 Rev.14.01 系以降のファーム
ウェアである。
bridge  member  コマンドで  LAN インターフェースが収容されていない場合、本コマンドのブリッジインターフェー
スへの設定は反映されない。また、ブリッジインターフェースとブリッジインターフェースに収容されている  LAN
インターフェースで  use に on を設定している場合、ブリッジインターフェースへの設定のみ反映される。ブリッジ
インターフェースで本コマンドを設定できるのは、 RTX1210 Rev.14.01.20 以降のファームウェア、および、 Rev.15.02
系以降のすべてのファームウェアである。
VLAN インターフェースは  RTX1210 Rev.14.01.42 以降、 RTX830 Rev.15.02.30 以降、および  RTX1220 Rev.15.04.07 以
降で指定可能。
use が off に設定されたインターフェースでは  terminal  オプションが  on であっても端末情報の取得は行わない。ま
た、 L2MS のエージェントとして動作している場合、 terminal  オプションの設定は  L2MS の動作に反映されない。
terminal  オプションは  Rev.14.01 系以降のファームウェアで使用できる。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.1.3 エージェントの監視時間間隔の設定
[書式 ]
switch  control  watch  interval  time [count ]
no switch  control  watch  interval
[設定値及び初期値 ]
•time
• [設定値 ] : 秒数  (2 .. 10)
• [初期値 ] : 3
•count
• [設定値 ] : 回数  (2 .. 10)
• [初期値 ] : 3
[説明 ]
エージェントを探索するパケットの送信時間間隔、およびエージェントからの応答パケットを受信せずダウンした
と判断するまでの探索パケット送信回数を設定する。
time を大きな値に設定した場合、探索パケットの送信頻度は減るが、エージェントを接続してからマネージャーが
認識するまでの時間が長くなる。 time を小さな値に設定した場合はその逆となり、探索パケットの送信頻度は増え
るが、エージェントを接続してからマネージャーが認識するまでの時間が短くなる。
探索パケットを  count  で設定した回数送信してもエージェントから応答パケットを受信しない場合、 当該のエージェ
ントはダウンしたと判断する。
[ノート ]
switch  control  mode  コマンドで  mode  に manager が設定されていない場合、本コマンドの設定は L2MSの動作に反映
されない。
エージェントを接続しているイーサネットケーブルを抜いた場合は、当コマンドの設定よりも早いタイミングでエ
ージェントがダウンしたと判断することがある。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.1.4 端末情報の監視時間間隔の設定
[書式 ]
lan-map  terminal  watch  interval  time1  [time2 ]
no lan-map  terminal  watch  interval  [time1  [time2 ]]
[設定値及び初期値 ]
•time1
• [設定値 ] : マネージャー /エージェント配下の端末情報を取得する間隔  (秒) (1800 .. 86400)コマンドリファレンス  | L2MS | 625

• [初期値 ] : 1800
•time2
• [設定値 ] : 端末の接続 /切断を即時通知できないエージェント配下の端末情報を取得する間隔  (秒) (10 .. 86400)
• [初期値 ] : 60
[説明 ]
LAN マップで管理しているネットワークの端末情報の定期取得を行う間隔を設定する。
マネージャーは、各エージェントからの端末の接続 /切断の即時通知を契機に取得する端末情報と、指定の間隔で各
エージェントに対して行う定期取得処理を契機に取得する端末情報を基に  LAN マップの端末情報を更新している。
ただし、端末の接続 /切断を即時通知できるエージェントと、端末の接続 /切断を即時通知できないエージェントがあ
り、それぞれで定期取得処理の実行間隔と目的が以下のように異なる。
•定期取得 1
マネージャー、および端末の接続 /切断を即時通知できるエージェントを対象機器として、 time1  に設定した時間
が経過する度に端末情報を取得する。定期取得 1は端末情報の補正を目的としている。端末の接続 /切断を即時
通知できるエージェント配下の端末の接続 /切断は、 time1  の経過を待たずに  LAN マップに即時に反映される。し
かし、端末からの通信がなく、エージェントの  MAC アドレステーブルに端末が登録されていなかった場合やパ
ケットロスにより端末情報を受信できなかった場合、端末の接続は  LAN マップに即時に反映されない。このよ
うな場合は、 time1  が経過する度に行う定期取得により、端末情報が取得できたときに  LAN マップに反映され
る。
•定期取得 2
端末の接続 /切断を即時通知できないエージェントを対象機器として、 time2  に設定した時間が経過する度に端末
情報を取得する。端末の接続 /切断を即時通知できないエージェント配下の端末の接続 /切断は、 LAN マップに即
時に反映されず、 time2  の間隔で反映される。
[ノート ]
端末の接続 /切断を即時通知できないエージェントは以下の無線  AP である。
• WLX202
• WLX302
• WLX313
• WLX402 (Rev.17.00.09 より前のファームウェア )
他のエージェントは端末の接続 /切断の即時通知が可能である。
switch  control  mode  コマンドで  mode  に manager が設定されていない場合、本コマンドの設定は  L2MS の動作に反映
されない。
switch  control  use コマンドで  terminal  オプションに  on が設定されていない場合、本コマンドの設定に関わらず、端
末情報の補正、および更新は行わない。
RTX1210 は Rev.14.01.09 以降で  time2  オプションを使用可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.1.5 スナップショット機能を使用するか否かの設定
[書式 ]
lan-map  snapshot  use interface  use [terminal= terminal ]
no lan-map  snapshot  use interface  [use [terminal= terminal ]]
[設定値及び初期値 ]
•interface
• [設定値 ] : LAN インターフェース名、ブリッジインターフェース名、 VLAN インターフェース
• [初期値 ] : -
•use
• [設定値 ] :
設定値 説明
on 使用する
off 使用しない626 | コマンドリファレンス  | L2MS

• [初期値 ] : off
•terminal
• [設定値 ] :
設定値 説明
on 端末情報を含める
off 端末情報を含めない
wired-only 有線接続された端末情報のみ含める
• [初期値 ] : off
[説明 ]
LAN マップのスナップショット機能を使用するか否かをインターフェースごとに設定する。 terminal  オプションが
on に設定されたインターフェースでは、端末情報がスナップショット機能の対象に含まれるようになる。 terminal
オプションが  wired-only に設定されたインターフェースでは、有線接続された端末情報のみがスナップショット機
能の対象に含まれるようになる。無線接続された端末情報はスナップショット機能の対象には含まれない。
[ノート ]
switch  control  mode  コマンドで  mode  に manager が設定されていない場合、本コマンドの設定は L2MSの動作に反映
されない。
switch  control  use コマンドで  terminal  オプションが  on に設定されていない場合、本コマンドの設定に関わらず、端
末情報はスナップショット機能の対象に含まれない。
ブリッジインターフェースは  RTX1210 Rev.14.01.20 以降のファームウェア、および、 Rev.15.02 系以降のすべてのフ
ァームウェアで指定可能。
VLAN インターフェースは  RTX1210 Rev.14.01.42 以降、 RTX830 Rev.15.02.30 以降、 RTX1220 Rev.15.04.07 以降、お
よび  RTX840 で指定可能。
wired-only は RTX1210 Rev.14.01.09 以降のファームウェア、および、 Rev.15.02 系以降のすべてのファームウェアで
指定可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.1.6 スナップショットファイルを作成する
[書式 ]
take lan-map  snapshot  interface  [update]
[設定値及び初期値 ]
•interface
• [設定値 ] : LAN インターフェース名、ブリッジインターフェース名、 VLAN インターフェース
• [初期値 ] : -
• update : ネットワークの接続状態を更新した後、スナップショットファイルを作成する
• [初期値 ] : -
[説明 ]
LAN マップのスナップショット機能でベースとなるスナップショットファイルを作成する。 update  オプションが含
まれない場合、現在マネージャーが保持しているネットワークの状態をスナップショットファイルとして保存する。
update  オプションが含まれる場合、ネットワークの接続状態の情報を最新に更新した後、スナップショットファイ
ルとして保存する。
[ノート ]
switch  control  mode  コマンドで  mode  に manager が設定されている場合、本コマンドを使用できる。
スナップショットファイルの作成を開始すると、以下の  SYSLOG が出力される。
[LANMAP] SnapShot(LAN1): Take snapshot files: Start.
スナップショットファイルの作成が完了すると、以下の  SYSLOG が出力される。
[LANMAP] SnapShot(LAN1): Take snapshot files: Complete.
update  オプションが含まれる場合、ネットワークの接続状態の情報を最新に更新するが、ネットワークの構成によ
っては更新が完了するまでに時間がかかる場合がある。コマンドリファレンス  | L2MS | 627

ブリッジインターフェースは  RTX1210 Rev.14.01.20 以降のファームウェア、および、 Rev.15.02 系以降のすべてのフ
ァームウェアで指定可能。
VLAN インターフェースは  RTX1210 Rev.14.01.42 以降、 RTX830 Rev.15.02.30 以降、 RTX1220 Rev.15.04.07 以降、お
よび  RTX840 で指定可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.1.7 LAN マップの SYSLOG 出力の設定
[書式 ]
lan-map  log sw
no lan-map  log [sw]
[設定値及び初期値 ]
•sw
• [設定値 ] :
設定値 説明
on 出力する
off 出力しない
• [初期値 ] : off
[説明 ]
LANマップに関する SYSLOG 出力の設定をする。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.1.8 LAN マップで使用する機器名の設定
[書式 ]
lan-map  sysname  name
no lan-map  sysname  [name ]
[設定値及び初期値 ]
•name
• [設定値 ] : 機器名  (半角  1 文字以上、 32 文字以下 )
• [初期値 ] : (製品名称 )_(シリアル番号 )
[説明 ]
LAN マップで表示する機器名を設定をする。 name  に使用できる文字は、半角英数字、ハイフン  (-)、アンダーバー
(_)、および半角スペース  ( )。半角スペースを含ませるためには、 name  全体をダブルクォーテーション  (")、または
シングルクォーテーション  (')で囲む。
[ノート ]
RTX1210 は Rev.14.01.20 以降で使用可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.2 スイッチの制御
48.2.1 スイッチの選択
[書式 ]
switch  select  switch
no switch  select
[設定値及び初期値 ]
•switch628 | コマンドリファレンス  | L2MS

• [設定値 ] :
設定値 説明
スイッチ MACアドレスもしくは経路
none スイッチを選択しない
• [初期値 ] : -
[説明 ]
対象とするスイッチを選択する。以降プロンプトには console prompt で設定した文字列と選択したスイッチが続け
て表示される。
switch select  noneまたは no switch select を実行すると、プロンプトにスイッチを表示しなくなる。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.2.2 スイッチが持つ機能の設定
[書式 ]
switch  control  function  set function  [index  ...] value
no switch  control  function  set function  [index  ...]
[設定値及び初期値 ]
•function
• [設定値 ] : 機能の名前
• [初期値 ] : -
•index
• [設定値 ] : インデックス
• [初期値 ] : -
•value
• [設定値 ] : 設定値
• [初期値 ] : -
[説明 ]
スイッチが持つ機能について設定を行う。設定したい機能の名前とその機能に対する設定値をパラメータとして指
定する。複数の設定対象が存在する機能ではインデックスを指定する。
コマンド実行中に Ctrl-C押下で中断することができる。ただし、実行後に同期処理が開始された場合は中断できな
い。
[ノート ]
本コマンドを実行する前に switch select でスイッチを指定しておく必要がある。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.2.3 スイッチが持つ機能の設定内容や動作状態の取得
[書式 ]
switch  control  function  get function  [index  ...] [ switch ]
[設定値及び初期値 ]
•function
• [設定値 ] : 機能の名前
• [初期値 ] : -
•index
• [設定値 ] : インデックス
• [初期値 ] : -
•switch  : スイッチ
• [設定値 ] :
• MAC アドレスコマンドリファレンス  | L2MS | 629

•経路
• [初期値 ] : -
[説明 ]
スイッチが持つ機能の設定内容や動作状態を取得する。取得したい機能の名前をパラメータとして指定する。複数
の取得対象が存在する機能ではインデックスを指定する。
コマンド実行中に Ctrl-C押下で中断することができる。
[ノート ]
switchを指定しない場合は、本コマンドを実行する前に switch select でスイッチを指定しておく必要がある。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.2.4 スイッチに対して特定の動作を実行
[書式 ]
switch  control  function  execute  function  [index  ...] [ switch ]
[設定値及び初期値 ]
•function
• [設定値 ] : 機能の名前
• [初期値 ] : -
•index
• [設定値 ] : インデックス
• [初期値 ] : -
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
スイッチに対して特定の動作を実行させる。実行したい動作に対応する機能の名前をパラメータとして指定する。
複数の実行対象が存在する機能ではインデックスを指定する。
コマンド実行中に Ctrl-C押下で中断することができる。
[ノート ]
switchを指定しない場合は、本コマンドを実行する前に switch select でスイッチを指定しておく必要がある。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.2.5 スイッチの設定の削除
[書式 ]
switch  control  function  default  [both] [ switch ]
[設定値及び初期値 ]
• both : 対象のスイッチに対して適用可能な設定をすべて削除する
• [初期値 ] : -
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
選択したスイッチに対するルーター上の設定を削除する。同時に、ルーターがスイッチを制御している場合は同期
処理を行う。630 | コマンドリファレンス  | L2MS

bothオプションを指定しない場合、スイッチに対して適用可能な他の設定が存在すれば、その設定でスイッチを同
期する。例えば、 MACアドレス指定と経路指定の設定が存在する状態で、 MACアドレス指定の設定を選択して本
コマンドを実行した場合、 MACアドレス指定の設定が削除された後、スイッチは経路指定の設定で同期される。
bothオプションを指定する場合、スイッチに対して適用可能な他の設定が存在すれば、その設定も同時に削除する。
上記の例では、 MACアドレス指定と経路指定の両方の設定が削除される。
すなわち、スイッチを確実に初期化したい場合は bothオプションを指定する。
[ノート ]
switchを指定しない場合は、本コマンドを実行する前に switch select でスイッチを指定しておく必要がある。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.2.6 スイッチのファームウェアの更新
[書式 ]
switch  control  firmware  upload  go file [switch ]
[設定値及び初期値 ]
•file
• [設定値 ] : ファームウェアのファイルへの相対パスまたは絶対パス
• [初期値 ] : -
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
スイッチのファームウェアを更新する。ファームウェアのファイルはフラッシュ ROMや外部メモリへ事前に保存
しておき、 fileにパスを指定する。ファームウェアの書き換えに成功すると、スイッチは自動的に再起動する。
コマンド実行中に Ctrl-C押下で中断することができる。
fileに相対パスを指定した場合、環境変数 PWDを基点としたパスと解釈される。 PWDはsetコマンドで変更可能で
あり、初期値は  "/" である。
[ノート ]
switchを指定しない場合は、本コマンドを実行する前に switch select でスイッチを指定しておく必要がある。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.2.7 LAN ケーブル二重化機能の設定
[書式 ]
switch  control  route  backup  route  port
no switch  control  route  backup  route
[設定値及び初期値 ]
•route
• [設定値 ] : メイン経路
• [初期値 ] : -
•port
• [設定値 ] : バックアップ経路として使用するポート番号
• [初期値 ] : -
[説明 ]
LANケーブル二重化機能を動作させるメイン経路とバックアップ経路を設定する。
routeで指定した経路をメイン経路、 portに接続される先の経路をバックアップ経路として、 LANケーブル二重化機
能が動作する。コマンドリファレンス  | L2MS | 631

[ノート ]
以下のポートを portに設定することはできない
•routeでメイン経路として指定したポート
•既に LANケーブル二重化機能が設定されているポート
ルーターのスイッチングハブに対して本コマンドを設定した場合、設定した LANインタフェースで switch control
useコマンドが onに設定されているときのみ、 LANケーブル二重化機能が動作する。
スイッチに対して本コマンドを設定した場合、当該ポートが一時的にリンクダウンする。
LANケーブル二重化機能の動作状態は show status switch control route backup コマンドで確認できる。
スイッチに本機能が実装されていない場合はコマンドエラーとなる。
[設定例 ]
下図のようにスイッチ Aのポート 5をメイン経路、ポート 6をバックアップ経路とする場合の設定
switch control route backup lan1:2-5 6
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.2.8 スイッチの設定ファイルを格納するディレクトリの指定
[書式 ]
switch  config  directory  path
no switch  config  directory  [path]
[設定値及び初期値 ]
•path
• [設定値 ] : 相対パスまたは絶対パス  (半角  256 文字以下、全角  128 文字以下 )
• [初期値 ] : /sw_config
[説明 ]
スイッチの設定ファイル (config)を格納するディレクトリを指定する。
相対パスを指定した場合、環境変数  PWD を起点としたパスと解釈される。
PWD は set コマンドで変更可能であり、初期値は  "/" である。
path が RTFS 領域となる場合には、 path にマルチバイト文字を使用することはできない。632 | コマンドリファレンス  | L2MS

[ノート ]
RTX1210 は Rev.14.01.28 以降で使用可能。
RTX830 は Rev.15.02.03 以降で使用可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.2.9 スイッチの設定を保存するファイル名の指定
[書式 ]
switch  config  filename  name
no switch  config  filename  [name ]
[設定値及び初期値 ]
•name
• [設定値 ] : config ファイル名  (半角  99 文字以下、全角  49 文字以下 )
• [初期値 ] : -
[説明 ]
スイッチの設定を保存するファイル名を指定する。
このコマンドが省略された場合は、 switch select  で指定された文字列に  .conf を付けたものをファイル名とする。
ただし  : (コロン ) は _ (アンダースコア )に置き換えられる。
複数の  switch select  コマンドで同じファイル名を指定することができる。
switch config directory  コマンドで指定したディレクトリが  RTFS 領域である場合は、 ファイル名にマルチバイト文字
を使用することはできない。
本コマンドを実行する前に  switch select  コマンドでスイッチを指定しておく必要がある。
[ノート ]
RTX1210 は Rev.14.01.28 以降で使用可能。
RTX830 は Rev.15.02.03 以降で使用可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.2.10 スイッチの設定の取得
[書式 ]
switch  control  config  get [switch ]
switch  control  config  get [[interface ] all]
[設定値及び初期値 ]
•switch
• [設定値 ] :
設定値 説明
MACアドレスもしくは経路 選択したスイッチのみ
all 全てのスイッチ
• [初期値 ] : -
•interface
• [設定値 ] : LAN インターフェース名、ブリッジインターフェース名
• [初期値 ] : -
[説明 ]
スイッチの設定ファイルを取得して保存する。
switch  パラメータに  MACアドレスもしくは経路を指定した場合は、指定したスイッチの設定ファイルを取得する。
all を指定すると、マネージャーが認識している全てのスイッチの設定ファイルを取得する。コマンドリファレンス  | L2MS | 633

interface  パラメータを指定すると、指定のインターフェースにつながっているスイッチを対象とする。
interface  パラメータを省略した場合は、 all を指定した時と同様になる。
[ノート ]
スイッチの設定ファイルの名前には、 switch config filename  コマンドで指定したファイル名を使用する。
スイッチの設定ファイルは  switch config directory  コマンドで指定したディレクトリに保存される。
schedule at  コマンドで指定することができる。
RTX1210 は Rev.14.01.28 以降で使用可能。
RTX830 は Rev.15.02.03 以降で使用可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.2.11 スイッチの設定の復元
[書式 ]
switch  control  config  set [switch ]
switch  control  config  set [[interface ] all]
[設定値及び初期値 ]
•switch
• [設定値 ] :
設定値 説明
MACアドレスもしくは経路 選択したスイッチのみ
all 全てのスイッチ
• [初期値 ] : -
•interface
• [設定値 ] : LAN インターフェース名、ブリッジインターフェース名
• [初期値 ] : -
[説明 ]
マネージャーに保存されているスイッチの設定ファイルを使用して、スイッチの設定を復元する。
switch  パラメータに  MACアドレスもしくは経路を指定した場合は、指定したスイッチの設定を復元する。
all を指定すると、マネージャーが認識している全てのスイッチの設定を復元する。
interface  パラメータを指定すると、指定のインターフェースにつながっているスイッチを対象とする。
interface  パラメータを省略した場合は、 all を指定した時と同様になる。
[ノート ]
復元に使用するスイッチの設定ファイルには、 switch config filename  コマンドで指定した設定ファイルを使用する。
スイッチの設定ファイルは  switch config directory  コマンドで指定したディレクトリに保存されている必要がある。
schedule at  コマンドで指定することができる。
RTX1210 は Rev.14.01.28 以降で使用可能。
RTX830 は Rev.15.02.03 以降で使用可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.2.12 スイッチのゼロコンフィグ機能を使用するか否かの設定
[書式 ]
switch  control  config-auto-set  use use
no switch  control  config-auto-set  use [use]
[設定値及び初期値 ]
•use
• [設定値 ] :634 | コマンドリファレンス  | L2MS

設定値 説明
on 使用する
off 使用しない
• [初期値 ] : off
[説明 ]
スイッチのゼロコンフィグ機能を使用するか否かを設定する。
スイッチのゼロコンフィグ機能が有効かつ、 L2MS エージェントのヤマハスイッチの設定（コンフィグ）が保存され
ている場合、工場出荷状態の  L2MS エージェントがネットワークに接続されたときに、保存されている設定（コン
フィグ）を自動で設定する。
[ノート ]
RTX1300 Rev.23.00.17 以降で使用可能。
RTX1220 Rev.15.04.07 以降で使用可能。
RTX1210 Rev.14.01.42 以降で使用可能。
RTX830 Rev.15.02.30 以降で使用可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3 スイッチの機能
48.3.1 システム
48.3.1.1 BootROM バージョンの取得
[書式 ]
switch  control  function  get boot-rom-version  [switch ]
[設定値及び初期値 ]
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
BootROM バージョンを取得する。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.1.2 ファームウェアリビジョンの取得
[書式 ]
switch  control  function  get firmware-revision  [switch ]
[設定値及び初期値 ]
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
ファームウェアリビジョンを取得する。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830コマンドリファレンス  | L2MS | 635

48.3.1.3 シリアル番号の取得
[書式 ]
switch  control  function  get serial-number  [switch ]
[設定値及び初期値 ]
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
シリアル番号を取得する。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.1.4 製品名称の取得
[書式 ]
switch  control  function  get model-name  [switch ]
[設定値及び初期値 ]
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
製品名称を取得する。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.1.5 MAC アドレスの取得
[書式 ]
switch  control  function  get system-macaddress  [switch ]
[設定値及び初期値 ]
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
MACアドレスを取得する。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.1.6 機器の名前の設定
[書式 ]
switch  control  function  set system-name  name
no switch  control  function  set system-name
switch  control  function  get system-name  [switch ]
[設定値及び初期値 ]
•name
• [設定値 ] : 機器の名前  (1文字以上、 64文字以下 )636 | コマンドリファレンス  | L2MS

• [初期値 ] : (製品名称 )_(シリアル番号 )
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
機器の名前を設定する。 nameに使用できる文字は、半角英数字およびハイフン  (-)、アンダーバー  (_)。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.1.7 省電力機能を使用するか否かの設定
[書式 ]
switch  control  function  set energy-saving  mode
no switch  control  function  set energy-saving
switch  control  function  get energy-saving  [switch ]
[設定値及び初期値 ]
•mode
• [設定値 ] :
設定値 説明
on 使用する
off 使用しない
• [初期値 ] : off
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
LANポートの省電力機能を使用するか否かを設定する。
[ノート ]
本機能の設定を変更すると、全てのポートが一時的にリンクダウンする。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.1.8 LED の輝度の調整
[書式 ]
switch  control  function  set led-brightness  mode
no switch  control  function  set led-brightness
switch  control  function  get led-brightness  [switch ]
[設定値及び初期値 ]
•mode
• [設定値 ] :
設定値 説明
normal 明るい
economy 暗い
• [初期値 ] : normal
•switch  : スイッチコマンドリファレンス  | L2MS | 637

• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
LEDの輝度を調整する。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.1.9 LED の表示モードの取得
[書式 ]
switch  control  function  get status-led-mode  [switch ]
[設定値及び初期値 ]
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
LANポートごとの LEDの現在の表示モードを取得する。
表示モード 説明
link/act各ポートのリンク状態を表示する。
•緑色で点灯 : リンク確立状態
•緑色で点滅 : データ転送中
•消灯 : リンク喪失状態
speed各ポートの接続速度を表示する。
•緑色で点灯 : 1000BASE-T で接続
•橙色で点灯 : 100BASE-TX で接続
•消灯 : 10BASE-T で接続
duplex各ポートの接続状態  (全二重 /半二重 ) を表示する。
•緑色で点灯 : 全二重で接続
•橙色で点灯 : 半二重で接続
status機器の状態を表示。
•橙色で点灯 : ループを検出
SWX2200-24G でファンの故障を検知した場合は、モー
ドLED下側が橙色で点滅する。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.1.10 ファンの状態の取得
[書式 ]
switch  control  function  get status-fan  [switch ]
[設定値及び初期値 ]
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -638 | コマンドリファレンス  | L2MS

[説明 ]
ファンの状態を取得する。
状態 説明
normal 正常
lock 異常
[ノート ]
SWX2200-24G 、SWX2200-8PoE でのみ使用可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.1.11 ファンの回転数の取得
[書式 ]
switch  control  function  get status-fan-rpm  F AN [switch ]
[設定値及び初期値 ]
•F AN
• [設定値 ] : ファン番号
• [初期値 ] : -
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
ファンの回転数を取得する。
[ノート ]
SWX2200-8PoE でのみ使用可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.1.12 再起動
[書式 ]
switch  control  function  execute  restart  [switch ]
[設定値及び初期値 ]
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
機器を再起動する。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.1.13 起動してからの時間の取得
[書式 ]
switch  control  function  get system-uptime  [switch ]
[設定値及び初期値 ]
•switch  : スイッチ
• [設定値 ] :コマンドリファレンス  | L2MS | 639

• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
起動してからの時間を取得する。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.2 ポート
48.3.2.1 リンクアグリゲーションのタイプの取得
[書式 ]
switch  control  function  get lag-type  [switch ]
[設定値及び初期値 ]
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
リンクアグリゲーションのタイプを取得する。
状態 説明
Not bundle リンクアグリゲーションが設定されていない
Type-A グループ #1: ポート 21, 22
Type-B グループ #1: ポート 21, 22　グループ #2: ポート 23, 24
Type-C グループ #1: ポート 21, 22, 23, 24
[ノート ]
SWX2100-24G でのみ使用可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.2.2 ポートの通信速度および動作モードの設定
[書式 ]
switch  control  function  set port-speed  port speed
no switch  control  function  set port-speed  port
switch  control  function  get port-speed  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•speed  : 通信速度および動作モード
• [設定値 ] :
設定値 説明
auto 速度自動判別
1000-fdx 1000BASE-T 全二重
100-fdx 100BASE-TX 全二重
100-hdx 100BASE-TX 半二重640 | コマンドリファレンス  | L2MS

設定値 説明
10-fdx 10BASE-T 全二重
10-hdx 10BASE-T 半二重
• [初期値 ] : auto
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
ポートの通信速度および動作モードを設定する。
[ノート ]
本機能の設定を変更すると、当該ポートが一時的にリンクダウンする。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.2.3 ポートを使用するか否かの設定
[書式 ]
switch  control  function  set port-use  port mode
no switch  control  function  set port-use  port
switch  control  function  get port-use  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•mode
• [設定値 ] :
設定値 説明
on 使用する
off 使用しない
• [初期値 ] : on
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
ポートを使用するか否かを設定する。本機能を offに設定すると、当該ポートに LANケーブルを接続してもリンク
アップしなくなる。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.2.4 オートクロスオーバー機能を使用するか否かの設定
[書式 ]
switch  control  function  set port-auto-crossover  port mode
no switch  control  function  set port-auto-crossover  port
switch  control  function  get port-auto-crossover  port [switch ]
[設定値及び初期値 ]
•portコマンドリファレンス  | L2MS | 641

• [設定値 ] : ポート番号
• [初期値 ] : -
•mode
• [設定値 ] :
設定値 説明
on 使用する
off 使用しない
• [初期値 ] : on
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
オートクロスオーバー機能を使用するか否かを設定する。
オートクロスオーバー機能とは、 LANケーブルがストレートケーブルかクロスケーブルかを自動的に判定して接続
する機能である。本機能を onに設定すると、ケーブルのタイプがどのようなものであるかを気にする必要が無くな
る。
[ノート ]
本機能の設定を変更すると、当該ポートが一時的にリンクダウンする。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.2.5 速度ダウンシフト機能を使用するか否かの設定
[書式 ]
switch  control  function  set port-speed-downshift  port mode
no switch  control  function  set port-speed-downshift  port
switch  control  function  get port-speed-downshift  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•mode
• [設定値 ] :
設定値 説明
on 使用する
off 使用しない
• [初期値 ] : on
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
速度ダウンシフト機能を使用するか否かを設定する。
速度ダウンシフト機能とは、例えば 1000BASE-T で使用できない LANケーブルを接続された時に速度を落としてリ
ンクを試みる機能である。
[ノート ]
本機能の設定を変更すると、当該ポートが一時的にリンクダウンする。642 | コマンドリファレンス  | L2MS

[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.2.6 フロー制御を使用するか否かの設定
[書式 ]
switch  control  function  set port-flow-control  port mode
no switch  control  function  set port-flow-control  port
switch  control  function  get port-flow-control  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•mode
• [設定値 ] :
設定値 説明
on 使用する
off 使用しない
• [初期値 ] : off
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
フロー制御を使用するか否かを設定する。
本機能を onに設定すると、受信側と送信側の両方でフロー制御が有効になる。全二重でリンクアップしている場合
はIEEE802.3x 、半二重の場合はバックプレッシャ方式による制御がそれぞれ行われる。
[ノート ]
本機能の設定を変更すると、当該ポートが一時的にリンクダウンする。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.2.7 L2MS パケットを遮断するか否かの設定
[書式 ]
switch  control  function  set port-blocking-control-packet  port mode
no switch  control  function  set port-blocking-control-packet  port
switch  control  function  get port-blocking-control-packet  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•mode
• [設定値 ] :
設定値 説明
on 制御パケットを遮断する
off 制御パケットを遮断しない
• [初期値 ] : off
•switch  : スイッチ
• [設定値 ] :コマンドリファレンス  | L2MS | 643

• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
L2MS パケットを遮断するか否かを設定する。本機能を onに設定すると、当該ポートでスイッチを制御するための
通信が行われなくなる。
[ノート ]
ヤマハスイッチに本機能が実装されていない場合はコマンドエラーとなる。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.2.8 L2MS パケット以外のデータパケットを遮断するか否かの設定
[書式 ]
switch  control  function  set port-blocking-data-packet  port mode
no switch  control  function  set port-blocking-data-packet  port
switch  control  function  get port-blocking-data-packet  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•mode
• [設定値 ] :
設定値 説明
on データパケットを遮断する
off データパケットを遮断しない
• [初期値 ] : off
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
L2MS パケット以外のデータパケットを遮断するか否かを設定する。本機能を onに設定すると、当該ポートでスイ
ッチを制御するための通信以外のデータ通信が行われなくなる。
[ノート ]
ヤマハスイッチに本機能が実装されていない場合はコマンドエラーとなる。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.2.9 コンボポートの使用状況の取得
[書式 ]
switch  control  function  get status-combo-port  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路644 | コマンドリファレンス  | L2MS

• [初期値 ] : -
[説明 ]
ポートが SFPとEthernetのどちらで使用されているかを取得する。
状態 説明
disable ポートが使用されていない
sfp SFPポートとして使用されている
ethernet イーサポートとして使用されている
[ノート ]
SWX2100-24G でのみ使用可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.2.10 ポートの受光レベルの取得
[書式 ]
switch  control  function  get status-port-sfp-rx-power  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
SFPポートの受光レベルを取得する。
状態 説明
normal 正常
low 受光レベルが下限閾値を下回っている
high 受光レベルが上限閾値を超えている
[ノート ]
SWX2100-24G でのみ使用可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.2.11 ポートのリンク状態の取得
[書式 ]
switch  control  function  get status-port-speed  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -コマンドリファレンス  | L2MS | 645

[説明 ]
ポートの現在のリンク状態を取得する。
状態 説明
1000-fdx 1000BASE-T 全二重
100-fdx 100BASE-TX 全二重
100-hdx 100BASE-TX 半二重
10-fdx 10BASE-T 全二重
10-hdx 10BASE-T 半二重
down リンクダウン
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.3 MAC アドレステーブル
ヤマハスイッチの MACアドレステーブルの大きさは以下の通りです。
機種 最大エントリ数
SWX2200-24G
8192
SWX2200-8G 、SWX2200-8PoE
48.3.3.1 MAC アドレスエージング機能を使用するか否かの設定
[書式 ]
switch  control  function  set macaddress-aging  mode
no switch  control  function  set macaddress-aging
switch  control  function  get macaddress-aging  [switch ]
[設定値及び初期値 ]
•mode
• [設定値 ] :
設定値 説明
on 使用する
off 使用しない
• [初期値 ] : on
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
MACアドレスエージング機能を使用するか否かを設定する。
MACアドレスエージング機能とは、スイッチが持つ MACアドレステーブル内のエントリを一定時間で消去してい
く機能である。本機能を offに設定すると、一度スイッチが学習した MACアドレスは自動的に消去されない。
消去する時間間隔は macaddress-aging-timer で設定する。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.3.2 MAC アドレスエージングの時間間隔の設定
[書式 ]
switch  control  function  set macaddress-aging-timer  time
no switch  control  function  set macaddress-aging-timer646 | コマンドリファレンス  | L2MS

switch  control  function  get macaddress-aging-timer  [switch ]
[設定値及び初期値 ]
•time
• [設定値 ] : 秒数  (10 .. 64800)
• [初期値 ] : 300
[説明 ]
MACアドレスエージング機能において、スイッチが学習した MACアドレスを消去する時間間隔を設定する。
スイッチが MACアドレスを学習してからエントリを消去するまでの時間は、最短で本機能で設定した秒数、最長で
その 2倍の秒数となる。例えば設定値が 300秒だった場合、最短 300秒、最長 600秒となる。
なお、一度学習した MACアドレスからのフレームを再度受信した場合、当該エントリが消去されるまでの時間はリ
セットされる。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.3.3 MAC アドレスをキーにした MACアドレステーブルの検索
[書式 ]
switch  control  function  get status-macaddress-addr  mac_address  [switch ]
[設定値及び初期値 ]
•mac_address
• [設定値 ] : MACアドレス
• [初期値 ] : -
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
MACアドレスをキーにして MACアドレステーブルを検索し、当該 MACアドレスを学習したポート番号を取得す
る。同一の MACアドレスを異なる VLANで学習している場合は、ポート番号が複数表示されることがある。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.3.4 ポート番号をキーにした MACアドレステーブルの検索
[書式 ]
switch  control  function  get status-macaddress-port  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
ポート番号をキーにして MACアドレステーブルを検索し、当該ポートで学習した MACアドレスを取得する。同一
のMACアドレスを異なる VLANで学習している場合は、 複数のポートで同一の MACアドレスが表示される場合が
ある。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830コマンドリファレンス  | L2MS | 647

48.3.3.5 MAC アドレステーブルのエントリの消去
[書式 ]
switch  control  function  execute  clear-macaddress-table  [switch ]
[設定値及び初期値 ]
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
MACアドレステーブルの全エントリを消去する。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.4 VLAN
ヤマハスイッチでポート VLAN/タグ VLANの設定を行う場合、コマンドでは VLAN ID を直接入力せず、 VLAN登
録番号を指定します。 VLAN登録番号と VLAN ID の紐付けは vlan-idで行います。例えば以下のような設定を行っ
た場合、ポート 2のVLAN ID は4になります。
switch control function set vlan-id 10 4
switch control function set vlan-access 2 10
スイッチで受信したパケットは、 VLANタグの有無に関わらずいずれかの VLAN ID に分類され、その情報に基づい
て転送処理が行われます。ポートの VLAN動作モードは vlan-port-mode で設定します。
vlan-port-mode 受信時の動作 送信時の動作
accessVLANタグ無しのパケットのみ受信
します。 VLAN ID の分類は vlan-
accessの設定に基づいて行われます。受信時に、送信するポートの VLAN
ID (vlan-access ) に分類されたパケッ
トを VLANタグ無しで送信します。
trunkVLANタグ付きのパケットのみ受信
します。ただし、 VLANタグ中の
VLAN ID にポートが参加している必
要があります。ポートが参加する
VLAN ID はvlan-trunk で設定しま
す。 VLAN ID の分類は VLANタグ
の情報に基づいて行われます。受信時に、送信するポートが参加す
るVLAN ID ( vlan-trunk ) に分類され
たパケットを VLANタグ付きで送信
します。
hybridVLANタグ付き、 VLANタグ無し、
両方のパケットを受信します。
VLANタグ無しのパケットを受信し
た場合は、アクセスポートと同様の
動作をします。 VLANタグ付きのパ
ケットを受信した場合は、トランク
ポートと同様の動作をします。受信時に、送信するポートの VLAN
ID (vlan-access ) に分類されたパケッ
トを VLANタグ無しで送信します。
また、受信時に、送信するポートが
参加する VLAN ID ( vlan-trunk ) に分
類されたパケットを VLANタグ付き
で送信します。どちらにも該当する
場合は、 VLANタグ無しで送信しま
す。
マルチプル VLANは、 1つのスイッチにおいてポートをグループに分けて、グループ間の通信を禁止する機能です。
vlan-multiple-use で機能を有効にした後、 vlan-multiple でポートが所属するグループ番号を指定します。 1つのポー
トを複数のグループに所属させることができます。あるポートで受信したパケットは、当該ポートと同じグループ
番号に所属する他のポートから送信されます。
例として、以下のような設定を行った場合を考えます。648 | コマンドリファレンス  | L2MS

switch control function set vlan-multiple-use on
switch control function set vlan-multiple 1 1 join
switch control function set vlan-multiple 2 2 join
switch control function set vlan-multiple 3 1 join
switch control function set vlan-multiple 3 2 join
•ポート 1で受信したパケットはポート 3からのみ送信されます。
•ポート 2で受信したパケットはポート 3からのみ送信されます。
•ポート 3で受信したパケットはポート 1とポート 2から送信されます。
マルチプル VLANはネットワークを分割するものではないので、異なるグループ間でも同一のネットワークアドレ
スが割り振られます。
ポート VLAN/タグ VLANとマルチプル VLANを併用する場合、マルチプル VLANにおいて同一のグループに所属
するポート間であっても、ポート VLAN/タグ VLANにおいて同一の VLANに所属していない場合は通信すること
ができません。
48.3.4.1 VLAN ID の設定
[書式 ]
switch  control  function  set vlan-id  vlan_register_num  vid
no switch  control  function  set vlan-id  vlan_register_num
switch  control  function  get vlan-id  vlan_register_num  [switch ]
[設定値及び初期値 ]
•vlan_register_num
• [設定値 ] : VLAN 登録番号  (1 .. 256)
• [初期値 ] : -
•vid
• [設定値 ] : VLAN ID (1 .. 4094)
• [初期値 ] : VLAN 登録番号と同じ値
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
VLAN登録番号に対して VLAN ID を設定する。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830コマンドリファレンス  | L2MS | 649

48.3.4.2 ポートの VLAN動作モードの設定
[書式 ]
switch  control  function  set vlan-port-mode  port mode
no switch  control  function  set vlan-port-mode  port
switch  control  function  get vlan-port-mode  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•mode  : VLAN 動作モード
• [設定値 ] :
設定値 説明
access アクセスポート
trunk トランクポート
hybrid ハイブリッドポート
• [初期値 ] : access
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
ポートの VLAN動作モードを設定する。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.4.3 アクセスポートの設定
[書式 ]
switch  control  function  set vlan-access  port vlan_register_num
no switch  control  function  set vlan-access  port
switch  control  function  get vlan-access  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•vlan_register_num
• [設定値 ] : VLAN 登録番号  (1 .. 256)
• [初期値 ] : 1
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
vlan-port-mode がaccessまたは hybridであるポートについて、ポートの VLAN ID を設定する。 VLAN ID はVLAN
登録番号を用いて指定する。
[ノート ]
vlan-port-mode がtrunkであるポートにおいて、本機能の設定を変更しても動作に影響はない。650 | コマンドリファレンス  | L2MS

[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.4.4 トランクポートの設定
[書式 ]
switch  control  function  set vlan-trunk  port vlan_register_num  mode
no switch  control  function  set vlan-trunk  port vlan_register_num
switch  control  function  get vlan-trunk  port vlan_register_num  [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•vlan_register_num
• [設定値 ] : VLAN 登録番号  (1 .. 256)
• [初期値 ] : -
•mode
• [設定値 ] :
設定値 説明
join 参加する
leave 参加しない
• [初期値 ] : leave
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
vlan-port-mode がtrunkもしくは hybridであるポートにおいて、参加する VLAN ID を設定する。 VLAN ID はVLAN
登録番号を用いて指定する。
[ノート ]
vlan-port-mode がaccessであるポートにおいて、本機能の設定を変更しても動作に影響はない。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.4.5 マルチプル VLANを使用するか否かの設定
[書式 ]
switch  control  function  set vlan-multiple-use  mode
no switch  control  function  set vlan-multiple-use
switch  control  function  get vlan-multiple-use  [switch ]
[設定値及び初期値 ]
•mode
• [設定値 ] :
設定値 説明
on 使用する
off 使用しない
• [初期値 ] : off
•switch  : スイッチ
• [設定値 ] :
• MAC アドレスコマンドリファレンス  | L2MS | 651

•経路
• [初期値 ] : -
[説明 ]
マルチプル VLANを使用するか否かを設定する。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.4.6 マルチプル VLANのグループ設定
[書式 ]
switch  control  function  set vlan-multiple  port group_num  mode
no switch  control  function  set vlan-multiple  port group_num
switch  control  function  get vlan-multiple  port group_num  [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•group_num  : グループ番号
• [設定値 ] :
機種 範囲
SWX2200-24G 1 .. 24
SWX2200-8G 、SWX2200-8PoE 1 .. 8
• [初期値 ] : -
•mode
• [設定値 ] :
設定値 説明
join 参加する
leave 参加しない
• [初期値 ] : leave
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
ポートが所属するマルチプル VLANのグループ番号を設定する。
[ノート ]
vlan-multiple-use がoffの場合、本機能の設定を変更しても動作に影響はない。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.5 QoS
DSCPリマーキングは、 IPヘッダの DSフィールド中の 6ビットの DSCP値を書き換える機能です。書き換える値
は、パケットを受信したポートのクラス  (qos-dscp-remark-class ) と送信するポートの書き換え方式  (qos-dscp-
remark-type ) により決定されます。具体的には以下のようになります。652 | コマンドリファレンス  | L2MS

qos-dscp-remark-type qos-dscp-remark-class DSCP値 PHB
afclass1 001100 AF12
class2 010100 AF22
class3 011100 AF32
class4 100100 AF42
csclass1 000000 default
class2 001000
Class Selector class3 010000
class4 011000
48.3.5.1 DSCP リマーキングの書き換え方式の設定
[書式 ]
switch  control  function  set qos-dscp-remark-type  port type
no switch  control  function  set qos-dscp-remark-type  port
switch  control  function  get qos-dscp-remark-type  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•type : 書き換え方式
• [設定値 ] :
設定値 説明
off 書き換えを行わない
af AF (Assured Forwarding) で書き換えを行う
cs CS (Class Selector) で書き換えを行う
• [初期値 ] : off
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
スイッチから送信する IPパケットの DSCP値を書き換える際の方式を設定する。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.5.2 受信パケットのクラス分けの設定
[書式 ]
switch  control  function  set qos-dscp-remark-class  port class
no switch  control  function  set qos-dscp-remark-class  port
switch  control  function  get qos-dscp-remark-class  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•class
• [設定値 ] :コマンドリファレンス  | L2MS | 653

設定値 説明
off 分類しない
class1 クラス 1に分類する
class2 クラス 2に分類する
class3 クラス 3に分類する
class4 クラス 4に分類する
• [初期値 ] : off
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
DSCPリマーキングにおいて、スイッチが受信したパケットのクラス分けを行う。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.5.3 帯域制限を行う際の速度単位の設定
[書式 ]
switch  control  function  set qos-speed-unit  unit
no switch  control  function  set qos-speed-unit
switch  control  function  get qos-speed-unit  [switch ]
[設定値及び初期値 ]
•unit : 速度単位
• [設定値 ] :
• 128k
• 1m
• 10m
• 32m
• [初期値 ] : 32m
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
受信トラフィックのポリシングおよび送信トラフィックのシェーピングを行う際の速度単位を設定する。
[ノート ]
SWX2200-24G でのみ使用可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.5.4 受信トラフィックのポリシングを行うか否かの設定
[書式 ]
switch  control  function  set qos-policing-use  port mode
no switch  control  function  set qos-policing-use  port
switch  control  function  get qos-policing-use  port [switch ]
[設定値及び初期値 ]
•port654 | コマンドリファレンス  | L2MS

• [設定値 ] : ポート番号
• [初期値 ] : -
•mode
• [設定値 ] :
設定値 説明
on 行う
off 行わない
• [初期値 ] : off
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
受信トラフィックのポリシングを行うか否かを設定する。
[ノート ]
SWX2200-24G でのみ使用可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.5.5 受信トラフィックの帯域幅の設定
[書式 ]
switch  control  function  set qos-policing-speed  port level
no switch  control  function  set qos-policing-speed  port
switch  control  function  get qos-policing-speed  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•level
• [設定値 ] : 帯域幅  (1 .. 31)
• [初期値 ] : 1
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
受信トラフィックのポリシングを行う際の帯域幅を設定する。 qos-speed-unit の設定値に levelを掛けた値が実際の
帯域幅となる。
[ノート ]
SWX2200-24G でのみ使用可能。
qos-policing-use がoffの場合、本機能の設定を変更しても動作に影響はない。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.5.6 送信トラフィックのシェーピングを行うか否かの設定
[書式 ]
switch  control  function  set qos-shaping-use  port mode
no switch  control  function  set qos-shaping-use  portコマンドリファレンス  | L2MS | 655

switch  control  function  get qos-shaping-use  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•mode
• [設定値 ] :
設定値 説明
on 行う
off 行わない
• [初期値 ] : off
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
送信トラフィックのシェーピングを行うか否かを設定する。
[ノート ]
SWX2200-24G でのみ使用可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.5.7 送信トラフィックの帯域幅の設定
[書式 ]
switch  control  function  set qos-shaping-speed  port level
no switch  control  function  set qos-shaping-speed  port
switch  control  function  get qos-shaping-speed  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•level
• [設定値 ] : 帯域幅  (1 .. 31)
• [初期値 ] : 1
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
送信トラフィックのシェーピングを行う際の帯域幅を設定する。 qos-speed-unit の設定値に levelを掛けた値が実際
の帯域幅となる。
[ノート ]
SWX2200-24G でのみ使用可能。
qos-shaping-use がoffの場合、本機能の設定を変更しても動作に影響はない。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830656 | コマンドリファレンス  | L2MS

48.3.6 ミラーリング
ミラーリングは、特定ポートでの通信を他のポートで観測できる機能です。
ミラーリングとポートブロッキング機能 (port-blocking-control-packet および port-blocking-data-packet) は併用できませ
ん。
ミラーリングとポート VLAN/タグ VLAN、マルチプル VLANを併用する場合、ミラーリングを行うポート
(mirroring-src-rx および mirroring-src-tx ) とミラーリングパケットを送出するポート  (mirroring-dest ) が同一の
VLAN、グループ番号に所属するようにしてください。
ミラーリングパケットと元のパケットで VLANタグの有無に違いが生じることがあります。ミラーリングパケット
にVLANタグが付くか否かは、ミラーリングパケットを送出するポートの VLAN動作モードに依存します。例えば
以下の設定があるとします。
•ポート 1はアクセスポートで VLAN ID=100
•ポート 2はアクセスポートで VLAN ID=200
•ポート 3はハイブリッドポートで、アクセスポートの VLAN ID=100 、タグ VLANでVLAN ID=200 に参加。
•ポート 1とポート 2で受信したパケットをポート 3でミラーリングする。
switch control function set vlan-port-mode 3 hybrid
switch control function set vlan-access 1 100
switch control function set vlan-access 2 200
switch control function set vlan-access 3 100
switch control function set vlan-trunk 3 200 join
switch control function set mirroring-use on
switch control function set mirroring-dest 3
switch control function set mirroring-src-rx 1 on
switch control function set mirroring-src-rx 2 on
•ポート 1で受信したパケットをポート 3でミラーリングする場合、パケットに VLANタグは付加されません。
•ポート 2で受信したパケットをポート 3でミラーリングする場合、パケットに VLAN ID=200 のVLANタグが付
加されます。
48.3.6.1 ミラーリング機能を使用するか否かの設定
[書式 ]
switch  control  function  set mirroring-use  mode
no switch  control  function  set mirroring-use
switch  control  function  get mirroring-use  [switch ]
[設定値及び初期値 ]
•mode
• [設定値 ] :コマンドリファレンス  | L2MS | 657

設定値 説明
on 使用する
off 使用しない
• [初期値 ] : off
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
ミラーリング機能を使用するか否かを設定する。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.6.2 ミラーリングパケットを送出するポートの設定
[書式 ]
switch  control  function  set mirroring-dest  port
no switch  control  function  set mirroring-dest
switch  control  function  get mirroring-dest  [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ミラーリングパケットを送出するポート番号
• [初期値 ] :
機種 ポート番号
SWX2200-24G 24
SWX2200-8G 、SWX2200-8PoE 8
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
ミラーリングパケットを送出するポートを設定する。
[ノート ]
mirroring-use がoffの場合、本機能の設定を変更しても動作に影響はない。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.6.3 受信したパケットをミラーリングするか否かの設定
[書式 ]
switch  control  function  set mirroring-src-rx  port mode
no switch  control  function  set mirroring-src-rx  port
switch  control  function  get mirroring-src-rx  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•mode
• [設定値 ] :658 | コマンドリファレンス  | L2MS

設定値 説明
on 受信したパケットをミラーリングする
off 受信したパケットをミラーリングしない
• [初期値 ] : off
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
受信したパケットをミラーリングするか否かを設定する。
[ノート ]
mirroring-dest に設定しているポートにおいて当機能を onにしても、ミラーリングは行われない。
mirroring-use がoffの場合、本機能の設定を変更しても動作に影響はない。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.6.4 送信するパケットをミラーリングするか否かの設定
[書式 ]
switch  control  function  set mirroring-src-tx  port mode
no switch  control  function  set mirroring-src-tx  port
switch  control  function  get mirroring-src-tx  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•mode
• [設定値 ] :
設定値 説明
on 送信するパケットをミラーリングする
off 送信するパケットをミラーリングしない
• [初期値 ] : off
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
送信するパケットをミラーリングするか否かを設定する。
[ノート ]
mirroring-dest に設定しているポートにおいて当機能を onにしても、ミラーリングは行われない。
mirroring-use がoffの場合、本機能の設定を変更しても動作に影響はない。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.7 カウンタ
ポートごとにフレームカウンタとオクテットカウンタがあり、それぞれ受信と送信で個別にカウントすることがで
きます。フレームカウンタでは同時に複数の種類のパケットをカウントすることができます。コマンドリファレンス  | L2MS | 659

フレームカウンタを使用する場合、事前に counter-frame-rx-type または counter-frame-tx-type でカウントするパケ
ットの種類を設定します。カウンタの値は status-counter-frame-rx または status-counter-frame-tx で取得します。
オクテットカウンタの値は status-counter-octet-rx または status-counter-octet-tx で取得します。
フレームカウンタでカウントするパケットの種類のうち class-0〜class-3はDSCPリマーキングによるクラス分け
(qos-dscp-remark-class ) に対応しています。対応関係は以下の通りです。
DSCPによるクラス分け 送信キューまたは受信キューのクラス
class1 class-0
class2 class-1
class3 class-2
class4
class-3
クラス分け無し  (off)
スイッチで受信したパケットを送信するとき、受信キューと送信キューのクラスは常に同一となります。
48.3.7.1 受信フレームカウンタでカウントするフレームの種類の設定
[書式 ]
switch  control  function  set counter-frame-rx-type  port counter  type
no switch  control  function  set counter-frame-rx-type  port counter
switch  control  function  get counter-frame-rx-type  port counter  [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•counter  : カウンタ番号
• [設定値 ] :
機種 範囲
SWX2200-24G 1 .. 5
SWX2200-8G 、SWX2200-8PoE 1 .. 3
• [初期値 ] : -
•type : カウントするパケットの種類
• [設定値 ] :
設定値 説明
packets 全てのパケット
broadcast-and-multicast-packets ブロードキャストパケットとマルチキャストパケッ
ト
total-error-packets CRCエラー、アライメントエラー、フレームサイズ
エラーを含むパケット
broadcast-packets ブロードキャストパケット
multicast-packets マルチキャストパケット
packets-64-octets 64オクテットのパケット
packets-65-to-127-octets 65～127オクテットのパケット
packets-128-to-255-octets 128～255オクテットのパケット
packets-256-to-511-octets 256～511オクテットのパケット
packets-512-to-1023-octets 512～1023オクテットのパケット
packets-1024-to-1526-octets 1024～1526オクテットのパケット
pause PAUSEパケット660 | コマンドリファレンス  | L2MS

設定値 説明
fifo-drops 受信バッファのオーバーフローで破棄されたパケッ
ト
total-good-packets 正常に受信したパケット
class-0 受信キュー class-0に振り分けられたパケット
class-1 受信キュー class-1に振り分けられたパケット
class-2 受信キュー class-2に振り分けられたパケット
class-3 受信キュー class-3に振り分けられたパケット
backward-drops バッファが輻輳しているために破棄されたパケット
classifier-drops 送信元もしくは送信先 MACアドレスが
00:00:00:00:00:00 のパケット、アクセスポートで受信
した VLANタグ付きパケット  、トランクポートで受
信した VLANタグ無しパケット
crc-align-errors CRCエラー、アライメントエラー、物理層でのエラ
ーを検出したパケット
under-size-packets 64バイト未満で CRCは正常であるパケット
over-size-packets 1519バイト以上  (VLANタグ無し ) もしくは 1523バ
イト以上  (VLANタグ付き ) でCRCは正常であるパ
ケット
fragments 64バイト未満で CRCが異常であるパケット
jabbers 1519バイト以上  (VLANタグ無し ) もしくは 1523バ
イト以上  (VLANタグ付き ) でCRCが異常であるパ
ケット
control-packets イーサネットタイプが 0x8808であるパケット
• [初期値 ] :
機種 カウンタ番号 種類
SWX2200-24G1 packets
2 total-good-packets
3 total-error-packets
4 fifo-drops
5 crc-align-errors
SWX2200-8G 、SWX2200-8PoE1 packets
2 total-good-packets
3 total-error-packets
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
受信フレームカウンタでカウントするフレームの種類を設定する。カウンタの値は status-counter-frame-rx で取得
する。
[ノート ]
本機能の設定を変更すると、当該ポートにおけるすべてのカウンタ  (送信、受信、フレーム、オクテット ) がリセッ
トされる。コマンドリファレンス  | L2MS | 661

[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.7.2 送信フレームカウンタでカウントするフレームの種類の設定
[書式 ]
switch  control  function  set counter-frame-tx-type  port counter  type
no switch  control  function  set counter-frame-tx-type  port counter
switch  control  function  get counter-frame-tx-type  port counter  [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•counter  : カウンタ番号
• [設定値 ] :
機種 範囲
SWX2200-24G 1 .. 5
SWX2200-8G 、SWX2200-8PoE 1 .. 3
• [初期値 ] : -
•type : カウントするパケットの種類
• [設定値 ] :
設定値 説明
packets 全てのパケット
broadcast-and-multicast-packets ブロードキャストパケットとマルチキャストパケッ
ト
total-error-packets パケットの送信時にエラーが発生して送信を中断し
た回数
broadcast-packets ブロードキャストパケット
multicast-packets マルチキャストパケット
packets-64-octets 64オクテットのパケット
packets-65-to-127-octets 65～127オクテットのパケット
packets-128-to-255-octets 128～255オクテットのパケット
packets-256-to-511-octets 256～511オクテットのパケット
packets-512-to-1023-octets 512～1023オクテットのパケット
packets-1024-to-1526-octets 1024～1526オクテットのパケット
pause PAUSEパケット
fifo-drops 送信バッファのオーバーフローで破棄されたパケッ
ト
total-good-packets 正常に送信されたパケット
class-0 送信キュー class-0から送信されたパケット
class-1 送信キュー class-1から送信されたパケット
class-2 送信キュー class-2から送信されたパケット
class-3 送信キュー class-3から送信されたパケット
drops コリジョンの多発、レイトコリジョン、送信バッファ
への長時間滞留のいずれかの理由により破棄された
パケット662 | コマンドリファレンス  | L2MS

設定値 説明
collisions コリジョンが発生した回数
cfi-drop CFIビットが 1であるために破棄したパケット  (CFI
ビットが 1であるパケットを受信し、 当該パケットを
タグ無しで送信しようとした場合は破棄される )
• [初期値 ] :
機種 カウンタ番号 種類
SWX2200-24G1 packets
2 total-good-packets
3 total-error-packets
4 fifo-drops
5 collisions
SWX2200-8G 、SWX2200-8PoE1 packets
2 total-good-packets
3 total-error-packets
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
送信フレームカウンタでカウントするフレームの種類を設定する。カウンタの値は status-counter-frame-tx で取得
する。
[ノート ]
本機能の設定を変更すると、当該ポートにおけるすべてのカウンタ  (送信、受信、フレーム、オクテット ) がリセッ
トされる。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.7.3 受信フレームカウンタの値の取得
[書式 ]
switch  control  function  get status-counter-frame-rx  port counter  [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•counter  : カウンタ番号
• [設定値 ] :
機種 範囲
SWX2200-24G 1 .. 5
SWX2200-8G 、SWX2200-8PoE 1 .. 3
• [初期値 ] : -
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -コマンドリファレンス  | L2MS | 663

[説明 ]
受信フレームカウンタの値を取得する。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.7.4 送信フレームカウンタの値の取得
[書式 ]
switch  control  function  get status-counter-frame-tx  port counter  [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•counter  : カウンタ番号
• [設定値 ] :
機種 範囲
SWX2200-24G 1 .. 5
SWX2200-8G 、SWX2200-8PoE 1 .. 3
• [初期値 ] : -
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
送信フレームカウンタの値を取得する。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.7.5 受信オクテットカウンタの値の取得
[書式 ]
switch  control  function  get status-counter-octet-rx  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
受信オクテットカウンタの値を取得する。当カウンタは counter-frame-rx-type の設定によらず、受信したすべての
パケットについてオクテット数をカウントする。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.7.6 送信オクテットカウンタの値の取得
[書式 ]
switch  control  function  get status-counter-octet-tx  port [switch ]664 | コマンドリファレンス  | L2MS

[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
送信オクテットカウンタの値を取得する。当カウンタは counter-frame-tx-type の設定によらず、送信したすべての
パケットについてオクテット数をカウントする。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.7.7 カウンタのクリア
[書式 ]
switch  control  function  execute  clear-counter  [switch ]
[設定値及び初期値 ]
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
全てのカウンタ  (全ポート、送信、受信、フレーム、オクテット ) をクリアする。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.8 ループ検出
ヤマハスイッチは、 MACアドレスの移動を監視する方法と  L2MS パケットを監視する方法の 2種類の方法でネット
ワークのループを検出します。
MACアドレスの移動とは、同一の MACアドレスが異なるポートにおいて学習されることです。スイッチは、 1秒
あたりの MACアドレス移動回数を監視しています。移動回数が loopdetect-count で指定した閾値を超えている状
態が、 loopdetect-time で設定した時間継続した場合にループが発生したと判断します。
L2MS パケットを監視する方法では、 スイッチ自身が送信した制御パケットを受信した回数を監視しています。自身
が送信した制御パケットを受信した回数が loopdetect-count で指定した閾値を越えている状態が、 loopdetect-time で
設定した時間継続した場合にループが発生したと判断します。
どちらの方法で検出した場合でも、ループが発生したポートでは LEDが橙色で点灯します。
ループ検出機能を使用するポートでは、 loopdetect-port-use をonに設定します。
ループ発生後の動作は loopdetect-linkdown で設定します。 loopdetect-linkdown がlinkdown または linkdown-recovery
の場合、ループが発生しているポートのうち番号の大きいものから順に、ループが停止するまでリンクダウンして
いきます。ループ発生時にもルーターと通信できるようにしておくため、アップリンクポートはポート 1を使用す
ることが推奨されます。
なお、ループの発生によってリンクダウンしたポートの LEDは橙色で点滅します。
48.3.8.1 1 秒あたりのループが発生したと判断する閾値の設定
[書式 ]
switch  control  function  set loopdetect-count  count
no switch  control  function  set loopdetect-count  count
switch  control  function  get loopdetect-count  [switch ]コマンドリファレンス  | L2MS | 665

[設定値及び初期値 ]
•count
• [設定値 ] : 1秒あたりのループが発生したと判断する閾値  (3 .. 65535)
• [初期値 ] : 3
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
1秒あたりのループが発生したと判断する閾値を設定する。 MACアドレス移動回数またはスイッチ自身が送信した
制御パケットを受信した回数が本機能で設定した閾値を越えた状態が、 loopdetect-time で設定した時間継続した場合
にループが発生したと判断する。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.8.2 ループが発生したと判断するまでの時間の設定
[書式 ]
switch  control  function  set loopdetect-time  time
no switch  control  function  set loopdetect-time
switch  control  function  get loopdetect-time  [switch ]
[設定値及び初期値 ]
•time
• [設定値 ] : 秒数  (2 .. 60)
• [初期値 ] : 3
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
1秒あたりの MACアドレス移動回数またはスイッチ自身が送信した制御パケットを受信した回数が loopdetect-
countで設定した閾値以上である状態が継続し、ループが発生したと判断するまでの時間を設定する。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.8.3 ループ発生時の動作の設定
[書式 ]
switch  control  function  set loopdetect-linkdown  action
no switch  control  function  set loopdetect-linkdown
switch  control  function  get loopdetect-linkdown  [switch ]
[設定値及び初期値 ]
•action
• [設定値 ] :
設定値 説明
none 何も行わない
linkdown ループが発生したポートをリンクダウンする
linkdown-recovery ループが発生したポートをリンクダウンした後、 一定
時間経過後に復帰させる
• [初期値 ] : none
•switch  : スイッチ666 | コマンドリファレンス  | L2MS

• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
ループ発生時の動作を設定する。
actionがlinkdown または linkdown-recovery の場合、 ループが発生しているポートのうち番号の大きいものから順に、
ループが停止するまでリンクダウンしていく。リンクダウンしたポートを復帰させるには reset-loopdetect を実行す
るか、 MODEボタンを押下する。
actionがlinkdown-recovery の場合、ポートをリンクダウンしてから loopdetect-recovery-timer で設定した時間経過後
に自動的に復帰させる。
[ノート ]
loopdetect-port-use がoffに設定されているポートでは、実際にループが発生してもそのことを検出しないため、当
機能で設定された動作は行わない。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.8.4 ポートをリンクダウンしてから復帰させるまでの時間の設定
[書式 ]
switch  control  function  set loopdetect-recovery-timer  time
no switch  control  function  set loopdetect-recovery-timer
switch  control  function  get loopdetect-recovery-timer  [switch ]
[設定値及び初期値 ]
•time
• [設定値 ] : 秒数  (1 .. 86400)
• [初期値 ] : 300
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
loopdetect-linkdown の設定が linkdown-recovery の場合に、リンクダウンしてから復帰させるまでの時間を設定する。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.8.5 ループ検出機能を使用するか否かの設定
[書式 ]
switch  control  function  set loopdetect-port-use  port mode
no switch  control  function  set loopdetect-port-use  port
switch  control  function  get loopdetect-port-use  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•mode
• [設定値 ] :
設定値 説明
on 使用する
off 使用しないコマンドリファレンス  | L2MS | 667

• [初期値 ] : on
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
ループ検出機能を使用するか否かを設定する。当機能が onに設定されているポートと offに設定されているポート
でループが発生した場合は、 onに設定されているポートでループを検出する。 offに設定されているポートのみでル
ープが発生した場合は、検出しない。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.8.6 L2MS パケットを用いたループ検出を行うか否かの設定
[書式 ]
switch  control  function  set loopdetect-use-control-packet  mode
no switch  control  function  set loopdetect-use-control-packet
switch  control  function  get loopdetect-use-control-packet  [switch ]
[設定値及び初期値 ]
•mode
• [設定値 ] :
設定値 説明
on 制御パケットによるループ検出を行う
off 制御パケットによるループ検出を行わない
• [初期値 ] : on
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
L2MS パケットを用いたループ検出を行うか否かを設定する。本機能を onに設定すると、スイッチ自身が送信した
制御パケットを受信した場合にループが発生したと判断する。
[ノート ]
スイッチ配下のハブやスイッチにて輻輳等が発生し、制御パケットが転送されない場合は、ループを検出できない
ことがある
ヤマハスイッチに本機能が実装されていない場合はコマンドエラーとなる。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.8.7 ループ検出機能に関するポートの状態の取得
[書式 ]
switch  control  function  get status-loopdetect-port  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス668 | コマンドリファレンス  | L2MS

•経路
• [初期値 ] : -
[説明 ]
ループ検出機能に関するポートの状態を取得する。
状態 説明
normal 正常
loopdetect ループが発生している
linkdown ループが発生したため、リンクダウンした
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.8.8 リンクダウンしている状態から復帰するまでの残り時間の取得
[書式 ]
switch  control  function  get status-loopdetect-recovery-timer  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
ループ発生によってリンクダウンしている状態から復帰するまでの残り時間を取得する。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.8.9 ループ発生によってリンクダウンしているポートの復帰
[書式 ]
switch  control  function  execute  reset-loopdetect  [switch ]
[設定値及び初期値 ]
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
ループ発生によってリンクダウンしている全てのポートを復帰させる。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.9 PoE 給電
48.3.9.1 各ポートで給電可能なクラスの上限の設定
[書式 ]
switch  control  function  set poe-class  port class
no switch  control  function  set poe-class  port class
switch  control  function  get poe-class  port [switch ]コマンドリファレンス  | L2MS | 669

[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•class
• [設定値 ] :
設定値 説明
none 給電しない
class3 15.4Wまでの機器まで給電する
class4 30Wまでの機器まで給電する
• [初期値 ] :
• class4(1 、3、5、7ポート )
• class3(2 、4、6、8ポート )
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
各ポート毎に給電する上限を設定する。スイッチの上段ポート (1、3、5、7ポート )は、クラス 4(30W)を上限に設定
できる。下段ポート (2、4、6、8ポート )はクラス 3(15.4W) が上限となる。給電は上下のポートを対として、上段の
ポートにクラス 4(30W)の機器を接続すると、その直下に位置するポートへの給電を停止する。
[ノート ]
SWX2200-8PoE でのみ使用可能。
設定したクラス以上の機器を接続した場合、実際に使用する電力が設定したクラス以下であっても給電は行われな
い。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.9.2 各ポートの給電状態の取得
[書式 ]
switch  control  function  get status-poe-state  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
状態 説明 備考
none 給電していない -
terminate 給電停止 -
supply-class0, supply-class1, supply-
class2, supply-class3, supply-class4給電中 (給電中のクラス ) -
overcurrent 過電流による給電停止 -670 | コマンドリファレンス  | L2MS

状態 説明 備考
class-failure電力クラス設定より大きなクラスを
認識したことによる給電停止SWX2200-8PoE でのみ発生
over-supply供給電力が最大給電能力を超えたこ
とによる給電停止-
over-temperature内部温度が 60℃を超えたことによる
給電停止SWX2200-8PoE でのみ発生
fan-lock ファン停止による給電停止 SWX2200-8PoE でのみ発生
forced-terminateClass3(15.4W) を給電していたポート
にClass4(30W) 給電が給電されたこ
とによる給電停止SWX2200-8PoE でのみ発生
power-failure 電源故障による給電停止 -
[ノート ]
SWX2200-8PoE 、SWX2100-10PoE 、SWX2100-5PoE で使用可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.9.3 各ポートに接続された機器のクラスの取得
[書式 ]
switch  control  function  get status-poe-detect-class  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
ポートに接続された機器のクラスを取得する。
[ノート ]
SWX2200-8PoE 、SWX2100-10PoE 、SWX2100-5PoE でのみ使用可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.9.4 スイッチの内部温度の取得
[書式 ]
switch  control  function  get status-poe-temperature  [switch ]
[設定値及び初期値 ]
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
スイッチの内部温度を取得する。
[ノート ]
SWX2200-8PoE でのみ使用可能。コマンドリファレンス  | L2MS | 671

[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.9.5 各ポートの供給電力の取得
[書式 ]
switch  control  function  get status-poe-supply  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
各ポートの現在の供給電力を取得する。
[ノート ]
SWX2200-8PoE 、SWX2100-10PoE 、SWX2100-5PoE で使用可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.9.6 各ポートの詳細な供給電力の取得
[書式 ]
switch  control  function  get status-poe-supply-detail  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
各ポートの詳細な現在の供給電力を取得する。
[ノート ]
SWX2100-10PoE 、SWX2100-5PoE で使用可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.9.7 スイッチの総供給電力の取得
[書式 ]
switch  control  function  get status-poe-supply-total  [switch ]
[設定値及び初期値 ]
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -672 | コマンドリファレンス  | L2MS

[説明 ]
スイッチの総供給電力を取得する。単位は W（ワット） 。
[ノート ]
SWX2100-10PoE 、SWX2100-5PoE で使用可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.9.8 給電復帰
[書式 ]
switch  control  function  execute  restart-poe-supply  [switch ]
[設定値及び初期値 ]
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
給電を復帰させる。なお、何らかの異常により給電を停止している場合には、電源異常による給電停止の場合は、
本コマンドでの給電復帰はできない。
[ノート ]
SWX2200-8PoE でのみ使用可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.9.9 各ポートへの給電を開始
[書式 ]
switch  control  function  execute  start-poe-supply  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -
•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
各ポートへの給電を開始する。
[ノート ]
SWX2100-10PoE 、SWX2100-5PoE で使用可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.3.9.10 各ポートへの給電を停止
[書式 ]
switch  control  function  execute  stop-poe-supply  port [switch ]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号
• [初期値 ] : -コマンドリファレンス  | L2MS | 673

•switch  : スイッチ
• [設定値 ] :
• MAC アドレス
•経路
• [初期値 ] : -
[説明 ]
各ポートへの給電を停止する。
[ノート ]
SWX2100-10PoE 、SWX2100-5PoE で使用可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.4 アクセスポイントの制御
48.4.1 アクセスポイントの選択
[書式 ]
ap select  ap
no ap select
[設定値及び初期値 ]
•ap
• [設定値 ] :
設定値 説明
MACアドレスもしくは経路 アクセスポイントを選択する
none アクセスポイントを選択しない
• [初期値 ] : -
[説明 ]
対象とするアクセスポイントを選択する。以降プロンプトには console prompt で設定した文字列と apパラメータに
より選択したアクセスポイントが続けて表示される。
ap select  noneまたは no ap select を実行すると、プロンプトにアクセスポイントが表示されなくなる。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.4.2 アクセスポイントの設定ファイルを格納するディレクトリの指定
[書式 ]
ap config  directory  path
no ap config  directory  [path]
[設定値及び初期値 ]
•path
• [設定値 ] : 相対パスまたは絶対パス  (半角  256 文字以下、全角  128 文字以下 )
• [初期値 ] : /ap_config
[説明 ]
アクセスポイントの設定ファイル (config)を格納するディレクトリを指定する。
相対パスを指定した場合、環境変数  PWD を起点としたパスと解釈される。
PWD は set コマンドで変更可能であり、初期値は  "/" である。
RTX1210 Rev.14.01.28 以降、 RTX830 Rev.15.02.03 以降、および  Rev.15.04 系以降  では、 path に全角文字を使用できる
が、 path が RTFS 領域を指す場合には、 path にマルチバイト文字を使用することはできない。
上記以外の機種、およびファームウェアでは  path に全角文字を使用できない。674 | コマンドリファレンス  | L2MS

[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.4.3 アクセスポイントの設定を保存するファイル名の指定
[書式 ]
ap config  filename  name
no ap config  filename  [name ]
[設定値及び初期値 ]
•name
• [設定値 ] : config ファイル名  (半角  99 文字以下、全角  49 文字以下 )
• [初期値 ] : -
[説明 ]
アクセスポイントの設定を保存するファイル名を指定する。
このコマンドが省略された場合は、 ap select で指定された文字列に  .conf を付けたものをファイル名とする。
ただし  : (コロン ) は _ (アンダースコア )に置き換えられる。
複数の  ap select  コマンドで同じファイル名を指定することができる。
RTX1210 Rev.14.01.28 以降、 RTX830 Rev.15.02.03 以降、および  Rev.15.04 系以降では、 ap config directory  コマンド
で指定したディレクトリが  RTFS 領域である場合は、ファイル名にマルチバイト文字を使用することはできない。
本コマンドを実行する前に  ap select  コマンドでスイッチを指定しておく必要がある。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.4.4 アクセスポイントの設定のバックアップ実行
[書式 ]
ap control  config  get [ap]
ap control  config  get [[interface ] all]
[設定値及び初期値 ]
•ap
• [設定値 ] :
設定値 説明
MACアドレスもしくは経路 選択したアクセスポイントのみ
all 全てのアクセスポイント
• [初期値 ] : -
•interface
• [設定値 ] : LANインタフェース名
• [初期値 ] : -
[説明 ]
アクセスポイントの設定のバックアップ動作を実行する。
ap パラメータを使用した場合は、対象となるアクセスポイントのみバックアップを行う。
all を指定すると、ヤマハルーターが認識している全てのアクセスポイントのコンフィグを保存する。
LANインタフェースを指定すると、 LANインタフェースにつながっているアクセスポイントだけを対象とする。
パラメータを省略した場合は、 all を指定した時と同様になる。
[ノート ]
schedule at コマンドで指定することができる。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830コマンドリファレンス  | L2MS | 675

48.4.5 アクセスポイントの設定の復元実行
[書式 ]
ap control  config  set [ap]
ap control  config  set [[interface ] all]
[設定値及び初期値 ]
•ap
• [設定値 ] :
設定値 説明
MACアドレスもしくは経路 選択したアクセスポイントのみ
all 全てのアクセスポイント
• [初期値 ] : -
•interface
• [設定値 ] : LANインタフェース名
• [初期値 ] : -
[説明 ]
アクセスポイントの設定の復元動作を実行する。
ap パラメータを使用した場合は、対象となるアクセスポイントのみ復元を行う。
all を指定すると、ヤマハルーターが認識している全てのアクセスポイントのコンフィグを復元する。
LANインタフェースを指定すると、 LANインタフェースにつながっているアクセスポイントだけを対象とする。
パラメータを省略した場合は、 all を指定した時と同様になる。
[ノート ]
schedule at コマンドで指定することができる。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.4.6 アクセスポイントの設定の削除
[書式 ]
ap control  config  delete  [ap]
[設定値及び初期値 ]
•ap
• [設定値 ] :
設定値 説明
MACアドレスもしくは経路 選択したアクセスポイントのみ
all 全てのアクセスポイント
• [初期値 ] : -
[説明 ]
アクセスポイントの設定の削除を実行する。
ap パラメータを使用した場合は、対象となるアクセスポイントのみ削除を行う。
ap パラメータを省略した場合は、全てのアクセスポイントの削除を行う。
[ノート ]
schedule at コマンドで指定することができる。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830676 | コマンドリファレンス  | L2MS

48.4.7 アクセスポイント設定のゼロコンフィグ機能を使用するか否かの設定
[書式 ]
ap control  config-auto-set  use use
no ap control  config-auto-set  use [use]
[設定値及び初期値 ]
•use
• [設定値 ] :
設定値 説明
on 使用する
off 使用しない
• [初期値 ] : on
[説明 ]
アクセスポイント設定のゼロコンフィグ機能を使用するか否かを設定する。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.4.8 アクセスポイントの HTTPリビジョンアップ機能の実行
[書式 ]
ap control  firmware  update  go [ap]
[設定値及び初期値 ]
•ap
• [設定値 ] :
設定値 説明
MACアドレスもしくは経路 選択したアクセスポイントのみ
all 全てのアクセスポイント
• [初期値 ] : -
[説明 ]
アクセスポイントに対してファームウェアの更新を要求する。
ap パラメータを省略した場合は、全てのアクセスポイントに対して本コマンドを実行する。
[ノート ]
schedule at コマンドで指定することができる。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.4.9 アクセスポイント制御用の HTTPプロキシの使用
[書式 ]
ap control  http proxy  use use
no ap control  http proxy  use [use]
[設定値及び初期値 ]
•use
• [設定値 ] :
設定値 説明
on 使用する
off 使用しない
• [初期値 ] : onコマンドリファレンス  | L2MS | 677

[説明 ]
アクセスポイント制御用の HTTPプロキシ機能を使用するか否かを設定する。
use を on に設定した場合、ルーター経由でアクセスポイントの GUIにアクセスすることができる。
[ノート ]
L2MS においてルーターの管理下におかれているアクセスポイントに対してのみ、 HTTPプロキシ機能を利用するこ
とができる。
また、アクセスポイントに IPアドレスが割り当てられている必要がある。
アクセスポイント毎に認証情報を入力する必要がなく、ルーターを経由することで、遠隔拠点から VPNや静的 IP
マスカレードなどを使わなくてもアクセスポイントの設定ができる。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.4.10 アクセスポイント制御用の HTTPプロキシのタイムアウト時間の設定
[書式 ]
ap control  http proxy  timeout  time
no ap control  http proxy  timeout  [time]
[設定値及び初期値 ]
•time
• [設定値 ] : タイムアウトの秒数
• [初期値 ] : 60
[説明 ]
アクセスポイント制御用の HTTPプロキシ機能のタイムアウト時間を設定する。
プロキシ経由でアクセスポイントの GUIにアクセスする際、アクセスポイントから指定時間以内に応答がなければ
タイムアウトになる。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
48.5 ルーターの制御
48.5.1 HTTP プロキシー経由での  Web GUI へのアクセスを許可するか否かの設定
[書式 ]
httpd  proxy-access  l2ms  permit  permit
no httpd  proxy-access  l2ms  permit  [permit ]
[設定値及び初期値 ]
•permit
• [設定値 ] :
設定値 説明
on HTTP プロキシー経由での  Web GUI へのアクセスを
許可する
off HTTP プロキシー経由での  Web GUI へのアクセスを
許可しない
• [初期値 ] : off
[説明 ]
HTTP プロキシー経由での  Web GUI へのアクセスを許可するか否かを設定する。 permit  が on である場合は、  マネー
ジャーの  Web GUI から本機の  Web GUI を表示するときに  HTTP プロキシー経由でアクセスする。
[ノート ]
switch  control  mode  コマンドで  mode  に agent が設定されていない場合、本コマンドの設定は反映されない。678 | コマンドリファレンス  | L2MS

RTX1210 は Rev.14.01.20 以降で使用可能。
[適用モデル ]
RTX1220, RTX1210, RTX840, RTX830コマンドリファレンス  | L2MS | 679

