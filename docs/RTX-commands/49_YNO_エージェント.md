# 第49章: YNO エージェント

> 元PDFページ: 680-688

---

第 49 章
YNO エージェント
YNOエージェントは、ヤマハネットワーク機器を「 Yamaha Network Organizer (YNO) 」で遠隔管理するための機能で
す。 YNOエージェント機能を有効にしたヤマハネットワーク機器はインターネット経由で YNOマネージャーへ接
続し、必要に応じて以下の処理を実施します。
•ヤマハネットワーク機器動作状態の YNOマネージャーへの通知
• CONFIG の送信・適用・保存
•ファームウェアの更新
•コマンドの実行
• GUI Forwarder によるヤマハネットワーク機器  GUI の表示
•ゼロコンフィグによる  CONFIG の自動適用
本機能に関する技術情報は以下に示す  URL で公開されています。
https://www.rtpro.yamaha.co.jp/RT/docs/yno/agent/
49.1 YNO エージェント機能を使用するか否かの設定
[書式 ]
yno use sw
no yno use sw
[設定値及び初期値 ]
•sw
• [設定値 ] :
設定値 説明
on 使用する
off 使用しない
• [初期値 ] : off
[説明 ]
YNO エージェント機能を使用するか否かを設定する。
[ノート ]
RTX5000 、RTX3500 は Rev.14.00.26 以降で使用可能。
RTX1210 は Rev.14.01.14 以降で使用可能。
[適用モデル ]
RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
49.2 YNO マネージャー接続用のアクセスコードの設定
[書式 ]
yno access  code  operator_id  access_code
no yno access  code  [operator_id  [access_code ]]
[設定値及び初期値 ]
•operator_id
• [設定値 ] : オペレーター  ID (半角  4 文字以上  かつ  半角  64 文字以内 )
• [初期値 ] : -
•access_code
• [設定値 ] : アクセスコード  (半角  8 文字以上  かつ  半角  64 文字以内 )
• [初期値 ] : -680 | コマンドリファレンス  | YNO エージェント

[説明 ]
YNO エージェント機能が  YNO マネージャーへ接続する際に使用するアクセスコードを設定する。
ヤマハネットワーク機器は  operator_id で指定したオペレーターの管理対象となる。  同一オペレーターが管理する
すべてのヤマハネットワーク機器には、同一のオペレーター  ID およびアクセスコードを設定する必要がある。
yno zero-config id  コマンドが設定されているときは、本コマンドは設定できない。
[ノート ]
YNO マネージャーでアクセスコードを変更すると、管理対象のヤマハネットワーク機器で新しいアクセスコードを
含んだ本コマンドが自動で実行・保存される。
RTX5000 、RTX3500 は Rev.14.00.26 以降で使用可能。
RTX1210 は Rev.14.01.14 以降で使用可能。
[適用モデル ]
RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
49.3 YNO エージェント機能に関する追加の  SYSLOG を出力するか否かの設定
[書式 ]
yno log type [type… ]
no yno log [type… ]
[設定値及び初期値 ]
•type
• [設定値 ] :
設定値 説明
action-read ヤマハネットワーク機器の動作状態や  CONFIG の読
み出しに関する  SYSLOG を出力する
inform YNO マネージャーとの定期通信に関する  SYSLOG
を出力する
• [初期値 ] : -
[説明 ]
YNO エージェント機能に関する追加の  SYSLOG を出力するか否かを設定する。
[ノート ]
RTX5000 、RTX3500 は Rev.14.00.26 以降で使用可能。
RTX1210 は Rev.14.01.14 以降で使用可能。
[適用モデル ]
RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
49.4 YNO マネージャーに表示される自身の機器説明の設定
[書式 ]
description  yno description
no description  yno [description ]
[設定値及び初期値 ]
•description
• [設定値 ] : 説明の文字列  (最大  32 文字 /半角、 16 文字 /全角 )
• [初期値 ] : 空文字列
[説明 ]
YNO マネージャーに表示されるヤマハネットワーク機器の説明を設定する。コマンドリファレンス  | YNO エージェント  | 681

[ノート ]
RTX5000 、RTX3500 は Rev.14.00.26 以降で使用可能。
RTX1210 は Rev.14.01.14 以降で使用可能。
[適用モデル ]
RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
49.5 YNO で使用する HTTPS プロキシサーバーの設定
[書式 ]
yno https-proxy  proxy_server  port
no yno https-proxy  [proxy_server  [port]]
[設定値及び初期値 ]
•proxy_server
• [設定値 ] : HTTPS プロキシサーバーのホスト名、もしくは  IP アドレス
• [初期値 ] : -
•port
• [設定値 ] : HTTPS プロキシサーバーのポート番号  (1..65535)
• [初期値 ] : -
[説明 ]
YNO で使用する  HTTPS プロキシサーバーを設定する。
proxy_server  には、 HTTPS プロキシサーバーの  FQDN 形式のホスト名、または  IP アドレスを  255 文字以内の半角英
数字および半角記号で指定する。
port には、 HTTPS プロキシサーバーのポート番号を指定する。
[ノート ]
ユーザー認証が必要な  HTTPS プロキシサーバーを使用することはできない。
RTX5000 、RTX3500 は Rev.14.00.26 以降で使用可能。
RTX1210 は Rev.14.01.26 以降で使用可能。
RTX830 は Rev.15.02.03 以降で使用可能。
[適用モデル ]
RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
49.6 GUI Forwarder 接続のタイムアウト時間の設定
[書式 ]
yno gui-forwarder  timeout  time
no yno gui-forwarder  timeout  [time]
[設定値及び初期値 ]
•time
• [設定値 ] : 秒数  (3..60)
• [初期値 ] :
• 5 (RTX1210 Rev.14.01.33 以前、 RTX830 Rev.15.02.09 以前 )
• 30 (上記以外 )
[説明 ]
GUI Forwarder 接続のタイムアウト時間を設定する。
本コマンドで設定した時間以内に  GUI Forwarder サーバーからの応答がなかった場合、 GUI Forwarder セッションを
切断する。682 | コマンドリファレンス  | YNO エージェント

[ノート ]
RTX830 は Rev.15.02.03 以降で使用可能。
RTX1210 は Rev.14.01.26 以降で使用可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
49.7 YNO のゼロコンフィグの設定
[書式 ]
yno zero-config  id text operator_id  place_id  [password ]
no yno zero-config  id [text [ operator_id  [place_id  [password ]]]]
[設定値及び初期値 ]
•operator_id
• [設定値 ] : オペレーター  ID (半角  4 文字以上  かつ  半角  64 文字以内 )
• [初期値 ] : -
•place_id
• [設定値 ] : プレース  ID (半角  64 文字以内 )
• [初期値 ] : -
•password
• [設定値 ] : パスワード  (半角  64 文字以内  省略可 )
• [初期値 ] : -
[説明 ]
YNO エージェント機能のゼロコンフィグで使用するプレース  ID やパスワードを設定する。本コマンドが設定され
ると自動で  YNO マネージャーへの接続を試み、接続確立後にゼロコンフィグが作動する。
yno access code  コマンドが設定されているときは、本コマンドは設定できない。
[ノート ]
RTX5000 は Rev.14.00.32 以降で使用可能。
RTX3500 は Rev.14.00.32 以降で使用可能。
RTX1210 は Rev.14.01.32 以降で使用可能。
RTX830 は Rev.15.02.08 以降で使用可能。
[適用モデル ]
RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
49.8 YNO エージェント機能の動作状態の表示
[書式 ]
show  status  yno
[説明 ]
YNO エージェント機能の動作状態を表示する。ファームウェアのリビジョンにより表示内容が異なる。
• [新型式 ]
• CWMP の動作状態
表示 説明
未接続 (設定未完了 )YNOエージェント機能が無効、または設定が不足し
ている
未接続 (起動処理中 )YNOエージェント機能が有効になり、初期化および
ACSへの接続中
未接続 (終了処理中 )YNOエージェント機能が無効になり、 ACSと切断処
理中コマンドリファレンス  | YNO エージェント  | 683

表示 説明
正常 ([セッション確立日時 ])ACSとの接続に成功した (括弧内にはセッションの確
立日時を表示 )
異常 ([理由 ])ACSとの接続に失敗した (括弧内には異常理由を表
示)
ゼロコンフィグ処理中  ([異常理由 ])ACSとの接続に成功し、ゼロコンフィグが動作中 (処
理中に異常が発生した場合は括弧内に異常理由を表
示)
• XMPP の動作状態
表示 説明
未接続 XMPPサーバーに接続していない
接続 XMPPを使用できる
異常 XMPPを使用できない
• GFW の動作状態  (GUI Forwarder 対応ファームウェアのみ )
表示 説明
未接続 GFWサーバーに接続していない
接続 GFWを使用できる
異常 GFWを使用できない
• LASの動作状態  (LAS対応ファームウェアのみ )
表示 説明
未接続 LASサーバーに接続していない
接続 LASを使用できる
異常 LASを使用できない
•ヤマハネットワーク機器を管理しているオペレーターの ID
• [旧型式 ]
• YNO エージェント機能の動作状態
現在の状態 説明
設定未完了YNOエージェント機能が無効、または設定が不足し
ている
起動処理中YNOエージェント機能が有効になり、初期化および
YNOマネージャーへの接続中
終了処理中YNOエージェント機能が無効になり、 YNOマネージ
ャーと切断処理中
正常動作中 YNOマネージャーへの接続に成功した
異常発生 YNOマネージャーへの接続に失敗した
•ヤマハネットワーク機器を管理しているオペレーターの  ID
• YNO マネージャーへのセッション確立日時
• XMPP プロトコルを使用できるか否か
• GUI Forwarder を使用できるか否か  (GUI Forwarder 接続対応ファームウェアのみ )
[ノート ]
以下の機種及びファームウェアでは新型式の内容が、その他では旧型式の内容が表示される。
機種 リビジョン
RTX5000 Rev.14.00.32 以降
RTX3510 すべてのリビジョン684 | コマンドリファレンス  | YNO エージェント

機種 リビジョン
RTX3500 Rev.14.00.32 以降
RTX1300 すべてのリビジョン
RTX1220 すべてのリビジョン
RTX1210 Rev.14.01.28 以降
RTX840 すべてのリビジョン
RTX830 Rev.15.02.03 以降
RTX5000 、RTX3500 は Rev.14.00.26 以降で使用可能。
RTX1210 は Rev.14.01.14 以降で使用可能。
[表示例 ]
• [新形式 ]
> show status yno
CWMP:                正常 (2018/03/14 14:30:21)
XMPP:                正常
GFW:                 正常
LAS:                 正常
オペレーター ID:      dummy_id
> show status yno
CWMP:                異常 (ACSへの接続に失敗しました )
XMPP:                未接続
GFW:                 未接続
LAS:                 未接続
オペレーター ID:      dummy_id
• [旧形式 ]
> show status yno
現在の状態 :          正常動作中
オペレーター ID:      dummy_id
セッション確立日時 :  2016/12/18 11:46:03
XMPP接続:            有効
GFW接続:             有効
[適用モデル ]
RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
49.9 LAS (Log Analysis Service)
49.9.1 SYSLOG 送信キューの長さの設定
[書式 ]
yno las syslog  queue  length  length
no yno las syslog  queue  length
[設定値及び初期値 ]
•length
• [設定値 ] : 長さ
• [設定値 ] :
• 1000..40000 (RTX5000 / RTX3510 / RTX3500 / RTX1300 Rev.23.00.09 以降 )
• 1000..10000 ( 上記以外 )
• [初期値 ] :
• 40000 (RTX5000 / RTX3510 / RTX3500 / RTX1300 Rev.23.00.09 以降 )
• 10000 ( 上記以外 )コマンドリファレンス  | YNO エージェント  | 685

[説明 ]
SYSLOG 送信キュー長の最大値を設定する。現在の送信キュー長より小さい値を設定しても、すでに送信キューに
蓄積されている SYSLOG は破棄されることなく、順次 LASサーバーに送信される。
[ノート ]
RTX5000 は Rev.14.00.32 以降で使用可能。
RTX3500 は Rev.14.00.32 以降で使用可能。
RTX1220 は Rev.15.04.03 以降で使用可能。
RTX1210 は Rev.14.01.40 以降で使用可能。
RTX830 は Rev.15.02.20 以降で使用可能。
[適用モデル ]
RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
49.9.2 LAS クライアントが送信したリクエストに対する LASサーバーからの応答待ちがタイムアウ
トするまでの時間の設定
[書式 ]
yno las request  timeout  seconds
no yno las request  timeout
[設定値及び初期値 ]
•seconds
• [設定値 ] : 秒数  (10..60)
• [初期値 ] : 30
[説明 ]
LASクライアントが送信したリクエストに対する LASサーバーからの応答待ちがタイムアウトするまでの時間を
設定する。
[ノート ]
RTX5000 は Rev.14.00.32 以降で使用可能。
RTX3500 は Rev.14.00.32 以降で使用可能。
RTX1220 は Rev.15.04.03 以降で使用可能。
RTX1210 は Rev.14.01.40 以降で使用可能。
RTX830 は Rev.15.02.20 以降で使用可能。
[適用モデル ]
RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
49.9.3 LAS クライアントがリクエストの送信を再試行する回数の設定
[書式 ]
yno las request  retry  count
no yno las request  retry
[設定値及び初期値 ]
•count
• [設定値 ] : 回数  (0..5)
• [初期値 ] : 3
[説明 ]
LASクライアントがリクエストの送信を再試行する回数を設定する。
[ノート ]
RTX5000 は Rev.14.00.32 以降で使用可能。
RTX3500 は Rev.14.00.32 以降で使用可能。
RTX1220 は Rev.15.04.03 以降で使用可能。686 | コマンドリファレンス  | YNO エージェント

RTX1210 は Rev.14.01.40 以降で使用可能。
RTX830 は Rev.15.02.20 以降で使用可能。
[適用モデル ]
RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
49.9.4 LAS サーバーとのコネクションに対するキープアライブの設定
[書式 ]
yno las connection  keepalive  interval  [timeout= sw]
no yno las connection  keepalive
[設定値及び初期値 ]
•interval
• [設定値 ] :
設定値 説明
off キープアライブをしない
30..300 キープアライブの時間間隔  (秒数 )
• [初期値 ] : 60
•sw
• [設定値 ] :
設定値 説明
on LASサーバーから応答がない場合にコネクションを
切断する
off LASサーバーから応答がなくてもコネクションを切
断しない
• [初期値 ] : off
[説明 ]
YNOマネージャーでリアルタイム表示をしている間、 LASクライアントは LASサーバーとの間でコネクションを
確立した状態となる。コネクションが確立されている間は、 interval  に設定された時間間隔で LASクライアントから
キープアライブパケットが送信される。 sw がonに設定されている場合、 キープアライブパケットが送信されてから
interval  で設定された時間までに LASサーバーから応答がないと、 LASクライアントはコネクションを一旦切断し、
再接続を試みる。
[ノート ]
RTX5000 は Rev.14.00.32 以降で使用可能。
RTX3500 は Rev.14.00.32 以降で使用可能。
RTX1220 は Rev.15.04.03 以降で使用可能。
RTX1210 は Rev.14.01.40 以降で使用可能。
RTX830 は Rev.15.02.20 以降で使用可能。
[適用モデル ]
RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
49.9.5 LAS の動作状態の表示
[書式 ]
show  status  yno las
[説明 ]
LASの動作状態を表示する。
[ノート ]
RTX5000 は Rev.14.00.32 以降で使用可能。
RTX3500 は Rev.14.00.32 以降で使用可能。
RTX1220 は Rev.15.04.03 以降で使用可能。コマンドリファレンス  | YNO エージェント  | 687

RTX1210 は Rev.14.01.40 以降で使用可能。
RTX830 は Rev.15.02.20 以降で使用可能。
[表示例 ]
> show status yno las
機能               : 有効
ログ送信結果        : 成功
SYSLOG 送信速度      : 100 行 / 60秒
SYSLOG 送信キュー長  : 26
[適用モデル ]
RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
49.10 XMPP サーバーとのキープアライブの時間間隔の設定
[書式 ]
yno xmpp  connection  keepalive  interval
no yno xmpp  connection  keepalive  [interval ]
[設定値及び初期値 ]
•interval
• [設定値 ] : キープアライブパケットを送出する時間間隔  (30..300 秒)
• [初期値 ] : 300
[説明 ]
XMPPサーバーとのキープアライブ通信を実施する時間間隔を設定する。
[ノート ]
本コマンドを実行した場合、 YNOマネージャーとの通信が一時的にできなくなる可能性があります。その場合、次
回の XMPPサーバーとのキープアライブ通信の実施時に XMPP接続が再接続され、自動的に復旧されます。
RTX5000 は Rev.14.00.32 以降で使用可能。
RTX3500 は Rev.14.00.32 以降で使用可能。
RTX1210 は Rev.14.01.41 以降で使用可能。
RTX830 は Rev.15.02.22 以降で使用可能。
RTX1220 は Rev.15.04.04 以降で使用可能。
[適用モデル ]
RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830688 | コマンドリファレンス  | YNO エージェント

