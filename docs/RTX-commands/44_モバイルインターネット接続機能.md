# 第44章: モバイルインターネット接続機能

> 元PDFページ: 588-612

---

第 44 章
モバイルインターネット接続機能
携帯端末をルーター本体に接続し、携帯端末から発信してインターネット接続する機能です。
固定回線がなくても本機能に対応した携帯端末があればインターネット接続をすることができます。
本機能は発信のみに対応し、着信での利用はできません。
現時点で対応する携帯端末は  USB で接続するものだけとなります。
この場合、携帯端末を PP(USBモデム )として制御、又は WAN(ネットワークアダプタ )として制御することになりま
す。
本機能をご利用になるには以下の機材等が必要になります。
•対応ルーター
•対応携帯端末
•対応携帯端末のデータ通信に必要なプロバイダ契約  (mopera U 等)
本機能ではパケット通信量およびパケット通信時間の制限が初期値として設定されています。これら上限値に達し
た場合、通信を強制的に切断し、その後発信できなくなります。発信を許可するためには clear mobile access
limitation  コマンドを発行するか、ルーター本体を再起動します。これらの上限値は、 PP(USBモデム )として制御す
る場合には mobile access limit length  および mobile access limit time  コマンドで、 WAN(ネットワークアダプタ )とし
て制御する場合には wan access limit time  および wan access limit length  コマンドで変更することができます。
44.1 携帯端末を使用するか否かの設定
[書式 ]
mobile  use interface  use [first-connect-wait-time= time]
no mobile  use interface  [use]
[設定値及び初期値 ]
•interface
• [設定値 ] :
設定値 説明
usb1 USB1 をモバイルインターネット接続に使用
• [初期値 ] : -
•use
• [設定値 ] :
設定値 説明
on 携帯端末を使用する
off 携帯端末を使用しない
• [初期値 ] : off
•time
• [設定値 ] :
設定値 説明
0-300 携帯端末アタッチ後の発信抑制秒数
• [初期値 ] : 0
[説明 ]
指定のバスに接続された携帯端末をインターネット接続に使用するか否かを設定する。
first-connect-wait-time オプションは、携帯端末のアタッチ後の発信抑制時間を設定し、網への接続を抑制する。
mobile auto connect コマンドや、 wan1 auto connect コマンド、 pp always-on コマンド、 wan1 always-on コマンドで588 | コマンドリファレンス  | モバイルインターネット接続機能

onが設定されている場合の  網への接続要求も、このコマンドで設定された発信抑制秒数のあいだは、発信が抑制さ
れる。
[ノート ]
first-connect-wait-time オプションは、 Rev.14.01 系以降のすべてのファームウェアで指定可能。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.2 携帯端末に入力する PINコードの設定
[書式 ]
mobile  pin code  interface  pin
no mobile  pin code  interface  [pin]
[設定値及び初期値 ]
•interface
• [設定値 ] :
設定値 説明
usb1 USB1 インタフェース
• [初期値 ] : -
•pin
• [設定値 ] : PINコード
• [初期値 ] : -
[説明 ]
USBインタフェースに接続する携帯端末の使用に PINコードを必要とする場合に、用いる PINコードを設定する。
携帯端末が PINコードを必要としない場合には、本コマンドの設定に関係なく携帯端末を使用することができる。
[ノート ]
PINコードを利用する場合は、予め携帯端末の接続ユーティリティ等を使用して SIMカードに PINコードを登録す
る必要がある。ルーターでは SIMカードに PINコードを登録することはできない。
SIMカードに登録された PINコードと本コマンドの設定が一致せず、 3回連続して失敗すると、携帯端末は自動的
にロック (PINロック )される。 PINロックがかかるとルーターでは解除できない。携帯端末の接続ユーティリティ
にて PINロック解除コードを入力する必要がある。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.3 モバイルインターネット接続機能の発信方式の設定
[書式 ]
mobile  call type type
no mobile  call type [type]
[設定値及び初期値 ]
•type
• [設定値 ] :
設定値 説明
1 発信方式 1
2 発信方式 2
• [初期値 ] : 1
[説明 ]
モバイルインターネット接続機能で、発信動作を行うときの方式を設定する。コマンドリファレンス  | モバイルインターネット接続機能  | 589

[ノート ]
モバイルインターネット接続機能で接続失敗する場合、本コマンドの設定値を変更することにより接続できるよう
になる可能性がある。
RTX830 は Rev.15.02.09 以降で使用可能。
RTX1210 は Rev.14.01.33 以降で使用可能。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.4 携帯端末に直接コマンドを発行する
[書式 ]
execute  at-command  interface  command
[設定値及び初期値 ]
•interface
• [設定値 ] :
• usb1
• [初期値 ] : -
•command
• [設定値 ] :
• AT コマンド
• [初期値 ] : -
[説明 ]
指定したインタフェースに接続された携帯端末に対して、 AT コマンドを直接発行する。
以下のコマンドも同様に  AT コマンドを発行するので、本コマンドと併用するときは注意が必要である。
usbhost modem initialize
[ノート ]
特別な理由がない限り本コマンドを使用する必要はない。
[設定例 ]
execute at-command usb1 AT+CGDCONT=<1>,\"IP\",\"mopera.net\"
ダブルクォート  (") を指定するときは \" のように \を付加する必要がある。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.5 指定した相手に対して発信制限を解除する
[書式 ]
clear  mobile  access  limitation  [interface ]
clear  mobile  access  limitation  pp [peer_num ]
[設定値及び初期値 ]
•interface
• [設定値 ] :
設定値 説明
usb1 USB インタフェース
wan1 WAN インタフェース
• [初期値 ] : -
•peer_num
• [設定値 ] :590 | コマンドリファレンス  | モバイルインターネット接続機能

設定値 説明
相手先情報番号 省略時は現在選択している相手先
• [初期値 ] : -
[説明 ]
mobile access limit  コマンドによって発信制限がかかったインタフェースに対し、制限を解除して再び発信できるよ
うにする。
なお、電源の再投入でも発信制限は解除される。
[ノート ]
WAN インタフェースは  Rev.14.01 系以降のファームウェアで指定可能。
[拡張ライセンス対応 ]
拡張ライセンス をインポートすると、以下のパラメーターに入力できる上限値が拡張される。
•peer_num
ライセンス名拡張後の上限値
( ライセンス本数ごとの値  )
1本 2本 3本 4本 5本
YSL-VPN-EX1 100 - - - -
YSL-VPN-EX2 150
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.6 PP で使用するインタフェースの設定
[書式 ]
pp bind  interface
no pp bind  [interface ]
[設定値及び初期値 ]
•interface
• [設定値 ] :
設定値 説明
usb1 usb1 を使用する
• [初期値 ] : -
[説明 ]
選択されている相手について使用するインタフェースを設定する。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.7 携帯端末からの自動発信設定
[書式 ]
mobile  auto  connect  auto
no mobile  auto  connect  [auto]
[設定値及び初期値 ]
•auto
• [設定値 ] :
設定値 説明
on 携帯端末から自動発信するコマンドリファレンス  | モバイルインターネット接続機能  | 591

設定値 説明
off 携帯端末から自動発信しない
• [初期値 ] : off
[説明 ]
選択されている相手について自動接続するか否かを設定する。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.8 携帯端末を切断するタイマの設定
[書式 ]
mobile  disconnect  time  time
no mobile  disconnect  time  [time]
[設定値及び初期値 ]
•time
• [設定値 ] :
設定値 説明
1-21474836 秒数
off タイマを設定しない
• [初期値 ] : 60
[説明 ]
選択されている相手について  PP 側の送受信がない場合の切断までの時間を設定する。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.9 携帯端末を入力がないときに切断するタイマの設定
[書式 ]
mobile  disconnect  input  time  time
no mobile  disconnect  input  time  [time]
[設定値及び初期値 ]
•time
• [設定値 ] :
設定値 説明
1-21474836 秒数
off タイマを設定しない
• [初期値 ] : 120
[説明 ]
選択されている相手について  PP 側からデータ受信がない場合の切断までの時間を設定する。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.10 携帯端末を出力がないときに切断するタイマの設定
[書式 ]
mobile  disconnect  output  time  time
no mobile  disconnect  output  time  [time]
[設定値及び初期値 ]
•time592 | コマンドリファレンス  | モバイルインターネット接続機能

• [設定値 ] :
設定値 説明
1-21474836 秒数
off タイマを設定しない
• [初期値 ] : 120
[説明 ]
選択されている相手について  PP 側へのデータ送信がない場合の切断までの時間を設定する。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.11 発信先アクセスポイントの設定
[書式 ]
mobile  access-point  name  apn cid= cid [pdp= type]
no mobile  access-point  name  [apn cid= cid]
[設定値及び初期値 ]
•apn
• [設定値 ] : パケット通信に対応したアクセスポイント名  (Access Point Name)
• [初期値 ] : -
•cid
• [設定値 ] :
設定値 説明
1-10 CID 番号
• [初期値 ] : -
•type
• [設定値 ] :
設定値 説明
ppp PDP type をPPPとする
ip PDP type をIPとする
• [初期値 ] : -
[説明 ]
選択されている相手についてアクセスポイント名  (APN) と CID 番号、 PDP タイプの割り当てを設定する。  なお
pdp=type を省略すると、通常は  ip となる。
[設定例 ]
mobile access-point name mopera.net cid=3 (mopera U の場合  )
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.12 携帯端末に指示する発信先の設定
[書式 ]
mobile  dial number  dial_string
no mobile  dial number  [dial_string ]
[設定値及び初期値 ]
•dial_string
• [設定値 ] : 発信先を指定する文字列
• [初期値 ] : -コマンドリファレンス  | モバイルインターネット接続機能  | 593

[説明 ]
選択されている相手について、携帯端末に ATDに続いて発行する発信先を設定する。
[ノート ]
設定がない場合、 mobile access-point name  コマンドで設定された  cid 番号  [CID] を使って「 ATD*99***[CID]# 」を発
行する。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.13 パケット通信量制限の設定
[書式 ]
mobile  access  limit  length  length  [alert= alert [,alert_cancel ]]
no mobile  access  limit  length  [length ]
[設定値及び初期値 ]
•length
• [設定値 ] :
設定値 説明
1-9223372036854775807 バイト数、 送受信する累積パケットデータ長の上限値
off 制限しない
• [初期値 ] :
• 50M(RTX1210 Rev.14.01.20 以降、 Rev.15.02 系以降 )
• 200000( 上記以外 )
•alert
• [設定値 ] : 警告値、データ長あるいは [%]指定
• [初期値 ] : -
•alert_cancel
• [設定値 ] : 警告解除値、データ長あるいは [%]指定
• [初期値 ] : -
[説明 ]
選択されている相手について、送受信するパケットの累積データ長の上限値を設定する。
上限に達した場合は通信を強制的に切断し、その後の通信もブロックする。
累積値は、
•clear mobile access limitation  コマンドの発行
•mobile access limit duration  コマンドの再設定
•システムの再起動
でクリアされ、発信制限が解除される。
show status pp  コマンドで、現在までの累積パケットデータ長を確認できる。
alert  で警告値を設定すると、その警告値を上回った時にログに表示することができる。
また mobile access limit duration  コマンドで累積期間を設定している場合には、 alert_cancel  で指定した警告解除値を
下回った時にログに表示することができる。
警告解除値を指定しない場合は、期間累積のデータ長が  0 になるまで警告を解除しない。
[ノート ]
警告値は上限値よりも小さく、警告解除値は警告値よりも小さくなければならない。
携帯端末のパケット通信は  128 バイトごとに課金されるが、ルーターと携帯端末間で送受信されるデータが  128 バ
イト単位である保証はない。
例えばルーターが  512 バイト  (128 バイト ×4) のデータを送受信したとしても、 4 パケット分の通信料金である保証は
なく、携帯網ではそれより多くのパケットに分割されて送受信されている可能性がある。
また、ルーターと携帯端末の間を流れるデータは非同期データであり、データの内容によっては本来のデータより594 | コマンドリファレンス  | モバイルインターネット接続機能

も長くなることがある。
従って、本コマンドで設定するデータ長はあくまで目安にしかならないので注意が必要である。
off を設定したときは警告が表示される。
length , alert , alert_cancel  パラメータへの  2147483647 より大きな値の設定は、 RTX5000 、RTX3500 、RTX1210 、RTX830
Rev.15.02.01 では不可能。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.14 パケット通信時間制限の設定
[書式 ]
mobile  access  limit  time  time [alert= alert [,alert_cancel ]] [unit= unit]
no mobile  access  limit  time  [time]
[設定値及び初期値 ]
•time
• [設定値 ] :
設定値 説明
1-2147483647 累積通信秒数の上限値
off タイマを設定しない
• [初期値 ] : 3600
•alert
• [設定値 ] : 警告値、秒数あるいは [%]指定
• [初期値 ] : -
•alert_cancel
• [設定値 ] : 警告解除値、秒数あるいは [%]指定
• [初期値 ] : -
•unit
• [設定値 ] : 単位、 second 又は  minute
• [初期値 ] : second
[説明 ]
選択されている相手について、累積通信時間の上限値を設定する。
上限に達した場合は通信を強制的に切断し、その後の通信もブロックする。
本コマンドは mobile disconnect time  コマンドとは独立して動作する。
累積値は、
•clear mobile access limitation  コマンドの発行
•mobile access limit duration  コマンドの再設定
•システムの再起動
でクリアされ、発信制限が解除される。
show status pp  コマンドで、現在までの累積通信時間を確認できる。
alert  で警告値を設定すると、その警告値を上回った時にログに表示することができる。
また mobile access limit duration  コマンドで累積期間を設定している場合には、 alert_cancel  で指定した警告解除値を
下回った時にログに表示することができる。
累積通信時間が警告値に達している間は再接続できない。警告解除値を下回ると再接続できる。
警告解除値を指定しない場合は、期間累積の接続時間が  0 になるまで警告を解除しない。
unit で minute を指定すると、接続時間を分単位で算出する。秒単位は切り上げられる。
[ノート ]
警告値は上限値よりも小さく、警告解除値は警告値よりも小さくなければならない。コマンドリファレンス  | モバイルインターネット接続機能  | 595

mobile access limit duration  が設定されている場合、 unit=minute を指定しても、期間内累積時間は、秒単位で加算さ
れる。
off を設定したときは警告が表示される。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.15 同じ発信先に対して連続して認証に失敗できる回数の設定
[書式 ]
mobile  call prohibit  auth-error  count  count
no mobile  call prohibit  auth-error  count  [count ]
[設定値及び初期値 ]
•count
• [設定値 ] :
設定値 説明
1-21474836 連続して認証に失敗できる回数
off 発信制限をかけない
• [初期値 ] : 5
[説明 ]
選択された相手に対して連続して認証に失敗できる回数を指定する。ここで設定した回数だけ連続して認証に失敗
した場合、その後は、その発信先に発信しない。
なお、以下のコマンドを実行すると、再び発信が可能となる。
pp auth accept  / pp auth request  / pp auth myname  / pp auth username  / no pp auth accept  / no pp auth request  / no pp
auth myname  / no pp auth username
また、電源の再投入でも発信制限は解除される。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.16 LCP の Async Control Character Map オプション使用の設定
[書式 ]
ppp lcp accm  accm
no ppp lcp accm  [accm ]
[設定値及び初期値 ]
•accm
• [設定値 ] :
設定値 説明
on 用いる
off 用いない
• [初期値 ] : off
[説明 ]
選択された相手に対して [PPP,LCP] の Async-Control-Character-Map オプションを用いるか否かを設定する。
これを設定することで通信量を減らせることがある。
本設定はモバイルインターネット接続機能でのみ有効である。
[ノート ]
on を設定しても相手に拒否された場合は用いない。また、 Async-Control-Character-Map の値は、自分から送出する場
合も相手から受信する場合も  0x00000000 のみが用いられる。596 | コマンドリファレンス  | モバイルインターネット接続機能

[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.17 発信者番号通知  (186) を付加するかどうかの設定
[書式 ]
mobile  display  caller  id switch
no mobile  display  caller  id [switch ]
[設定値及び初期値 ]
•switch
• [設定値 ] :
設定値 説明
on 発信者番号を通知する  (186 を付加して発信する  )
off 発信者番号を通知しない  (186 を付加せず発信する  )
• [初期値 ] : off
[説明 ]
選択された相手に対して、発信時に  186 を付けて発信者番号を通知するかどうかを設定する。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.18 詳細な  SYSLOG を出力するか否かの設定
[書式 ]
mobile  syslog  switch
no mobile  syslog  [switch ]
[設定値及び初期値 ]
•switch
• [設定値 ] :
設定値 説明
on 詳細な  SYSLOG を出力する
off 詳細な  SYSLOG を出力しない
• [初期値 ] : off
[説明 ]
携帯端末に対して発行した  AT コマンドを  SYSLOG として詳細に出力するかどうかを指定する。
モバイルインターネット接続として発信動作に入ってからのものだけが記録され、発信動作前のものは記録されな
い。 FOMA リモートセットアップ時も記録されない。
併せて syslog debug  on の設定が必要となる。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.19 携帯端末が接続状態になったときにアラーム音を鳴らすかどうかの設定
[書式 ]
alarm  mobile  switch
no alarm  mobile  [switch ]
[設定値及び初期値 ]
•switch
• [設定値 ] :コマンドリファレンス  | モバイルインターネット接続機能  | 597

設定値 説明
on 鳴らす
off 鳴らさない
• [初期値 ] : on
[説明 ]
携帯端末が接続状態になったときにアラーム音を鳴らすかどうかを設定する。
[ノート ]
FOMA リモートセットアップのときは対象外である。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.20 接続毎パケット通信量制限の設定
[書式 ]
mobile  access  limit  connection  length  length  [alert= alert ]
no mobile  access  limit  connection  length  [length ]
[設定値及び初期値 ]
•length
• [設定値 ] :
設定値 説明
1-9223372036854775807 バイト数、送受信するパケットデータ長の上限値
off 制限しない
• [初期値 ] : off
•alert
• [設定値 ] : 警告値、データ長あるいは [%]指定
• [初期値 ] : -
[説明 ]
選択されている相手について、 1 回の接続で送受信するパケットのデータ長の上限値を設定する。上限に達した場合
は通信を強制的に切断する。
alert  を指定して上限に達する前に警告を発生させることができる。警告はログに表示される。
[ノート ]
携帯端末のパケット通信は  128 バイトごとに課金されるが、ルーターと携帯端末間で送受信されるデータが  128 バ
イト単位である保証はない。
例えばルーターが  512 バイト  (128 バイト ×4) のデータを送受信したとしても、 4 パケット分の通信料金である保証は
なく、携帯網ではそれより多くのパケットに分割されて送受信されている可能性がある。
また、ルーターと携帯端末の間を流れるデータは非同期データであり、データの内容によっては本来のデータより
も長くなることがある。
従って、本コマンドで設定するデータ長はあくまで目安にしかならないので注意が必要である。
length , alert  パラメータへの  2147483647 より大きな値の設定は、  RTX830 Rev.15.02.03 以降、および  Rev.15.04 系以降
で指定可能。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.21 接続毎パケット通信時間制限の設定
[書式 ]
mobile  access  limit  connection  time  time [alert= alert ]598 | コマンドリファレンス  | モバイルインターネット接続機能

no mobile  access  limit  connection  time  [time]
[設定値及び初期値 ]
•time
• [設定値 ] :
設定値 説明
1-2147483647 秒数、通信秒数の上限値
off タイマを設定しない
• [初期値 ] : off
•alert
• [設定値 ] : 警告値、秒数あるいは [%]指定
• [初期値 ] : -
[説明 ]
選択されている相手について、 1 回の接続の通信時間の上限値を設定する。
上限に達した場合は通信を強制的に切断する。
本コマンドは mobile disconnect time  コマンドとは独立して動作する。
alert  を指定して上限に達する前に警告を発生させることができる。警告はログに表示される。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.22 通信制限の累積期間の設定
[書式 ]
mobile  access  limit  duration  duration
no mobile  access  limit  duration  [duration ]
[設定値及び初期値 ]
•duration
• [設定値 ] :
設定値 説明
1-2592000(RTX1210 Rev.14.01.20 以降、 Rev.15.02 系以
降), 1-604800( それ以外 )秒数、通信制限の累積対象の過去の期間
off 過去の全期間を対象とする
• [初期値 ] : off
[説明 ]
選択されている相手について、通信制限を行う場合に累積対象となる過去の期間を設定する。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.23 携帯端末でパケット着信機能を使用するか否かの設定
[書式 ]
mobile  arrive  use interface  use
no mobile  arrive  use interface  [use]
[設定値及び初期値 ]
•interface
• [設定値 ] :
設定値 説明
usb1 USB1 インターフェース
• [初期値 ] : -コマンドリファレンス  | モバイルインターネット接続機能  | 599

•use
• [設定値 ] :
設定値 説明
on 携帯端末でパケット着信機能を使用する
off 携帯端末でパケット着信機能を使用しない
• [初期値 ] : -
[説明 ]
指定したインターフェースに接続された携帯端末でモバイルインターネット接続のパケット着信機能を使用するか
否かを設定する。
[ノート ]
パケット着信機能に対応している携帯端末を使用する場合は、本コマンドを  on か off に必ず設定してください。
本コマンドが設定されていない場合は、アタッチされた時点における携帯端末本体のパケット着信機能の設定値が
使用されます。
パケット着信機能の詳細は携帯端末の取扱説明書などを参照のこと。
また、パケット着信機能を使用することが可能な携帯端末については以下の URLを参照のこと。
• https://www.rtpro.yamaha.co.jp/RT/docs/mobile-internet/
RTX1210 は Rev.14.01.11 以降で使用可能。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.24 モバイルインターネット機能の着信許可の設定
[書式 ]
mobile  arrive  permit  arrive
no mobile  arrive  permit  [arrive ]
[設定値及び初期値 ]
•use
• [設定値 ] :
設定値 説明
on 許可する
off 許可しない
• [初期値 ] : off
[説明 ]
モバイルインターネット機能で、相手からの着信を許可するか否かを設定する。
on に設定すると、相手からのパケット着信を受けたときに自動接続されるようになる。
[ノート ]
mobile arrive use  コマンドによって、携帯端末の設定が、 "パケット着信機能を使用する "となっている場合に有効で
ある。
RTX1210 は Rev.14.01.11 以降で使用可能。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830600 | コマンドリファレンス  | モバイルインターネット接続機能

44.25 電波の受信レベルの取得
[書式 ]
mobile  signal-strength  go
[説明 ]
電波の受信レベルを取得する。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.26 電波の受信レベル取得機能の設定
[書式 ]
mobile  signal-strength  switch  [option =value ]
no mobile  signal-strength  [...]
[設定値及び初期値 ]
•switch  : 電波の受信レベルの取得を許可するか否か
• [設定値 ] :
設定値 説明
on 許可する
off 許可しない
• [初期値 ] : on
•option=value  : 取得時のオプション
• [設定値 ] :
• interface
•電波の受信レベルを取得するインタフェース
• syslog
•取得結果を  INFO レベルで  SYSLOG に出力するか否か
設定値 説明
on 出力する
off 出力しない
trans 圏内、圏外の遷移が発生したときだけ出力する
• interval
•定期的に電波の受信レベルを取得する間隔及び回数
•間隔
設定値 説明
1..3600 秒数
off 定期的に取得しない
•回数
設定値 説明
1..1000 回数
infinity 無期限
• [初期値 ] :
• interface=usb1
• syslog=on
• interval=offコマンドリファレンス  | モバイルインターネット接続機能  | 601

[説明 ]
電波の受信レベルを取得する際の諸設定を行う。
GUI への表示、 mobile signal-strength go  コマンドや  DOWNLOAD ボタンの押下による取得では、本コマンドの設定
が適用される。
また、 interval オプションでは、秒数及び回数をカンマで区切って指定することができる。
interval オプションで秒数及び回数を指定した場合は本コマンド設定後、指定回数に応じて定期的に取得する。
定期的に取得した結果は show status mobile signal-strength  コマンドで確認できる。
なお、データ通信の開始直前と終了直後は本コマンドの設定に関係なく取得される。
定期的に電波の受信レベルを取得する場合、 syslogオプションに transを指定していると、電波レベルが圏外から圏
内、または圏内から圏外へと遷移したときだけ SYSLOG に出力する。
onを指定した場合には、取得した受信レベルを毎回 SYSLOG に出力し、それに加えて、電波レベルが圏外、圏内へ
の遷移が発生したときも出力する。
[ノート ]
一部の携帯端末では、 「網に接続しているとき」あるいは「網から切断されているとき」のみ電波の受信レベルが取
得できるものがある。
syslog オプションの  trans は RTX840、RTX830 で指定可能。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.27 定期実行で取得した電波の受信レベルの表示
[書式 ]
show  status  mobile  signal-strength  [reverse]
[設定値及び初期値 ]
• reverse : 取得時刻の新しいものから順に結果を表示する
• [初期値 ] : -
[説明 ]
mobile signal-strength  コマンドの設定で定期的に電波の受信レベルを取得した場合、
取得結果を最大  256 件表示する。 256 件を超えた場合は古い情報から削除される。
このコマンドでは、通常は取得時刻の古いものから順に結果を表示するが、
reverse を指定することで新しいものから表示させることができる。
[ノート ]
携帯端末が接続されている状態で  USB ボタンを  2 秒以上押し続け、端末とルーターの接続を解除すると、この履歴
はクリアされる。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.28 USB ポートに接続した機器の初期化に使う  AT コマンドの設定
[書式 ]
usbhost  modem  initialize  interface  command  [command_list ]
no usbhost  modem  initialize  interface
[設定値及び初期値 ]
•interface  : インタフェース名
• [設定値 ] :
• usb1
• [初期値 ] : -
•command
• [設定値 ] : AT コマンド文字列  ( 最大  64 文字  )602 | コマンドリファレンス  | モバイルインターネット接続機能

• [初期値 ] : -
•command_list
• [設定値 ] : AT コマンド文字列を空白で区切った並び
• [初期値 ] : -
[説明 ]
USB ポートに接続した機器を初期化するための  AT コマンドを設定する。
USB ポートに機器が接続されている状態で起動したときには起動時に、機器が接続されていない状態で起動したと
きには機器を接続したときに、本コマンドで指定した  AT コマンドが機器に設定される。
コマンドは  AT( アテンションコード  ) を付加した  AT コマンド文字列で指定する。
なお、１つの  AT コマンド文字列に複数のコマンドを指定することも可能である。
[ノート ]
FOMA を使ったリモートセットアップを行う場合は、この初期化設定は不要です。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.29 USB ポートに接続した機器のフロー制御を行うか否かの設定
[書式 ]
usbhost  modem  flow control  interface  sw
no usbhost  modem  flow control  interface
[設定値及び初期値 ]
•interface  : インタフェース名
• [設定値 ] :
• usb1
• [初期値 ] : -
•sw
• [設定値 ] :
設定値 説明
on フロー制御を行う
off フロー制御を行わない
• [初期値 ] : off
[説明 ]
USB ポートに接続した機器のフロー制御を行うかどうかを設定する。
接続した機器を用いたリモートセットアップ通信時に通信が意図せず切断されてしまう場合に  off に設定すると効
果がある場合がある。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.30 携帯端末のファームウェア更新
[書式 ]
mobile  firmware  update  go interface
[設定値及び初期値 ]
•interface
• [設定値 ] :
設定値 説明
usb1 USB1 インターフェース
• [初期値 ] : -コマンドリファレンス  | モバイルインターネット接続機能  | 603

[説明 ]
指定したインターフェースに接続された携帯端末のファームウェアを更新する。
[ノート ]
ソフトウェア更新機能の詳細は携帯端末の取扱説明書などを参照のこと。
また、本コマンドによりファームウェアを更新することが可能な携帯端末については以下の URLを参照のこと。
• https://www.rtpro.yamaha.co.jp/RT/docs/mobile-internet/
RTX1210 は Rev.14.01.11 以降で使用可能。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.31 携帯端末のネットワーク事業者モードの設定
[書式 ]
mobile  carrier  mode  interface  mode
no mobile  carrier  mode  interface  [mode ]
[設定値及び初期値 ]
•interface
• [設定値 ] :
設定値 説明
usb1 USB1 インターフェース
• [初期値 ] : -
•mode
• [設定値 ] :
設定値 説明
0 工場出荷時の設定
1 ネットワーク事業者モード 1
2 ネットワーク事業者モード 2
3 ネットワーク事業者モード 3
• [初期値 ] : -
[説明 ]
指定したインターフェースに接続された携帯端末のネットワーク事業者モードを設定する。
[ノート ]
ネットワーク事業者モードを設定することが可能な携帯端末を使用する場合は、本コマンドを設定する必要がある。
本コマンドが設定されていない場合は、アタッチされた時点における携帯端末本体のネットワーク事業者モードの
設定値が使用される。
すでにアタッチされている携帯端末に対してこのコマンドの設定が変更された場合、次に携帯端末がアタッチされ
た時点から新しい設定が反映される。
また、本コマンドによりネットワーク事業者モードを設定することが可能な携帯端末については以下の URLを参照
のこと。
• https://www.rtpro.yamaha.co.jp/RT/docs/mobile-internet/
RTX830 は Rev.15.02.03 以降で使用可能。
RTX1210 は Rev.14.01.26 以降で使用可能。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830604 | コマンドリファレンス  | モバイルインターネット接続機能

44.32 自分の名前とパスワードの設定
[書式 ]
wan auth  myname  myname  password
no wan auth  myname  [myname  password ]
[設定値及び初期値 ]
•wan
• [設定値 ] :
設定値 説明
wan1 WAN インタフェース名
• [初期値 ] : -
•myname
• [設定値 ] : 名前  (64 文字以内  )
• [初期値 ] : -
•password
• [設定値 ] : パスワード  (64 文字以内  )
• [初期値 ] : -
[説明 ]
モバイルインターネットで、接続時に送信する自分の名前とパスワードを設定する。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.33 WAN で使用するインタフェースの設定
[書式 ]
wan bind  interface
no wan bind  [interface ]
[設定値及び初期値 ]
•wan
• [設定値 ] :
設定値 説明
wan1 WAN インタフェース名
• [初期値 ] : -
•interface
• [設定値 ] :
設定値 説明
usb1 USB インタフェース名
• [初期値 ] : -
[説明 ]
指定した WAN インタフェースについて実際に使用するインタフェースを設定する。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.34 携帯端末からの自動発信設定
[書式 ]
wan auto  connect  auto
no wan auto  connect  [auto]コマンドリファレンス  | モバイルインターネット接続機能  | 605

[設定値及び初期値 ]
•wan
• [設定値 ] :
設定値 説明
wan1 WAN インタフェース名
• [初期値 ] : -
•auto
• [設定値 ] :
設定値 説明
on 携帯端末から自動発信する
off 携帯端末から自動発信しない
• [初期値 ] : off
[説明 ]
指定した WAN インタフェースについて自動接続するか否かを設定する。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.35 携帯端末を切断するタイマの設定
[書式 ]
wan disconnect  time  time
no wan disconnect  time  [time]
[設定値及び初期値 ]
•wan
• [設定値 ] :
設定値 説明
wan1 WAN インタフェース名
• [初期値 ] : -
•time
• [設定値 ] :
設定値 説明
1-21474836 秒数
off タイマを設定しない
• [初期値 ] : 60
[説明 ]
指定した WAN インタフェースについて、送受信がない場合の切断までの時間を設定する。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.36 携帯端末を入力がないときに切断するタイマの設定
[書式 ]
wan disconnect  input  time  time
no wan disconnect  input  time  [time]
[設定値及び初期値 ]
•wan
• [設定値 ] :606 | コマンドリファレンス  | モバイルインターネット接続機能

設定値 説明
wan1 WAN インタフェース名
• [初期値 ] : -
•time
• [設定値 ] :
設定値 説明
1-21474836 秒数
off タイマを設定しない
• [初期値 ] : 120
[説明 ]
指定した WAN インタフェースについて、データ受信がない場合の切断までの時間を設定する。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.37 携帯端末を出力がないときに切断するタイマの設定
[書式 ]
wan disconnect  output  time  time
no wan disconnect  output  time  [time]
[設定値及び初期値 ]
•wan
• [設定値 ] :
設定値 説明
wan1 WAN インタフェース名
• [初期値 ] : -
•time
• [設定値 ] :
設定値 説明
1-21474836 秒数
off タイマを設定しない
• [初期値 ] : 120
[説明 ]
指定した WAN インタフェースについて、データ送信がない場合の切断までの時間を設定する。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.38 常時接続の設定
[書式 ]
wan always-on  switch  [time]
no wan always-on
[設定値及び初期値 ]
•wan
• [設定値 ] :
設定値 説明
wan1 WAN インタフェース名
• [初期値 ] : -コマンドリファレンス  | モバイルインターネット接続機能  | 607

•switch
• [設定値 ] :
設定値 説明
on 常時接続する
off 常時接続しない
• [初期値 ] : off
•time
• [設定値 ] : 再接続を要求するまでの秒数  (60..21474836)
• [初期値 ] : -
[説明 ]
指定した WAN インタフェースについて、常時接続するか否かを設定する。また、常時接続での通信終了時に再接続
を要求するまでの時間間隔を指定する。
常時接続に設定されている場合には、起動時に接続を起動し、通信終了時には再接続を起動する。接続失敗時ある
いは通信の異常終了時には time に設定された時間間隔を待った後に再接続の要求を行い、正常な通信終了時には直
ちに再接続の要求を行う。 switch  が on に設定されている場合には、 time の設定が有効となる。 time が設定されてい
ない場合には time は 60 になる。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.39 発信先アクセスポイントの設定
[書式 ]
wan access-point  name  apn
no wan access-point  name  [apn]
[設定値及び初期値 ]
•wan
• [設定値 ] :
設定値 説明
wan1 WAN インタフェース名
• [初期値 ] : -
•apn
• [設定値 ] : モバイルインターネット通信に対応したアクセスポイント名  (Access Point Name)
• [初期値 ] : -
[説明 ]
指定した WAN インタフェースについてアクセスポイント名  (APN) の割り当てを設定する。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.40 パケット通信量制限の設定
[書式 ]
wan access  limit  length  length  [alert= alert [,alert_cancel ]]
no wan access  limit  length  [length ]
[設定値及び初期値 ]
•wan
• [設定値 ] :
設定値 説明
wan1 WAN インタフェース名
• [初期値 ] : -608 | コマンドリファレンス  | モバイルインターネット接続機能

•length
• [設定値 ] :
設定値 説明
1-9223372036854775807 バイト数、 送受信する累積パケットデータ長の上限値
off 制限しない
• [初期値 ] :
• 50M(RTX1210 Rev.14.01.20 以降、 Rev.15.02 系以降 )
• 200000( 上記以外 )
•alert
• [設定値 ] : 警告値、データ長あるいは [%]指定
• [初期値 ] : -
•alert_cancel
• [設定値 ] : 警告解除値、データ長あるいは [%]指定
• [初期値 ] : -
[説明 ]
指定した WAN インタフェースについて、送受信するパケットの累積データ長の上限値を設定する。
上限に達した場合は通信を強制的に切断し、その後の通信もブロックする。
累積値は、
•clear mobile access limitation  コマンドの発行
•wan access limit duration  コマンドの再設定
•システムの再起動
でクリアされ、発信制限が解除される。
show status wan1  コマンドで、現在までの累積パケットデータ長を確認できる。
alert  で警告値を設定すると、その警告値を上回った時にログに表示することができる。
また wan access limit duration  コマンドで累積期間を設定している場合には、 alert_cancel  で指定した警告解除値を下
回った時にログに表示することができる。
警告解除値を指定しない場合は、期間累積のデータ長が  0 になるまで警告を解除しない。
[ノート ]
警告値は上限値よりも小さく、警告解除値は警告値よりも小さくなければならない。
携帯端末のパケット通信は  128 バイトごとに課金されるが、ルーターと携帯端末間で送受信されるデータが  128 バ
イト単位である保証はない。
例えばルーターが  512 バイト  (128 バイト ×4) のデータを送受信したとしても、 4 パケット分の通信料金である保証は
なく、携帯網ではそれより多くのパケットに分割されて送受信されている可能性がある。
また、ルーターと携帯端末の間を流れるデータは非同期データであり、データの内容によっては本来のデータより
も長くなることがある。
従って、本コマンドで設定するデータ長はあくまで目安にしかならないので注意が必要である。
off を設定したときは警告が表示される。
length , alert , alert_cancel  パラメータへの  2147483647 より大きな値の設定は、  RTX830 Rev.15.02.03 以降、および
Rev.15.04 系以降で指定可能。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.41 パケット通信時間制限の設定
[書式 ]
wan access  limit  time  time [alert= alert [,alert_cancel ]] [unit= unit]
no wan access  limit  time  [time]コマンドリファレンス  | モバイルインターネット接続機能  | 609

[設定値及び初期値 ]
•wan
• [設定値 ] :
設定値 説明
wan1 WAN インタフェース名
• [初期値 ] : -
•time
• [設定値 ] :
設定値 説明
1-2147483647 累積通信秒数の上限値
off タイマを設定しない
• [初期値 ] : 3600
•alert
• [設定値 ] : 警告値、秒数あるいは [%]指定
• [初期値 ] : -
•alert_cancel
• [設定値 ] : 警告解除値、秒数あるいは [%]指定
• [初期値 ] : -
•unit
• [設定値 ] : 単位、 second 又は  minute
• [初期値 ] : second
[説明 ]
指定した WAN インタフェースについて、累積通信時間の上限値を設定する。
上限に達した場合は通信を強制的に切断し、その後の通信もブロックする。
本コマンドは wan disconnect time  コマンドとは独立して動作する。
累積値は、
•clear mobile access limitation  コマンドの発行
•wan access limit duration  コマンドの再設定
•システムの再起動
でクリアされ、発信制限が解除される。
show status wan1  コマンドで、現在までの累積通信時間を確認できる。
alert  で警告値を設定すると、その警告値を上回った時にログに表示することができる。
また wan access limit duration  コマンドで累積期間を設定している場合には、 alert_cancel  で指定した警告解除値を下
回った時にログに表示することができる。
累積通信時間が警告値に達している間は再接続できない。警告解除値を下回ると再接続できる。
警告解除値を指定しない場合は、期間累積の接続時間が  0 になるまで警告を解除しない。
unit で minute を指定すると、接続時間を分単位で算出する。秒単位は切り上げられる。
[ノート ]
警告値は上限値よりも小さく、警告解除値は警告値よりも小さくなければならない。
wan access limit duration  が設定されている場合、 unit=minute を指定しても、 期間内累積時間は、 秒単位で加算される。
off を設定したときは警告が表示される。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830610 | コマンドリファレンス  | モバイルインターネット接続機能

44.42 接続毎パケット通信量制限の設定
[書式 ]
wan access  limit  connection  length  length  [alert= alert ]
no wan access  limit  connection  length  [length ]
[設定値及び初期値 ]
•wan
• [設定値 ] :
設定値 説明
wan1 WAN インタフェース名
• [初期値 ] : -
•length
• [設定値 ] :
設定値 説明
1-9223372036854775807 バイト数、送受信するパケットデータ長の上限値
off 制限しない
• [初期値 ] : off
•alert
• [設定値 ] : 警告値、データ長あるいは [%]指定
• [初期値 ] : -
[説明 ]
指定した WAN インタフェースについて、 1 回の接続で送受信するパケットのデータ長の上限値を設定する。上限に
達した場合は通信を強制的に切断する。
alert  を指定して上限に達する前に警告を発生させることができる。警告はログに表示される。
[ノート ]
携帯端末のパケット通信は  128 バイトごとに課金されるが、ルーターと携帯端末間で送受信されるデータが  128 バ
イト単位である保証はない。
例えばルーターが  512 バイト  (128 バイト ×4) のデータを送受信したとしても、 4 パケット分の通信料金である保証は
なく、携帯網ではそれより多くのパケットに分割されて送受信されている可能性がある。
また、ルーターと携帯端末の間を流れるデータは非同期データであり、データの内容によっては本来のデータより
も長くなることがある。
従って、本コマンドで設定するデータ長はあくまで目安にしかならないので注意が必要である。
length , alert  パラメータへの  2147483647 より大きな値の設定は、  RTX830 Rev.15.02.03 以降、および  Rev.15.04 系以降
で指定可能。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.43 接続毎パケット通信時間制限の設定
[書式 ]
wan access  limit  connection  time  time [alert= alert ]
no wan access  limit  connection  time  [time]
[設定値及び初期値 ]
•wan
• [設定値 ] :
設定値 説明
wan1 WAN インタフェース名コマンドリファレンス  | モバイルインターネット接続機能  | 611

• [初期値 ] : -
•time
• [設定値 ] :
設定値 説明
1-2147483647 秒数、通信秒数の上限値
off タイマを設定しない
• [初期値 ] : off
•alert
• [設定値 ] : 警告値、秒数あるいは [%]指定
• [初期値 ] : -
[説明 ]
指定した WAN インタフェースについて、 1 回の接続の通信時間の上限値を設定する。
上限に達した場合は通信を強制的に切断する。
本コマンドは wan disconnect time  コマンドとは独立して動作する。
alert  を指定して上限に達する前に警告を発生させることができる。警告はログに表示される。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
44.44 通信制限の累積期間の設定
[書式 ]
wan access  limit  duration  duration
no wan access  limit  duration  [duration ]
[設定値及び初期値 ]
•wan
• [設定値 ] :
設定値 説明
wan1 WAN インタフェース名
• [初期値 ] : -
•duration
• [設定値 ] :
設定値 説明
1-2592000(RTX1210 Rev.14.01.20 以降、 Rev.15.02 系以
降), 1-604800( それ以外 )秒数、通信制限の累積対象の過去の期間
off 過去の全期間を対象とする
• [初期値 ] : off
[説明 ]
指定した WAN インタフェースについて、通信制限を行う場合に累積対象となる過去の期間を設定する。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830612 | コマンドリファレンス  | モバイルインターネット接続機能

