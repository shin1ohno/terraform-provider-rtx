# 第4章: 機器の設定

> 元PDFページ: 50-120

---

第 4 章
機器の設定
4.1 ログインパスワードの設定
[書式 ]
login  password
[説明 ]
無名ユーザーとしてログインするためのパスワードを  32 文字以内で設定する。パラメーターはなく、コマンド入力
後にプロンプトに応じて改めてパスワードを入力する形になる。
パスワードに使用できる文字は、半角英数字および記号  (7bit ASCII Code で表示可能なもの  )。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3500, RTX1220, RTX1210, RTX830
4.2 ログインパスワードの暗号化保存
[書式 ]
login  password  encrypted
[説明 ]
無名ユーザのパスワードを  32 文字以内で設定し、暗号化して保存する。パラメータはなく、コマンド入力後にプロ
ンプトに応じて改めてパスワードを入力する形になる。
パスワードに使用できる文字は、半角英数字および記号  (7bit ASCII Code で表示可能なもの  )。
[ノート ]
パスワードを暗号化して保存する場合は本コマンドを、平文で保存する場合は login password  コマンドを使用する。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3500, RTX1220, RTX1210, RTX830
4.3 管理パスワードの設定
[書式 ]
administrator  password
[説明 ]
管理ユーザとしてルーターの設定を変更するための管理パスワードを設定する。パラメータはなく、コマンド入力
後にプロンプトに応じて改めてパスワードを入力する形になる。
パスワードに使用できる文字は、半角英数字および記号  (7bit ASCII Code で表示可能なもの  )。vRX シリーズ、
RTX5000 、RTX3510 、RTX3500 、RTX1300 、RTX1220 、RTX1210 、および  RTX830 では  1 ～ 32 文字、その他の機種
では  8 ～ 32 文字の文字列を入力する。
パスワードに何も入力せずにエンターキーを押した場合には、管理パスワードを削除する。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.4 管理パスワードの暗号化保存
[書式 ]
administrator  password  encrypted50 | コマンドリファレンス  | 機器の設定

[説明 ]
管理ユーザのパスワードを設定し、暗号化して保存する。パラメータはなく、コマンド入力後にプロンプトに応じ
て改めてパスワードを入力する形になる。
パスワードに使用できる文字は、半角英数字および記号  (7bit ASCII Code で表示可能なもの  )。vRX シリーズ、
RTX5000 、RTX3510 、RTX3500 、RTX1300 、RTX1220 、RTX1210 、および  RTX830 では  1 ～ 32 文字、その他の機種
では  8 ～ 32 文字の文字列を入力する。
パスワードに何も入力せずにエンターキーを押した場合には、管理パスワードを削除する。
[ノート ]
パスワードを暗号化して保存する場合は本コマンドを、 平文で保存する場合は  administrator password  コマンドを使
用する。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.5 一般ユーザ名とログインパスワードの設定
[書式 ]
login  user user [password ]
login  user user encrypted password
no login  user user [password ]
[設定値及び初期値 ]
•user
• [設定値 ] : ユーザ名  (32 文字以内  )
• [初期値 ] : -
•password
• [設定値 ] : パスワード
• [初期値 ] : -
[説明 ]
一般ユーザ名とパスワードを設定する。
登録できるユーザは最大  32 人。
ユーザ名に使用できる文字は、半角英数字およびハイフン  (-)、アンダーバー (_)。
第 1 書式では、パスワードは平文で入力し、暗号化して保存される。また、パスワードを省略すると、コマンド入
力後にプロンプトに応じて改めてパスワードを入力する形になる。パスワードに使用できる文字は、半角英数字お
よび記号  (7bit ASCII Code で表示可能なもの  )。vRX シリーズ、 RTX5000 、RTX3510 、RTX3500 、RTX1300 、
RTX1220 、RTX1210 、および  RTX830 では  1 ～ 32 文字、その他の機種では  8 ～ 32 文字の文字列を入力する。
第 2 書式では、 password  に暗号化されたパスワードを入力する。
TFTP で設定を取得した場合は、パスワードが暗号化されて保存されているため、常に第  2 書式の形で表示される。
[ノート ]
同一のユーザ名を複数登録することはできない。
既に登録されているユーザ名で設定を行った場合は、元の設定が上書きされる。
syslog execute command  を on に設定している場合には、設定パスワードがログに残ることを防ぐために、パスワー
ドを省略した書式で入力するか、一時的に  syslog execute command  を off に設定する、さもなくば  clear log  を実行す
るなどの操作を行うことが望ましい。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.6 ログイン時のパスワード認証に RADIUS を使用するか否かの設定
[書式 ]
login  radius  use use
no login  radius  useコマンドリファレンス  | 機器の設定  | 51

[設定値及び初期値 ]
•use
• [設定値 ] :
設定値 説明
on 使用する
off 使用しない
• [初期値 ] : off
[説明 ]
ログイン時のパスワード認証に RADIUS を使用するか否かを設定する。
[ノート ]
RADIUS 認証サーバーに関する以下のコマンドが正しく設定されている必要がある。
•radius auth
•radius auth server
•radius auth port
•radius secret
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.7 管理ユーザーへの移行時のパスワード認証に RADIUS を使用するか否かの設定
[書式 ]
administrator  radius  auth  use
no administrator  radius  auth  [use]
[設定値及び初期値 ]
•use
• [設定値 ] :
設定値 説明
on ローカル認証と RADIUS 認証を併用する
only RADIUS 認証のみ使用する
off 使用しない
• [初期値 ] : off
[説明 ]
administrator コマンドで管理ユーザーへ移行する際のパスワード認証に RADIUS を使用するか否かを設定する。
onの場合、最初に administrator password コマンドで設定された管理パスワードとの比較を行い、一致しなかった
場合に RADIUS サーバーへの問い合わせを行う。 onlyの場合、 RADIUS サーバーへの問い合わせのみを行う。
[ノート ]
RADIUS 認証サーバーに関する以下のコマンドが正しく設定されている必要がある。
•radius auth
•radius auth server
•radius auth port
•radius secret
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX83052 | コマンドリファレンス  | 機器の設定

4.8 拡張ライセンスの操作
4.8.1 拡張ライセンスのパスワードの設定  (YSL-VPN-EX1)
[書式 ]
ex-license  password  password
no ex-license  password  [password ]
[設定値及び初期値 ]
•password
• [設定値 ] : パスワード  (半角  8 文字以上、 64 文字以下 )
• [初期値 ] : -
[説明 ]
拡張ライセンス  (YSL-VPN-EX1) を使用するためのパスワードを設定する。
本コマンドの設定の変更、または削除によりインポート済みのライセンスが復号できなくなる場合、設定を保存し
てルーターを再起動したあとにライセンスが無効になる。
[ノート ]
RTX830 は Rev.15.02.22 以降で使用可能。
[適用モデル ]
RTX830
4.8.2 拡張ライセンスのパスワードの登録  (YSL-VPN-EX2/YSL-VPN-EX3)
[書式 ]
register  ex-license  password
[説明 ]
拡張ライセンス  (YSL-VPN-EX2/YSL-VPN-EX3) を使用するためのパスワードを半角  8 文字以上、 64 文字以下で登録
する。
登録したパスワードは  RTFS の /yamaha_sys ディレクトリに暗号化して保存される。 yamaha_sys ディレクトリがな
い場合は自動生成される。
本コマンドの実行によりインポート済みのライセンスが復号できなくなる場合、ルーターを再起動したあとにライ
センスが無効になる。
[ノート ]
RTX1300 は Rev.23.00.14 以降で使用可能。
[適用モデル ]
RTX3510, RTX1300
4.8.3 拡張ライセンスのパスワードの削除  (YSL-VPN-EX2/YSL-VPN-EX3)
[書式 ]
unregister  ex-license  password
[説明 ]
register ex-license password  コマンドで登録したパスワードを削除する。
本コマンドの実行によりインポート済みのライセンスが復号できなくなる場合、ルーターを再起動したあとにライ
センスが無効になる。
[ノート ]
RTX1300 は Rev.23.00.14 以降で使用可能。
[適用モデル ]
RTX3510, RTX1300
4.8.4 拡張ライセンスのインポート
[書式 ]
import  ex-license  key [key]コマンドリファレンス  | 機器の設定  | 53

[設定値及び初期値 ]
•key : インポートするライセンスキー
• [初期値 ] : -
[説明 ]
拡張ライセンスをインポートする。
ライセンスをインポートする前に  YSL-VPN-EX1 対応機種は  ex-license password  コマンド、  YSL-VPN-EX2/YSL-
VPN-EX3 対応機種は  register ex-license password  コマンドでパスワードを登録しておく必要がある。
key を省略した場合は、インポートするライセンスキーの入力を求められる。
このとき、インポートするライセンスの詳細が表示され、ライセンスのインポートを続行するか否かを選択するこ
とができる。
key を省略せずに入力した場合は、インポートを続行するか否かは問われず、正常なライセンスであれば自動的にイ
ンポートされる。
インポートしたライセンスは  RTFS の /yamaha_sys ディレクトリに保存される。 yamaha_sys ディレクトリがない場
合は自動生成される。
[ノート ]
RTX830 は Rev.15.02.22 以降で使用可能。
RTX1300 は Rev.23.00.14 以降で使用可能。
[適用モデル ]
RTX3510, RTX1300, RTX830
4.8.5 拡張ライセンスの削除
[書式 ]
clear  ex-license
[説明 ]
拡張ライセンスを削除する。
本コマンドを実行すると、削除するライセンスの詳細が表示され、ライセンスの削除を続行するか否かを選択する
ことができる。ライセンスを削除するとルーターが再起動される。
[ノート ]
RTX830 は Rev.15.02.22 以降で使用可能。
RTX1300 は Rev.23.00.14 以降で使用可能。
[適用モデル ]
RTX3510, RTX1300, RTX830
4.9 vRX のライセンスの操作
4.9.1 vRX のライセンスのユーザー  ID とパスワードの設定
[書式 ]
vrx user user_id  password
no vrx user [user_id  password ]
[設定値及び初期値 ]
•user_id
• [設定値 ] : ユーザー  ID (半角  4 文字以上、 64 文字以下 )
• [初期値 ] : -
•password
• [設定値 ] : パスワード  (半角  8 文字以上、 64 文字以下 )
• [初期値 ] : -54 | コマンドリファレンス  | 機器の設定

[説明 ]
vRX のライセンスのユーザー  ID とパスワードを設定する。
[適用モデル ]
vRX シリーズ
4.9.2 vRX のライセンスファイルの保存ディレクトリの設定
[書式 ]
vrx license  file directory  path
no vrx license  file directory  [path]
[設定値及び初期値 ]
•path
• [設定値 ] : ライセンスファイルを保存するディレクトリの絶対パス、または相対パス
• [初期値 ] : /
[説明 ]
vRX のライセンスファイルについて、インポート元およびエクスポート先のディレクトリを設定する。
path に相対パスを指定した場合、環境変数  PWD を基点としたパスと解釈される。 PWD は set コマンドで変更可能
であり、初期値は  "/" である。
[適用モデル ]
vRX シリーズ
4.9.3 vRX のライセンスが有効であるか否かの判定スケジュールの設定
[書式 ]
vrx license  update  schedule  time1  time2
no vrx license  update  schedule  [time1  time2 ]
[設定値及び初期値 ]
•time1,time2
• [設定値 ] : 有効であるか否かの判定を行う時間帯  (24時間制  HH:MM 形式 )
• [初期値 ] :
•time1  ... 01:00
•time2  ... 03:00
[説明 ]
インポートされている  vRX のライセンスが有効であるか否かの判定を行うスケジュールを設定する。
time1  で指定した時刻から  time2  で指定した時刻の間のランダムな時刻にライセンスの判定を行う。
time1  で指定した時刻が  time2  で指定した時刻より遅い場合には、 time2  は翌日の時刻と解釈される。この場合、タイ
ミングによってはライセンスが有効となるのが約 1日遅れとなる可能性がある。
例えば、 time1  を 23:00、time2  を 01:00 と設定した状態で、開始日が  2020/04/10 であるライセンスがインポートされ
ているとする。このとき、 2020/04/09 の 23:00 ～ 23:59 の間にライセンスの判定が行われると、ライセンスが有効と
なるのは  2020/04/10 の 23:00 ～ 2020/04/11 の 01:00 の間となる。
確実にライセンスを開始日に有効としたい場合は、 time2  を time1  で指定した時刻よりも遅い時刻となるように設定
する。
有効な基本ライセンスが見つかった場合は、ルーターは当該ライセンスの機能制限に従って動作する。オプション
ライセンスがインポートされている場合はあわせて有効となる。
有効な基本ライセンスが見つからなかった場合は、ルーターはライセンス無効時の機能制限に従って動作する。
有効期限が被っている基本ライセンスが複数見つかった場合は、有効期限の開始日が現在の日付に一番近い基本ラ
イセンスが有効となる。
有効期限の開始日が同じである場合は、有効期限の満了日が一番最後の基本ライセンスが有効となる。
[適用モデル ]
vRX シリーズ
4.9.4 vRX のライセンスのインポート
[書式 ]
import  vrx license  fileコマンドリファレンス  | 機器の設定  | 55

import  vrx license  key [key]
[設定値及び初期値 ]
•key : インポートするライセンスキー
• [初期値 ] : -
[説明 ]
vRX の基本ライセンス、およびオプションライセンスをインポートする。
基本ライセンスをインポートする前に  ntpdate  コマンドまたは  date コマンドで日時設定を完了しておく必要があ
る。
オプションライセンスは、ルーターにインポートされている基本ライセンスと紐づくライセンスのみインポートで
きる。
第 1 書式を入力した場合は、ライセンスファイルでライセンスをインポートする。
vrx license file directory コマンドで指定したディレクトリに保存されているライセンスファイルを一括でインポート
する。このとき、インポートするライセンスの詳細が表示され、ライセンスのインポートを続行するか否かを選択
することができる。
第2書式を入力した場合は、ライセンスキーでライセンスをインポートする。
key を省略した場合は、インポートするライセンスキーの入力を求められる。このとき、インポートするライセンス
の詳細が表示され、ライセンスのインポートを続行するか否かを選択することができる。
key にインポートするライセンスキーの入力した場合は、インポートを続行するか否かは問われず、正常なライセン
スであれば自動的にインポートされる。
[ノート ]
key パラメータは、 vRX Amazon EC2 版 では指定不可能。
[適用モデル ]
vRX シリーズ
4.9.5 vRX のライセンスのエクスポート
[書式 ]
export  vrx license  file
[説明 ]
インポートされている  vRX のライセンスをライセンスファイルとしてエクスポートする。
エクスポートしたライセンスファイルは  vrx license file directory  コマンドで指定したディレクトリ内の  vrx_license
ディレクトリに保存される。 vrx_license ディレクトリがない場合は自動的に作成される。
エクスポートしたライセンスファイルには、以下の名前が付けられる。
ライセンス ファイル名
基本ライセンス vrx_basic_yyyymmdd_hhmmss.lic
VPN ライセンス vrx_vpn_yyyymmdd_hhmmss.lic
yyyymmdd_hhmmss はエクスポートを行った日時。
[適用モデル ]
vRX シリーズ
4.9.6 vRX のライセンスの削除
[書式 ]
clear  vrx license  [history]
[説明 ]
インポートされている  vRX の基本ライセンス、およびオプションライセンスを削除する。
history オプションを付与すると、有効期限切れとなったライセンスのみ削除する。
[適用モデル ]
vRX シリーズ56 | コマンドリファレンス  | 機器の設定

4.10 ユーザーの属性を設定
[書式 ]
user attribute  [user] attribute =value  [attribute =value ...]
no user attribute  [user...]
[設定値及び初期値 ]
•user
• [設定値 ] :
設定値 説明
ユーザー名 登録されているユーザー名
*radius RADIUS 認証でログインするすべてのユーザー
* すべてのユーザー
• [初期値 ] : -
•attribute=value  : ユーザー属性
• [設定値 ] :
• administrator : 管理者モードを使えるかどうかを示す属性
vRX Amazon EC2 版、 vRX VMware ESXi 版、 RTX5000 、RTX3500 、RTX1220 、RTX1210 、RTX830
設定値 説明
onadministrator コマンドにより管理ユーザーに昇格
することができる。また GUIの管理者ページへ接
続することができる。管理者パスワードを用いて
SFTP接続を行うことができる。
offadministrator コマンドにより管理ユーザーに昇格
することができない。また GUIの管理者ページへ
接続することができない。管理者パスワードを用
いて SFTP接続を行うことができない。
その他の機種
設定値 説明
2administrator コマンドのパスワード入力無しで管
理ユーザーに昇格することができる。また GUIの
管理者ページへ接続することができる。管理者パ
スワードを用いて SFTP接続を行うことができる。
1administrator コマンドにより管理ユーザーに昇格
することができる。また GUIの管理者ページへ接
続することができない。管理者パスワードを用い
てSFTP接続を行うことができる。
offadministrator コマンドにより管理ユーザーに昇格
することができない。また GUIの管理者ページへ
接続することができない。管理者パスワードを用
いて SFTP接続を行うことができない。
• connection : ルーターへのアクセス方法を示す属性
設定値 説明
off すべての接続を禁止する。
all すべての接続を許可する。
serial シリアルコンソールからの接続を許可する。
vm-console 仮想マシンコンソールからの接続を許可する。
telnet TELNET による接続を許可する。
ssh SSHによる接続を許可する。コマンドリファレンス  | 機器の設定  | 57

設定値 説明
sftp SFTPによる接続を許可する。
remoteリモートセットアップによる接続を許可する。
( vRX シリーズ  では指定不可能  )
httpGUI設定画面への接続を許可する。
( vRX シリーズ、 RTX5000 、RTX3510 、および
RTX3500 では指定不可能  )
• gui-page : ログインユーザーに対して閲覧を許可する GUI画面の種別を示す属性
設定値 説明
allログインユーザーでアクセスできるすべての画面
の閲覧を許可する。
dashboard ダッシュボード画面の閲覧を許可する。
lan-map LANマップ画面の閲覧を許可する。
configかんたん設定画面、詳細設定画面、管理画面、
CONFIG 画面および TECHINFO 画面の閲覧を許可
する。
• RTX1300 、RTX1220 、RTX1210 Rev.14.01.11 以降、 RTX840、および  RTX830 で指定可能
• host : ルーターへのアクセスホストを指定する属性
設定値 説明
IPアドレス 指定したホストからの接続を許可する。
any すべてのホストからの接続を許可する。
インタフェース名 指定したインタフェースからの接続を許可する。
• multi-session : 複数接続を許可するかどうかを示す属性
設定値 説明
on同一ユーザー名による TELNET 、SSH、HTTPでの
複数接続を許可する。
off同一ユーザー名による TELNET 、SSH、HTTPでの
複数接続を禁止する。
• login-timer : ログインタイマーの指定
設定値 説明
120..21474836キー入力がない場合に自動的にログアウトするま
での秒数。
clear ログインタイマーを設定しない。
• [初期値 ] :
• administrator=on ( vRX Amazon EC2 版、 vRX VMware ESXi 版、 RTX5000 、RTX3500 、RTX1220 、RTX1210 、
RTX830 )
• administrator=1 ( 上記以外の機種  )
• connection=all
• gui-page=all
• host=any
• multi-session=on
• login-timer=300
[説明 ]
ユーザーの属性を設定する。
userを省略した場合は、無名ユーザーの属性を設定する。
userに*radiusを指定した場合は、 RADIUS 認証でログインするすべてのユーザーの属性を設定する。58 | コマンドリファレンス  | 機器の設定

userにアスタリスク  (*) を指定した場合は、すべてのユーザーに対して設定を有効にする。ただし、ユーザー名を指
定した設定がされている場合は、その設定が優先される。
すでに管理ユーザーに昇格しているユーザーに対して、このコマンドで administrator 属性を offに変更しても、その
ユーザーは exitコマンドにより一般ユーザーに降格するか、あるいはログアウトするまでは管理ユーザーで居続け
ることができる。
connection 属性では、 off、all以外の値はコンマ  (,) でつないで複数指定することができる。
すでに接続しているユーザーに対して、このコマンドで connection 属性または host属性により接続を禁止しても、
そのユーザーは切断するまでは接続を維持し続けることができる。
gui-page属性では、 all以外の値はコンマ (,)でつないで複数指定することができる。  本属性で設定した設定内容は、
ログインユーザーとしてログインしたときのみ有効となる。管理ユーザーとしてログインした場合は、本属性の設
定にかかわらず、 常に GUI上のすべての画面を閲覧する権限を持つ。  すでに GUIに接続中のユーザーに対してこの
コマンドで本属性の設定が変更された場合、 次に GUI上のページにアクセスした時点から新しい設定が反映される。
host属性では、 TELNET 、SSH、SFTP及び HTTPで接続できるホストを設定する。指定できる IPアドレスは、 1個
のIPアドレスまたは間にハイフン  (-) をはさんだ IPアドレス  (範囲指定 )、 およびこれらをコンマ  (,) でつないだもの
である。
multi-session 属性では、 TELNET 、SSH、HTTPでの複数接続の可否を設定する。この属性を offに変更しても、シリ
アルと TELNET やリモートセットアップと SSHなど、 接続方法が異なる場合は同じユーザー名で接続することがで
きる。
すでに複数の接続があるユーザーに対して、このコマンドで multi-session 属性を offに変更しても、そのユーザーは
切断するまでは接続を維持し続けることができる。
無名ユーザーに対しては SSH、SFTPによる接続を許可することができない。ただし、 vRX Amazon EC2 版 および
vRX VMware ESXi 版 では、公開鍵認証使用時に限り接続を許可することができる。
無名ユーザーに対しては TELNET での複数接続はできない。
TELNET 、SSH、SFTP、HTTPで接続した場合、 login-timer 属性の値が clearに設定されていても、タイマ値は 300秒
として扱う。
login timer コマンドの設定値よりも、本コマンドの login-timer 属性の設定値が優先される。
[ノート ]
vRX Amazon EC2 版、 vRX VMware ESXi 版、 RTX5000 、RTX3500 、RTX1220 、RTX1210 、および  RTX830 を除く各
機種では、無名ユーザーを登録できないため  user パラメーターを省略することはできない。また、 administrator 属性
が 2 のユーザーを  1 つ以上設定する必要がある。
GUIの管理者ページへ接続するとき、 RTX1300 はユーザーパスワードを用い、他の機種は管理者パスワードを用い
て接続する。
本コマンドにより、すべてのユーザーの接続を禁止する、またはすべてのユーザーが管理ユーザーに昇格できない
といった設定を行った場合、ルーターの設定変更や状態確認などができなくなるので注意する必要がある。
connection 属性の  'vm-console' は vRX さくらのクラウド版で指定可能。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.11 他のユーザの接続の強制切断
[書式 ]
disconnect  user user [/connection [no]]
disconnect  user [user]/connection [no]
[設定値及び初期値 ]
•user
• [設定値 ] : ユーザ名
• [初期値 ] : -
•connection  : 接続種別
• [設定値 ] :
設定値 説明
telnet TELNET による接続
serial シリアルコンソールからの接続コマンドリファレンス  | 機器の設定  | 59

設定値 説明
vm-console 仮想マシンコンソールからの接続
remote リモートセットアップによる接続
( vRX シリーズ  では指定不可能  )
ssh SSH による接続
sftp SFTP による接続
http GUI 設定画面への接続
( vRX シリーズ、 RTX5000 、RTX3510 、 および  RTX3500
では指定不可能  )
• [初期値 ] : -
•no
• [設定値 ] : 接続番号
• [初期値 ] : -
[説明 ]
他ユーザの接続を切断する。
show status user  コマンドで表示された接続状況からパラメータを指定する。
無名ユーザを切断する場合は、第二書式で user を省略した形で指定する。
パラメータを省略した場合は、指定したパラメータと一致するすべての接続を切断する。
[ノート ]
自分自身のセッションを切断することはできない。
connection  パラメータの  'vm-console' は vRX さくらのクラウド版で指定可能。
[設定例 ]
例 1) ユーザ名「 test」でログインしているすべての接続を切断する。
# disconnect user  test
例 2) TELNET で接続しているすべてのユーザを切断する。
# disconnect user  /telnet
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.12 セキュリティクラスの設定
[書式 ]
security  class  level  forget  [telnet  [ssh]]
no security  class  [level  forget  [telnet  [ssh]]]
[設定値及び初期値 ]
•level
• [設定値 ] :
設定値 説明
1 シリアル、 TELNET 、SSH、リモートセットアップ機
能のすべてでログインできる
2 シリアル、 TELNET 、SSHでログインできるが、リモ
ートセットアップ機能ではログインできない
3 シリアルからのみログインできる
• [初期値 ] : 1
•forget60 | コマンドリファレンス  | 機器の設定

• [設定値 ] :
設定値 説明
on 設定したパスワードの代わりに  "w,lXlma" ( ダブリュ
ー、カンマ、エル、エックス、エル、エム、エー ) で
もログインでき、 設定の変更も可能になる。ただしシ
リアルのみ
( vRX Amazon EC2 版、 vRX VMware ESXi 版、
RTX5000 、RTX3500 、RTX1220 、RTX1210 、および
RTX830 で指定可能  )
off パスワードを入力しないとログインできない
• [初期値 ] :
• off ( RTX3510 、RTX1300 、RTX840 )
• on ( 上記以外  )
•telnet
• [設定値 ] :
設定値 説明
on TELNET クライアントとして telnet  コマンドが使用
できる
off telnet  コマンドは使用できない
• [初期値 ] : off
•ssh
• [設定値 ] :
設定値 説明
on SSH クライアントとして ssh コマンドが使用できる
off ssh コマンドは使用できない
• [初期値 ] : off
[説明 ]
セキュリティクラスを設定する。
ただし、本コマンドによる設定は Web GUI は対象外である。
[ノート ]
リモートセットアップ機能とは以下の機能のことを指す。
•remote setup  コマンドを使用して、離れた場所のルーターに  ISDN 回線や専用線経由で設定を行う機能
•telnet  コマンドの  host に NGN 網電話番号を指定して、離れた場所のルーターに  NGN 網経由で設定を行う機能
remote setup accept  コマンドにより、 リモートセットアップ機能でのログインを細かくアクセス制限することができ
る。設定を変更したときに変更した値よりも多くのユーザが接続している場合は、接続しているユーザはそれを維
持することができるが、接続しているユーザ数が設定値より少なくなるまで新たな接続は許可しない。
vRX Amazon EC2 版 で level  パラメーターを  3 に設定すると、 vRX へのアクセス手段が消失する。アクセス可能な状
態へ復旧するためには、起動時  CONFIG ( ユーザーデータ  ) で本コマンドを再設定する必要がある。
SSH クライアント機能が実装されていないモデルでは、 sshキーワードは使用できない
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.13 タイムゾーンの設定
[書式 ]
timezone  timezone
no timezone  [timezone ]
[設定値及び初期値 ]
•timezone  : その地域と世界標準時との差コマンドリファレンス  | 機器の設定  | 61

• [設定値 ] :
設定値 説明
jst 日本標準時  (+09:00)
utc 世界標準時  (+00:00)
任意の時刻  : 分 時刻  : 分 (-12:00..+11:59)
• [初期値 ] : jst
[説明 ]
タイムゾーンを設定する。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.14 現在の日付けの設定
[書式 ]
date date
[設定値及び初期値 ]
•date
• [設定値 ] : yyyy-mm-dd または  yyyy/mm/dd
• [初期値 ] : -
[説明 ]
現在の日付けを設定する。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.15 現在の時刻の設定
[書式 ]
time  time
[設定値及び初期値 ]
•time
• [設定値 ] : hh:mm:ss
• [初期値 ] : -
[説明 ]
現在の時刻を設定する。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.16 リモートホストによる時計の設定
[書式 ]
rdate  host [syslog]
[設定値及び初期値 ]
•host
• [設定値 ] :
設定値 説明
IP アドレス リモートホストの  IP アドレス  (xxx.xxx.xxx.xxx(xxx
は十進数  ))
名前 ホストの名称
• [初期値 ] : -62 | コマンドリファレンス  | 機器の設定

• syslog : 出力結果を  SYSLOG へ出力することを示すキーワード
• [初期値 ] : -
[説明 ]
ルーターの時計を、パラメータで指定したホストの時間に合わせる。
このコマンドが実行されるとホストの  TCP の 37 番ポートに接続する。
[ノート ]
ヤマハルーターシリーズ  および、多くの  UNIX コンピュータをリモートホストに指定できる。
syslog キーワードを指定した場合には、コマンドの出力結果を  INFO レベルの  SYSLOG へ出力する。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.17 NTP による時計の設定
[書式 ]
ntpdate  ntp_server  [syslog]
[設定値及び初期値 ]
•ntp_server
• [設定値 ] :
設定値 説明
IP アドレス NTP サーバーの  IP アドレス  (xxx.xxx.xxx.xxx (xxx は
十進数  ))
IPv6 アドレス NTP サーバーの  IPv6 アドレス
(xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx (xxxx は十
六進数  ))
名前 NTP サーバーの名称
• [初期値 ] : -
• syslog : 出力結果を  SYSLOG へ出力することを示すキーワード
• [初期値 ] : -
[説明 ]
NTP を利用してルーターの時計を設定する。このコマンドが実行されるとホストの  UDP の 123 番ポートに接続す
る。
[ノート ]
インターネットに接続している場合には、 rdate  コマンドを使用した場合よりも精密な時計合わせが可能になる。
NTP サーバーはできるだけ近くのものを指定した方が良い。利用可能な  NTP サーバーについてはプロバイダに問
い合わせること。
syslog キーワードを指定した場合には、コマンドの出力結果を  INFO レベルの  SYSLOG へ出力する。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.18 NTP パケットを送信するときの始点  IP アドレスの設定
[書式 ]
ntp local  address  ip_address
no ntp local  address
[設定値及び初期値 ]
•ip_address
• [設定値 ] : IP アドレス
• [初期値 ] : -コマンドリファレンス  | 機器の設定  | 63

[説明 ]
NTP パケットを送信するときの始点  IP アドレスを設定する。
始点  IP アドレスが設定されていないときは、通常の  UDP パケットの送信ルールに従い、出力インタフェースの  IP
アドレスを利用する。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.19 Stratum 0 の NTP サーバーとの時刻同期を許可する設定
[書式 ]
ntp backward-compatibility  comp
no ntp backward-compatibility  [comp ]
[設定値及び初期値 ]
•comp
• [設定値 ] :
設定値 説明
accept-stratum-0 Stratum 0 の NTP サーバーとの時刻同期を許可する
• [初期値 ] : -
[説明 ]
Stratum 0 の NTP サーバーとの時刻同期を許可する。
[ノート ]
外部クロックに同期した  NTP サーバーでない限り、 Stratum 0 にはならない。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.20 コンソールのプロンプト表示の設定
[書式 ]
console  prompt  prompt
no console  prompt  [prompt ]
[設定値及び初期値 ]
•prompt
• [設定値 ] : コンソールのプロンプトの先頭文字列  (64 文字以内 )
• [初期値 ] : -
[説明 ]
コンソールのプロンプト表示を設定する。空文字列も設定できる。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.21 コンソールの言語とコードの設定
[書式 ]
console  character  code
no console  character  [code ]
[設定値及び初期値 ]
•code
• [設定値 ] :64 | コマンドリファレンス  | 機器の設定

設定値 説明
en.ascii ( Rev.14.01 系以降  )、ascii ( 左記以外  ) 英語で表示する、文字コードは  ASCII
ja.sjis ( Rev.14.01 系以降  )、sjis ( 左記以外  ) 日本語で表示する、文字コードはシフト  JIS
ja.euc ( Rev.14.01 系以降  )、euc ( 左記以外  ) 日本語で表示する、文字コードは  EUC
ja.utf8 ( Rev.14.01 系以降  ) 日本語で表示する、文字コードは  UTF-8
• [初期値 ] :
• ja.sjis ( Rev.14.01 系以降  )
• ja.utf8 ( vRX シリーズ  )
• sjis ( 上記以外  )
[説明 ]
コンソールに表示する言語とコードを設定する。
本コマンドは一般ユーザでも実行できる。
vRX シリーズ  の仮想マシンコンソールでは、本コマンドの設定によらず表示言語が英語となる。
[ノート ]
本コマンドの設定は、 save コマンドで保存しなくても show config  コマンドで設定が表示される。
文字コード  UTF-8 は、 RTX5000 および  RTX3500 では使用不可能。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.22 コンソールの表示文字数の設定
[書式 ]
console  columns  col
no console  columns  [col]
[設定値及び初期値 ]
•col
• [設定値 ] : コンソールの表示文字数
• [設定値 ] :
• 80..200 ( RTX5000 、RTX3500 、RTX1210 Rev.14.01.34 以前、 RTX830 Rev.15.02.13 以前  )
• 80..4096 ( 上記以外の機種・リビジョン  )
• [初期値 ] : 80
[説明 ]
コンソールの  1 行あたりの表示文字数を設定する。
本コマンドは一般ユーザでも実行できる。
[ノート ]
本コマンドの設定は、 save コマンドで保存しなくても show config  コマンドで設定が表示される。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.23 コンソールの表示行数の設定
[書式 ]
console  lines  lines
no console  lines  [lines ]コマンドリファレンス  | 機器の設定  | 65

[設定値及び初期値 ]
•lines
• [設定値 ] :
設定値 説明
10..100 表示行数
infinity スクロールを止めない
• [初期値 ] : 24
[説明 ]
コンソールの表示行数を設定する。
このコマンドは一般ユーザでも実行できる。
[ノート ]
本コマンドの設定は、 save コマンドで保存しなくても show config  コマンドで設定が表示される。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.24 コンソールにシステムメッセージを表示するか否かの設定
[書式 ]
console  info info
no console  info [info]
[設定値及び初期値 ]
•info
• [設定値 ] :
設定値 説明
on 表示する
off 表示しない
• [初期値 ] : off
[説明 ]
コンソールにシステムメッセージを表示するか否かを設定する。
[ノート ]
キーボード入力中にシステムメッセージがあると表示画面が乱れるが、 [Ctrl] + r で入力中の文字列を再表示できる。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.25 SYSLOG を受けるホストの  IP アドレスの設定
[書式 ]
syslog  host host
no syslog  host [host]
[設定値及び初期値 ]
•host
• [設定値 ] : SYSLOG を受けるホストの  IP アドレス、またはホスト名  ( 空白で区切って最大  4 ヶ所まで設定可
能 )
• [初期値 ] : -66 | コマンドリファレンス  | 機器の設定

[説明 ]
SYSLOG を受けるホストの  IP アドレス、またはホスト名を設定する。
IP アドレスは  IPv4/IPv6 いずれのアドレスも設定できる。
syslog debug  コマンドが  on に設定されている場合、大量のデバッグメッセージが送信されるので、このコマンドで
設定するホストには十分なディスク領域を確保しておくことが望ましい。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.26 SYSLOG パケットの形式の設定
[書式 ]
syslog  format  type type
no syslog  format  type [type]
[設定値及び初期値 ]
•type
• [設定値 ] :
設定値 説明
rfc3164 RFC3164 形式の  SYSLOG パケットを送信する
rfc5424 RFC5424 形式の  SYSLOG パケットを送信する
yamaha 従来形式  (PRI+MSG) の SYSLOG パケットを送信す
る
• [初期値 ] : yamaha
[説明 ]
本機が送信する  SYSLOG パケットの形式を設定する。
タイムスタンプは自動的に設定され、ホスト名は  syslog format hostname  コマンドで設定している名前が使用され
る。
RFC3164 形式は次の要素で構成された形式となる。
要素 内容
PRI Facility+Severities
TIMESTAMP "Mmm dd hh:mm:ss" 形式のタイムスタンプ
HOSTNAME ホスト名  (1..63文字 )
MSG SYSLOG メッセージ  (最大半角 231文字 )
RFC5424 形式は次の要素で構成された形式となる。
要素 内容
PRI Facility+Severities
VERSION "1" で固定
TIMESTAMP "yyyy-mm-ddThh:mm:ss±offset" 形式のタイムスタンプ
HOSTNAME ホスト名  (1..63文字 )
APP-NAME "-" で固定
PROCID "-" で固定
MSGID "-" で固定
STRUCTURED-DATA "-" で固定
MSG SYSLOG メッセージ  (最大半角 231文字 )
yamaha 形式は次の要素で構成された形式となる。コマンドリファレンス  | 機器の設定  | 67

要素 内容
PRI Facility+Severities
MSG SYSLOG メッセージ  (最大半角 231文字 )
[ノート ]
RTX1300 は Rev.23.00.14 以降で使用可能。
RTX1220 は Rev.15.04.07 以降で使用可能。
RTX1210 は Rev.14.01.42 以降で使用可能。
RTX830 は Rev.15.02.31 以降で使用可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.27 SYSLOG ファシリティの設定
[書式 ]
syslog  facility  facility
no syslog  facility  [facility ]
[設定値及び初期値 ]
•facility
• [設定値 ] :
設定値 説明
0..23 facility 値
user 1
local0..local7 16..23
• [初期値 ] : user
[説明 ]
SYSLOG のファシリティを設定する。
[ノート ]
ファシリティ番号の意味づけは、各  SYSLOG サーバーで独自に行う。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.28 SYSLOG ヘッダーのホスト名の設定
[書式 ]
syslog  format  hostname  text name
no syslog  format  hostname  [text [ name ]]
[設定値及び初期値 ]
•name
• [設定値 ] : ホスト名  (半角  1...63 文字 )
• [初期値 ] : "機種名 -シリアル番号 "
[説明 ]
本機が送信する SYSLOG ヘッダーのホスト名を設定する。
syslog format type  コマンドが  rfc3164 または  rfc5424 に設定されているとき、 本コマンドで設定した値が使用される。
name  パラメーターにはアルファベット、数字、ハイフンのみが使用できる。
[ノート ]
RTX1300 は Rev.23.00.14 以降で使用可能。
RTX1220 は Rev.15.04.07 以降で使用可能。68 | コマンドリファレンス  | 機器の設定

RTX1210 は Rev.14.01.42 以降で使用可能。
RTX830 は Rev.15.02.31 以降で使用可能。
[適用モデル ]
RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.29 NOTICE タイプの  SYSLOG を出力するか否かの設定
[書式 ]
syslog  notice  notice
no syslog  notice  [notice ]
[設定値及び初期値 ]
•notice
• [設定値 ] :
設定値 説明
on 出力する
off 出力しない
• [初期値 ] : off
[説明 ]
各種フィルター機能等で検出したパケット情報を  SYSLOG で出力するか否かを設定する。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.30 INFO タイプの  SYSLOG 出力の設定
[書式 ]
syslog  info info
no syslog  info [info]
[設定値及び初期値 ]
•info
• [設定値 ] :
設定値 説明
on 出力する
off 出力する、ただし SYSLOG ホストへの送信は行わな
い
• [初期値 ] : on
[説明 ]
ルーターの動作状況に関する  SYSLOG 出力の設定をする。
[ノート ]
INFO タイプのログは  info パラメータの  on/off にかかわらずルーター内部に保持される。 syslog host  コマンドで設
定するホストへの送信は、  info パラメータが  on の場合にのみ行われる。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.31 DEBUG タイプの  SYSLOG を出力するか否かの設定
[書式 ]
syslog  debug  debug
no syslog  debug  [debug ]
[設定値及び初期値 ]
•debugコマンドリファレンス  | 機器の設定  | 69

• [設定値 ] :
設定値 説明
on 出力する
off 出力しない
• [初期値 ] : off
[説明 ]
ルーターのデバッグ情報を  SYSLOG で出力するか否かを設定する。
[ノート ]
debug  パラメータを  on にすると、大量のデバッグメッセージを送信するため、 syslog host  コマンドで設定するホス
ト側には十分なディスク領域を確保しておき、必要なデータが得られたらすぐに  off にする。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.32 SYSLOG ファイルの設定
[書式 ]
syslog  file [crypto  password ] [name= name ] [limit= size] [backup= num] [interval= interval ] [line= line]
no syslog  file [[crypto  password ] [name= name ] [limit= size] [backup= num] [interval= interval ] [line= line]]
[設定値及び初期値 ]
•crypto  : SYSLOG を暗号化して保存する場合の暗号化アルゴリズムの選択
• [設定値 ] :
設定値 説明
aes128 AES128 で暗号化する
aes256 AES256 で暗号化する
• [初期値 ] : -
•password
• [設定値 ] : ASCII 文字列で表したパスワード  (半角  8 文字以上、 32 文字以内 )
• [初期値 ] : -
•name
• [設定値 ] : SYSLOG ファイルの名前
• [初期値 ] : syslog.txt
•size
• [設定値 ] : SYSLOG ファイルの上限サイズ  (1..1024 単位 : MB)
• [初期値 ] : 10
•num
• [設定値 ] : バックアップファイルの上限数  (1..100)
• [初期値 ] : 10
•interval
• [設定値 ] : SYSLOG をファイルに書き出す間隔  (2..86400 単位 : 秒)
• [初期値 ] : 3600
•line
• [設定値 ] : SYSLOG をファイルに書き出す行数  (1000..10000 単位 : 行)
• [初期値 ] : 1000
[説明 ]
SYSLOG ファイルの保存について設定する。
SYSLOG ファイルは  /yamaha_sys に保存される。
crypto  および  password  を指定した場合、 SYSLOG は暗号化して保存される。暗号化する場合は  name  に .rtfg 拡張子
を含めるか、拡張子を省略した名前を指定する。拡張子を省略した場合は自動的にファイル名に  .rtfg 拡張子が追加70 | コマンドリファレンス  | 機器の設定

される。
暗号化しない場合は  name  に .rtfg 拡張子を含むファイル名は指定できない。
SYSLOG ファイルが  size で指定したサイズに達すると、バックアップファイルを作成する。バックアップファイル
名は  name  で指定したファイル名にバックアップ日時  (_yyyymmdd_hhmmss) を付加したものとなる。
• yyyy ... 西暦  (4 桁)
• mm ... 月 (2 桁)
• dd ... 日 (2 桁)
• hh ... 時 (2 桁)
• mm ... 分 (2 桁)
• ss ... 秒 (2 桁)
バックアップファイルの数が  num で指定した数に達した場合、もしくは空き容量がなくなった場合は、最も古いバ
ックアップファイルを削除してから新しいバックアップファイルを作成する。
[ノート ]
暗号化して保存したファイルは、 PC 上で  RT-FileGuard を使用して復号することができる。
[適用モデル ]
vRX シリーズ
4.33 SYSLOG ファイルのファイルサーバーへの保存設定
[書式 ]
syslog  mount-server  filename  name  [crypto  password ] [limit= size] [backup= num]
no syslog  mount-server  filename  [name  [crypto  password ] [limit= size] [backup= num]]
[設定値及び初期値 ]
•name
• [設定値 ] : ファイルサーバーのパスを含めた  SYSLOG ファイルの名前
• [初期値 ] : -
•crypto  : SYSLOG を暗号化して保存する場合の暗号化アルゴリズムの選択
• [設定値 ] :
設定値 説明
aes128 AES128 で暗号化する
aes256 AES256 で暗号化する
• [初期値 ] : -
•password
• [設定値 ] : ASCII 文字列で表したパスワード  (半角  8 文字以上、 32 文字以内 )
• [初期値 ] : -
•size
• [設定値 ] : SYSLOG ファイルの上限サイズ  (1..1024 単位 : MB)
• [初期値 ] : 10
•num
• [設定値 ] : バックアップファイルの上限数  (1..100)
• [初期値 ] : 10
[説明 ]
SYSLOG ファイルのファイルサーバー  (NFS、または  SMB) への保存について設定する。
ファイルサーバーは  mount  コマンドでマウントされている必要がある。本コマンドが設定されている場合であって
も、ファイルサーバーがマウントされていない状態では  SYSLOG は保存されない。
name  には  mount  コマンドで指定したプレフィックスからはじまるパスを含めた  SYSLOG ファイルの名前を指定す
る。
• (例) server:/syslog/log.txt
crypto  および  password  を指定した場合、 SYSLOG は暗号化して保存される。暗号化する場合は  name  に .rtfg 拡張子
を含めるか、拡張子を省略した名前を指定する。拡張子を省略した場合は自動的にファイル名に  .rtfg 拡張子が追加コマンドリファレンス  | 機器の設定  | 71

される。
暗号化しない場合は  name  に .rtfg 拡張子を含むファイル名は指定できない。
SYSLOG ファイルが  size で指定したサイズに達すると、バックアップファイルを作成する。バックアップファイル
名は  name  で指定したファイル名にバックアップ日時  (_yyyymmdd_hhmmss) を付加したものとなる。
• yyyy ... 西暦  (4 桁)
• mm ... 月 (2 桁)
• dd ... 日 (2 桁)
• hh ... 時 (2 桁)
• mm ... 分 (2 桁)
• ss ... 秒 (2 桁)
バックアップファイルの数が  num で指定した数に達した場合、もしくは空き容量がなくなった場合は、最も古いバ
ックアップファイルを削除してから新しいバックアップファイルを作成する。
以下の設定については、 syslog file  コマンドの設定に従う。
• SYSLOG をファイルに書き出す間隔
• SYSLOG をファイルに書き出す行数
syslog file  コマンドの  interval オプションで指定した時間が経過、または  line オプションで指定した行数だけ
SYSLOG が出力されたとき、ファイルサーバーの  SYSLOG ファイルに  SYSLOG を書き出す。
[ノート ]
暗号化して保存したファイルは、 PC 上で  RT-FileGuard を使用して復号することができる。
[適用モデル ]
vRX シリーズ
4.34 SYSLOG を送信する時の始点  IP アドレスの設定
[書式 ]
syslog  local  address  address
no syslog  local  address  [address ]
[設定値及び初期値 ]
•address
• [設定値 ] : 始点  IP アドレス
• [初期値 ] : -
[説明 ]
SYSLOG パケットを送信する時の始点  IP アドレスを設定する。始点  IP アドレスが設定されていない時は、通常の
UDP パケット送信ルールに従い、出力インタフェースの  IP アドレスを利用する。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.35 SYSLOG パケットの始点ポート番号の設定
[書式 ]
syslog  srcport  port
no syslog  srcport  [port]
[設定値及び初期値 ]
•port
• [設定値 ] : ポート番号  (1..65535)
• [初期値 ] : 514
[説明 ]
本機が送信する  SYSLOG パケットの始点ポート番号を設定する。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX83072 | コマンドリファレンス  | 機器の設定

4.36 SYSLOG に実行コマンドを出力するか否かの設定
[書式 ]
syslog  execute  command  switch
no syslog  execute  command  [switch ]
[設定値及び初期値 ]
•switch
• [設定値 ] :
設定値 説明
on 実行されたコマンドをログに残す
off 実行されたコマンドをログに残さない
• [初期値 ] : off
[説明 ]
実行されたコマンドを  SYSLOG で出力するか否かを設定する。
[ノート ]
コマンド実行に成功した場合、そのコマンド入力をログに出力する。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.37 インタフェースパケットのダンプを  SYSLOG へ出力するか否かの設定
[書式 ]
packetdump  interface  count
packetdump  pp peer_num  count
[設定値及び初期値 ]
•interface
• [設定値 ] :
• LAN インターフェース名
• WAN インターフェース名
• vRX シリーズ、 RTX5000 、および  RTX3500 では指定不可能
• [初期値 ] : -
•peer_num
• [設定値 ] :
•相手先情報番号
• anonymous
• [初期値 ] : -
•count
• [設定値 ] :
設定値 説明
1..21474836 回数
off ダンプを行わない
infinity 回数制限をかけない
• [初期値 ] : off
[説明 ]
syslog debug  onが設定されている場合のみ、指定したインターフェースのパケットをダンプする。
[ノート ]
本コマンドの設定は、 show config  コマンドで表示されない。コマンドリファレンス  | 機器の設定  | 73

本コマンドの設定は、 save コマンドで保存されない。電源再投入や再起動により、本コマンドの設定がクリアされ
る。
count  パラメータを  infinity にすると、大量のパケットダンプメッセージが出力されるため機器の負荷が高くなる。
すべてのパケットがダンプされるわけではない。パケットロスすることもある。
ファストパスで処理されたパケットは出力されない。
[拡張ライセンス対応 ]
拡張ライセンス をインポートすると、以下のパラメーターに入力できる上限値が拡張される。
•peer_num
ライセンス名拡張後の上限値
( ライセンス本数ごとの値  )
1本 2本 3本 4本 5本
YSL-VPN-EX1 100 - - - -
YSL-VPN-EX2 150
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.38 TELNET サーバー機能の  ON/OFF の設定
[書式 ]
telnetd  service  service
no telnetd  service
[設定値及び初期値 ]
•service
• [設定値 ] :
設定値 説明
on TELNET サーバー機能を有効にする
off TELNET サーバー機能を停止させる
• [初期値 ] : on
[説明 ]
TELNET サーバー機能の利用を選択する。
[ノート ]
TELNET サーバーが停止している場合、 TELNET サーバーはアクセス要求に一切応答しない。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.39 TELNET サーバー機能の  listen ポートの設定
[書式 ]
telnetd  listen  port
no telnetd  listen
[設定値及び初期値 ]
•port
• [設定値 ] : TELNET サーバー機能の待ち受け  (listen) ポート番号  (1..65535)
• [初期値 ] : 23
[説明 ]
TELNET サーバー機能の  listen ポートを選択する。74 | コマンドリファレンス  | 機器の設定

[ノート ]
telnetd は、 TCP の 23 番ポートで待ち受けしているが、本コマンドにより待ち受けポートを変更することができる。
ただし、待ち受けポートを変更した場合には、ポート番号が変更されても、 TELNET オプションのネゴシエーショ
ンが行える  TELNET クライアントを用いる必要がある。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.40 TELNET サーバーへアクセスできるホストの設定
[書式 ]
telnetd  host ip_range  [ip_range ...]
telnetd  host any
telnetd  host none
telnetd  host lan
no telnetd  host
[設定値及び初期値 ]
•ip_range  : TELNET サーバーへのアクセスを許可するホストの  IP アドレスまたはニーモニック
• [設定値 ] :
設定値 説明
1 個の  IP アドレスまたは間にハイフン  (-) をはさん
だ IP アドレス  ( 範囲指定  )、およびこれらを任意に並
べたもの指定したホストからのアクセスを許可する
lanN LAN インターフェースからのアクセスを許可する
wan1 WAN インターフェースからのアクセスを許可する
( vRX シリーズ、 RTX5000 、および  RTX3500 では指
定不可能  )
bridge1 ブリッジインターフェースからのアクセスを許可す
る
vlanN VLAN インターフェースからのアクセスを許可する
( vRX シリーズ  では指定不可能  )
lanN/M タグ  VLAN インターフェースからのアクセスを許可
する
( vRX シリーズ  では指定不可能  )
• [初期値 ] : -
•any
• [設定値 ] : すべてのホストからのアクセスを許可する
• [初期値 ] : any
•none
• [設定値 ] : すべてのホストからのアクセスを禁止する
• [初期値 ] : -
•lan
• [設定値 ] : すべての  LAN 側ネットワーク内からのアクセスを許可する
• [初期値 ] : -
[説明 ]
TELNET サーバーへのアクセスを許可するホストを設定する。
[ノート ]
設定後の新しい  TELNET 接続から適用される。
ブリッジインターフェースは、 vRX Amazon EC2 版、および  RTX5000 / RTX3500 Rev.14.00.11 以前では指定不可能。
lan キーワードは  RTX5000 / RTX3500 Rev.14.00.25 以前、および  RTX1210 Rev.14.01.15 以前では指定不可能。コマンドリファレンス  | 機器の設定  | 75

[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.41 TELNET サーバーへ同時に接続できるユーザ数の設定
[書式 ]
telnetd  session  num
no telnetd  session
[設定値及び初期値 ]
•num
• [設定値 ] : 同時接続数  (1...8)
• [初期値 ] : 8
[説明 ]
TELNET に同時に接続できるユーザ数を設定する。
[ノート ]
設定を変更したときに変更した値よりも多くのユーザが接続している場合は、接続しているユーザはそれを維持す
ることができるが、接続しているユーザ数が設定値より少なくなるまで新たな接続は許可しない。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.42 マスタクロック用インタフェースの設定
[書式 ]
line masterclock  interface  [interface ]
no line masterclock
[設定値及び初期値 ]
•interface
• [設定値 ] :
設定値 説明
BRI インタフェース名 マスタークロックを得る  BRI インタフェースの選択
PRI インタフェース名 マスタークロックを得る  PRI インタフェースの選択
auto 自動選択
• [初期値 ] : auto
[説明 ]
RTX5000 と RTX3500 では、各モジュール毎にそれぞれ  1 つのマスタクロックに同期している必要がある。
マスタクロックは通常、 BRI/PRI インタフェースに接続された  WAN 回線から供給される。
このコマンドでは、どのインタフェースからマスタクロックを得るかを指定することができる。 RTX5000 と
RTX3500 では各モジュール毎にマスタクロックが必要なため、接続されているモジュールの数だけ  interface  を指定
する必要がある。それ以外の機種では複数指定はできない。
auto を設定した場合は、実際に回線が接続されている  BRI/PRI インタフェースの中からマスタクロックを供給する
インタフェースを自動的に選択する。選択基準は、同じ回線種別の中ではより若番のポート番号を持つインタフェ
ースを優先する。マスタとなるインタフェースの回線がダウンしてクロックを得られなくなった場合には、同じモ
ジュール内のインタフェースを優先して、次のマスタクロック供給インタフェースを選択する。すべての回線がダ
ウンしている場合には内部クロックを用いたフリーラン状態となる。
インタフェースを指定している場合には、そのインタフェースからマスタクロックを得る。そのインタフェースに
接続されている回線がダウンした場合には、内部クロックを用いたフリーラン状態となる。
[ノート ]
すべての  BRI/PRI はマスタクロックに同期するので、それらに接続されている回線もお互いに同期している必要が
ある。日本国内の通信事業者が提供する実回線は、すべて  NTT を基準として同期しているはずなので、その点では
問題はない。一部の  BRI/PRI に、構内網など独自に構築した回線や、疑似交換機などを接続する場合には、マスタ
クロックと同期していない回線ではクロックシフトによるビットエラーが発生する可能性があることに注意しなく
てはいけない。76 | コマンドリファレンス  | 機器の設定

[適用モデル ]
RTX5000, RTX3500
4.43 CPU 使用率の閾値の設定
[書式 ]
system  cpu threshold  off
system  cpu threshold  cpu1  cpu2  [duration= duration ]
no system  cpu threshold  [cpu1  [cpu2  [duration= duration ]]]
[設定値及び初期値 ]
• off
• [設定値 ] : 警告を発しない
• [初期値 ] : -
•cpu1
• [設定値 ] : 警告を発する CPU使用率の閾値の上限  (0..100 %)
• [初期値 ] : -
•cpu2
• [設定値 ] : 警告を発する CPU使用率の閾値の下限  (0..100 %)
• [初期値 ] : -
•duration
• [設定値 ] : 判定時間  (1..300 秒)
• [初期値 ] : 1
[初期設定 ]
system cpu threshold off
[説明 ]
CPU使用率を監視して、 cpu1  以上または cpu2  以下の使用率になると  SYSLOG や SNMP トラップで警告を発する。
SNMP トラップ送信するためには  snmp trap cpu threshold on を設定する必要がある。
RTX5000 、RTX3500 は Rev.14.00.29 以降で使用可能。  RTX1210 は Rev.14.01.34 以降で使用可能。  RTX830 は
Rev.15.02.10 以降で使用可能。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.44 メモリ使用率の閾値の設定
[書式 ]
system  memory  threshold  off
system  memory  threshold  memory1  memory2  [duration= duration ]
no system  memory  threshold  [memory1  [memory2  [duration= duration ]]]
[設定値及び初期値 ]
• off
• [設定値 ] : 警告を発しない
• [初期値 ] : -
•memory1
• [設定値 ] : 警告を発するメモリ使用率の閾値の上限  (0..100 %)
• [初期値 ] : -
•memory2
• [設定値 ] : 警告を発するメモリ使用率の閾値の下限  (0..100 %)
• [初期値 ] : -
•duration
• [設定値 ] : 判定時間  (1..300 秒)
• [初期値 ] : 1コマンドリファレンス  | 機器の設定  | 77

[初期設定 ]
system memory threshold off
[説明 ]
メモリ使用率を監視して、 memory1  以上または memory2  以下の使用率になると  SYSLOG や SNMP トラップで警告を
発する。
SNMP トラップ送信するためには  snmp trap memory threshold on を設定する必要がある。
RTX5000 、RTX3500 は Rev.14.00.29 以降で使用可能。  RTX1210 は Rev.14.01.34 以降で使用可能。  RTX830 は
Rev.15.02.10 以降で使用可能。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.45 温度監視の閾値の設定
[書式 ]
system  temperature  threshold  t1 t2
no system  temperature  threshold  [t1 [t2]]
[設定値及び初期値 ]
•t1
• [設定値 ] : 警告を発する温度  (0..100 ℃)
• [初期値 ] :
• 70(RTX5000 、RTX3500)
• 80( 上記以外の機種  )
•t2
• [設定値 ] : 警告を解除する温度  (0..100 ℃)
• [初期値 ] :
• 65(RTX5000 、RTX3500)
• 75( 上記以外の機種  )
[説明 ]
本体内部の温度を監視して、 t1 以上の温度になると  SYSLOG や ALM ランプで警告を発する。一度、警告が発せら
れると、温度が  t2 を下回らない限り、 ALM ランプは消えない。
[適用モデル ]
RTX5000, RTX3500, RTX1220, RTX1210
4.46 ファストパス機能の設定
[書式 ]
ip routing  process  process
no ip routing  process
[設定値及び初期値 ]
•process
• [設定値 ] :
設定値 説明
fast ファストパス機能を利用する
normal ファストパス機能を利用せず、 すべてのパケットをノ
ーマルパスで処理する
• [初期値 ] : fast
[説明 ]
パケット転送をファストパス機能で処理するか、ノーマルパス機能で処理するかを設定する。78 | コマンドリファレンス  | 機器の設定

[ノート ]
ファストパスでは使用できる機能に制限は無いが、取り扱うパケットの種類によってはファストパスで処理されず
ノーマルパスで処理されることもある。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.47 LAN インタフェースの動作設定
[書式 ]
lan shutdown  interface  [port...]
no lan shutdown  interface  [port...]
[設定値及び初期値 ]
•interface
• [設定値 ] : LAN インタフェース名
• [初期値 ] : -
•port
• [設定値 ] : ポート番号  ( スイッチングハブ内蔵機種のみ  )
• [初期値 ] : -
[説明 ]
LAN インタフェースを利用できないようにする。このコマンドを設定した  LAN インタフェース、あるいはスイッ
チングハブのポートでは、 LAN ケーブルを接続してもリンクアップしなくなる。
[ノート ]
RTX3510 では、このコマンドを実行すると、すべての  LAN インタフェースが同時にリセットされる。
RTX840、RTX830 では、 lan1 または  lan2 に対してこのコマンドを実行すると、 lan1 および  lan2 インタフェースが同
時にリセットされる。
その他の機種では、このコマンドを実行すると、指定の  LAN インタフェースのみがリセットされる。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1220, RTX1210, RTX840, RTX830
4.48 LAN インタフェースのリンクアップ後の送信抑制時間の設定
[書式 ]
lan linkup  send-wait-time  interface  time
no lan linkup  send-wait-time  interface  [time]
[設定値及び初期値 ]
•interface
• [設定値 ] : LAN インタフェース名
• [初期値 ] : -
•time
• [設定値 ] : 送信抑制秒数  (0..10)
• [初期値 ] : 0 ( 抑制しない  )
[説明 ]
リンクアップ後の送信抑制時間を設定し、パケットの送信を抑制する。送信を抑制されたパケットはキューに保存
され、 リンクアップから設定秒数の経過後に送信される。保存先のキュー長は queue  interface  length  コマンドの設定
に従う。
[ノート ]
リンクアップ直後に  Gratuitous ARP や IPv6 neighbor solicitation 等のパケットがルーターから送信されるが、 その送信
が早過ぎるために対向機器側で受信できない場合は、この抑制時間を適宜設定し送信を遅延させることで対向機器
側で受信できるようになる。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830コマンドリファレンス  | 機器の設定  | 79

4.49 ポートミラーリング機能の設定
[書式 ]
lan port-mirroring  interface  mirror  direction  port ... [direction  port ...]
lan port-mirroring  mirror  direction  port ... [direction  port ...]
no lan port-mirroring  interface
no lan port-mirroring
[設定値及び初期値 ]
•interface
• [設定値 ] : LAN インタフェース名
• [初期値 ] : -
•mirror
• [設定値 ] : ミラーリングパケットを送出させるポート番号
• [初期値 ] : -
•direction  : 観測対象のパケットの方向
• [設定値 ] :
設定値 説明
in 入る方向
out 出る方向
• [初期値 ] : -
•port
• [設定値 ] : 観測対象とするポート番号
• [初期値 ] : -
[説明 ]
スイッチングハブインタフェースにおいて、特定ポートでの通信を他のポートで観測できる機能を設定する。
LAN インタフェース名にはスイッチングハブを持つインタフェースだけが指定可能である。
[ノート ]
LAN 分割機能との併用はできない。
スニファーポートから送出されるパケットの送出レートが回線速度を超えないようにする必要がある。ミラーリン
グパケットがスニファーポートから送出しきれない場合、他のポート間での通信に影響を与えることがある。
第2書式、および第 4書式はフレキシブル  LAN/WAN ポートに対応した機種のみで有効である。フレキシブル
LAN/WAN ポートに対応した機種では、複数の  LAN インタフェースにまたがるミラーリングを行うことができる。
ミラーリングパケット以外の通信パケットを除外したい場合、 IP アドレスを設定していない LAN インタフェースに
所属するポートをスニファーポートとするとよい。
RTX5000 、RTX3500 は、このコマンドを実行すると、対象の  LAN インタフェースのみがリセットされる。
RTX1220 、RTX1210 は、このコマンドを実行すると、 lan1 インタフェースのみがリセットされる。
RTX840、RTX830 は、このコマンドを実行すると、 lan1 および  lan2 インタフェースが同時にリセットされる。
RTX3510 、RTX1300 は、このコマンドを実行すると、全ての  LAN インタフェースが同時にリセットされる。
[設定例 ]
例 1) ポート  4 でポート  1 受信パケットを観測
# lan port-mirroring lan1 4 in 1
例 2) ポート  4 でポート  1 送受信パケットとポート  2 送信パケットを観測
# lan port-mirroring lan1 4 in 1 out 1 2
例 3) RTX1300 で、 LAN2(ポート 9) で送受信されるパケットを LAN8(ポート 8) で観測
# lan flexible-port lan1=1-7 lan2=9 lan3=10 lan8=8
# lan port-mirroring 8 in 9 out 9
[適用モデル ]
RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX83080 | コマンドリファレンス  | 機器の設定

4.50 LAN インターフェースの動作タイプの設定
[書式 ]
lan type interface_with_swhub  speed  [port] [speed  [port]...] [ option =value ...]
lan type interface_with_swhub  option =value  [option =value ...]
lan type interface_without_swhub  speed  [option =value ...]
lan type interface_without_swhub  option =value  [option =value ...]
lan type interface  mtu=mtu
no lan type interface  [...]
[設定値及び初期値 ]
•interface_with_swhub
• [設定値 ] : スイッチングハブを持つ  LAN インターフェース名
• [初期値 ] : -
•interface_without_swhub
• [設定値 ] : スイッチングハブを持たない  LAN インターフェース名
• [初期値 ] : -
•interface
• [設定値 ] : LAN インターフェース名
• [初期値 ] : -
•speed  : LAN 速度および動作モード
• [設定値 ] :
設定値 説明 備考
auto 速度自動判別 -
10g-fdx 10GBASE-T 全二重
RTX3510 でのみ指定可能 5g-fdx 5GBASE-T 全二重
2.5g-fdx 2.5GBASE-T 全二重
1000-fdx 1000BASE-T 全二重
vRX シリーズ  では指定不可能100-fdx 100BASE-TX 全二重
100-hdx 100BASE-TX 半二重
10-fdx 10BASE-T 全二重
10-hdx 10BASE-T 半二重
省略 省略時は  auto -
• [初期値 ] : -
•port
• [設定値 ] : スイッチングハブのポート番号
• [設定値 ] :
•省略時は全ポート
• [初期値 ] : -
•option=value  : オプション機能
• [設定値 ] :
• mtu
•インターフェースで送受信できる最大データ長
• auto-crossover
•オートクロスオーバー機能
設定値 説明
on オートクロスオーバー機能を有効にする
off オートクロスオーバー機能を無効にするコマンドリファレンス  | 機器の設定  | 81

• macaddress-aging
• MAC アドレスエージング機能
設定値 説明
秒数 エージング時間
on MAC アドレスエージング機能を有効にする
off MAC アドレスエージング機能を無効にする
• vRX シリーズ、 RTX3510 では指定不可能
• port-based-option
• LAN 分割機能、ポート分離機能
設定値 説明
divide-network LAN 分割機能を有効にする
split-into-split_pattern ポート分離機能を有効にする (基本機能 )
X1,X2,X3,X4(X1..X4 は1..4の数字を羅列し末尾
に"+"もしくは "-"をつけたもの )ポート分離機能を有効にする (拡張機能 )
off LAN 分割機能、ポート分離機能を無効にする
• vRX シリーズ  では指定不可能
• speed-downshift
•速度ダウンシフト機能
設定値 説明
on 速度ダウンシフト機能を有効にする
off 速度ダウンシフト機能を無効にする
• vRX シリーズ  では指定不可能
• energy-saving
•省電力機能
設定値 説明
on 省電力機能を有効にする
off 省電力機能を無効にする
• vRX シリーズ、 RTX5000 、および  RTX3500 では指定不可能
• [初期値 ] :
• mtu=1500
• auto-crossover=on
• macaddress-aging=on ( 秒数を指定できない機種 )
• macaddress-aging=300 ( 秒数を指定できる機種 )
• port-based-option=off
• speed-downshift=on
• energy-saving=off
[説明 ]
指定した  LAN インターフェースの速度と動作モードの種類、およびオプション機能について設定する。
スイッチングハブを持つ  LAN インターフェースについては、ポート毎に速度と動作モードを指定できる。
○mtu
インターフェースで送受信できる最大データ長を指定する。データ長には  MAC ヘッダと  FCS は含まれない。ま
た、タグ  VLAN 時のタグ長  (4 バイト  ) も含まれない。
指定できるデータ長の範囲は  LAN インターフェースによって異なる。ジャンボフレームをサポートしていない
LAN インターフェースでは、 64～1500 の範囲となる。ジャンボフレームをサポートしている  LAN インターフェー
スでは、以下のようになる。82 | コマンドリファレンス  | 機器の設定

機種 インターフェース 設定範囲
RTX3510 LAN1、LAN2、LAN3、LAN4 64～10218
RTX3500 、RTX5000 LAN1、LAN2、LAN3、LAN4 64～9578
RTX1300 LAN1～LAN8 64～10218
インターフェースの  mtu を設定して、かつ、 ip mtu  コマンドまたは  ipv6 mtu  コマンドの設定が初期値のままの場
合、IPv4 や IPv6 での  MTU にはインターフェースの  mtu が利用される。一方、 ip mtu  コマンドまたは  ipv6 mtu  コマ
ンドが設定されていて、かつ、その設定値がインターフェースの  mtu より小さい場合、 ip mtu  コマンドまたは ipv6
mtu コマンドの設定値が  MTU として利用される。インターフェースの  mtu も含めてすべて設定されていない時に
は、初期値である  1500 が利用される。
○オートクロスオーバー機能
LAN ケーブルがストレートケーブルかクロスケーブルかを自動的に判定して接続する機能。この機能が有効になっ
ていると、ケーブルのタイプがどのようなものであるかを気にする必要が無くなる。
RTX1300 では本コマンドの代わりに  lan port type  コマンドを用いて設定する。
○MAC アドレスエージング機能
スイッチングハブを持つ  LAN インターフェースでのみ利用できる。
RTX3510 、RTX1300 では本コマンドの代わりに  switching-hub macaddress-aging  コマンドを用いて設定する。
スイッチングハブが持つ  MAC アドレステーブル内のエントリを、一定時間で消去していく機能。この機能を  off に
すると、一度スイッチングハブが記憶した  MAC アドレスは自動的に消去されないのはもちろん、 clear switching-
hub macaddress  コマンドを実行しても消去されない。エントリが消去されるのは、 この機能を  on に設定し直した時
だけになる。
以下の機種では設定値に秒数を指定することができる。ただし、コマンドの設定値と実際に消去されるまでの時間
に誤差が生じる場合がある。
RTX1220 、RTX1210 では、設定した値からその  2 倍の時間までの間に消去される。
RTX840、RTX830 では、 13 秒未満の値を設定しても、実際に消去される時間が  13 秒より短くなることはない。
機種 設定範囲
RTX5000 、RTX3500 、RTX840、RTX830 1～3825
RTX1220 、RTX1210 10～630
秒数を指定できる機種で  on を入力すると初期値である 300に変換される。
MAC アドレステーブルの大きさは以下の通りとなる。
機種 最大エントリ数
RTX5000 、RTX3500 、RTX1220 、RTX1210 、RTX840、
RTX8308192
○LAN 分割機能
スイッチングハブを持つ  LAN インターフェースでのみ利用できる。
LAN 分割機能には基本機能と拡張機能がある。
基本機能では、スイッチングハブの各ポートが個別の  LAN インターフェースとして動作する。各インターフェース
にはそれぞれ個別の  IP アドレスを付与でき、その間でのルーティグも可能になる。
例えば  RTX830 は通常は  LAN インターフェースを  2 つ持つルーターなのだが、 LAN 分割機能を使えば  LAN インタ
ーフェースを  5 個利用できることになる。
拡張機能では、スイッチングハブの各ポートを自由に組み合わせて  1 つの  LAN インターフェース  (VLAN インターコマンドリファレンス  | 機器の設定  | 83

フェース  ) とすることができる。
同一の  VLAN インターフェースに所属するポート間はスイッチとして動作する。
LAN 分割で使用するインターフェース名は基本機能と拡張機能で異なる。
基本機能における  LAN インターフェースのインターフェース名は元の  LAN インターフェース名にピリオドとポー
ト番号をつなげることで表される。
例えば、 RTX830 は lan1 が 4 ポートのスイッチングハブを持つ  LAN インターフェースなので、以下の  LAN インタ
ーフェースが使用できるようになる。
ポート番号 インターフェース名
1 lan1.1
2 lan1.2
3 lan1.3
4 lan1.4
拡張機能では、 LAN インターフェースのインターフェース名として  vlan1、vlan2、vlan3・・・ (VLAN インターフェ
ース  ) を使用する。基本機能とは異なり、 VLAN インターフェースは特定のポートと関連付けられてはいない。
vlan port mapping  コマンドを用いて、スイッチングハブの各ポートがどの  VLAN インターフェースに所属するかを
設定することで、分割方法を自由に変更することができる。
同時にいくつの  VLAN インターフェースを使用できるかは機種ごとに異なり、以下の通りとなる。
機種 設定できる  VLAN インターフェース
RTX5000 、RTX3510 、RTX3500 vlan1-vlan4 (LAN1) 、vlan5-vlan8 (LAN2)
RTX1220 、RTX1210 vlan1-vlan8
RTX840、RTX830 vlan1-vlan4
LAN 分割機能を有効にした場合、 lan1 インターフェースに対する設定は、 lan1.1( 基本機能の場合  ) もしくは
vlan1( 拡張機能の場合  ) に引き継がれる。
LAN 分割で使用する  LAN インターフェースの  MAC アドレスは元の  LAN インターフェースの  MAC アドレスに一
致する。したがって上記の例では、 lan1.1-lan1.4 や vlan1-vlan4 の MAC アドレスはすべて  lan1 と同一になる。
○ポート分離機能
スイッチングハブを持つ  LAN インターフェースでのみ利用できる。
通常は、スイッチングハブの各ポートは他のポートと制限無く通信できるが、ポート分離機能を利用すると、ポー
ト間での通信を制限することができる。
ポート分離機能には基本機能と拡張機能があり、基本機能ではポート間での通信を制限しつつ、ルーターを経由し
た通信が可能であり、拡張機能では指定ポートからのルーターを経由した通信も制限することができる。
基本機能では、ポートをグループに分離し、グループ内の通信およびルーターとの通信は可能としつつ、他のグル
ープのポートとは通信を制限できる。
LAN 分割機能とは異なり、ポート分離機能によって  LAN インターフェースが増減することはない。分離されたポ
ートはすべて同じ  LAN インターフェースとして認識され、同一の  IP アドレスを持つ。
ポートの分離パターンは、ポート番号の数字の並びで分離する部分に  ":" を入れて記述する。例を以下に示す。
スイッチングハブのポート数が  4 の場合
split_patternポート
説明
1 2 3 4
1：234 ←→ ←－ －－ －→ポート  1 とその
他
1：2：34 ←→ ←→ ←－ －→ポート  1、ポート
2 とその他
1：2：3：4 ←→ ←→ ←→ ←→ 全ポートを分離
RTX1220 、RTX1210 では、最後のグループの記述を省略することができる。以下の表では、省略形を括弧内に示す。84 | コマンドリファレンス  | 機器の設定

split_patt
ernポート
説明
1 2 3 4 5 6 7 8
123:45678
(123)←－ －－ －→ ←－ －－ －－ －－ －→ポート  1
－3 とそ
の他
1:234:567
8 (1:234)←→ ←－ －－ －→ ←－ －－ －－ －→ポート  1
とポート
2－4 とそ
の他
12:34:56:7
8
(12:34:56)←－ －→ ←－ －→ ←－ －→ ←－→ －→ポート  1、
2、ポート
3、4、ポ
ート  5、6
とその他
1:2:3:4:5:6
:7:8
(1:2:3:4:5:
6:7)←→ ←→ ←→ ←→ ←→ ←→ ←→ ←→全ポート
を分離
省略形でコマンドを入力しても、 show config  の出力には省略しない形で表示される。
同一  LAN インターフェースにおけるプライマリアドレスのネットワークとセカンダリアドレスのネットワーク間
の通信はルーターを経由するので、他のグループとの通信も可能である。
拡張機能では、ポート毎に受信したパケットを転送するポートを指定することで、ポート間やルーター自身、ルー
ターを経由した通信を制限することができる。  具体的には、以下のように設定する。
  lan type lan1 port-based-option=X1,X2,X3,X4
Xn(n = 1..4) にはポート nで受信したパケットを転送するポート番号を羅列し、ルーター自身との通信・ルーターを
経由した通信を許可する場合は "+"、禁止する場合は "-"を末尾につける。ただし "+"は省略可能である。
"-"を指定した場合、そのポートで受信したパケットはルーティングされなくなる。またそのポートに接続された機
器はルーターとの通信ができなくなる。
例えば以下の設定の場合、ポート 1から 3で受信したパケットはポート 4とルーターに転送され、ポート 4で受信
したパケットはポート 1から 3に転送されるがルーターには転送されない。つまり、ポート 1と4、ポート 2と4、
ポート 3と4の3つのグループに分離された状態となり、ポート 1から 3はお互いのポートと通信できずポート 4
とのみ通信可能になる。また、ポート 1から 3はルーターと通信可能だが、ポート 4は通信不可であり受信パケッ
トもルーティングされない。
  lan type lan1 port-based-option=4,4,4,123-
○速度ダウンシフト機能
on に設定すると  1000BASE-T で使用できないケーブルを接続された時に、速度を落としてリンクを試みる。
RTX1300 では本コマンドの代わりに  lan port type  コマンドを用いて設定する。
○省電力機能
on に設定すると、通信していない  LAN ポートの消費電力を  EEE (Energy Efficient Ethernet) により抑えることができ
る。接続する機器も  EEE をサポートしている必要がある。
RTX1300 では本コマンドの代わりに  lan port type  コマンドを用いて設定する。
[ノート ]
本コマンドの実行後、 LAN インターフェースのリセットが自動で行われ、その後に設定が有効となる。
RTX3510 、RTX1300 では、このコマンドを実行すると、すべての  LAN インタフェースが同時にリセットされる。
RTX840、RTX830 では、 lan1 または  lan2 に対してこのコマンドを実行すると、 lan1 および  lan2 インタフェースが同
時にリセットされる。
その他の機種では、このコマンドを実行すると、指定の  LAN インタフェースのみがリセットされる。コマンドリファレンス  | 機器の設定  | 85

第 1、第  2、第  4 書式は、 vRX シリーズ  および  RTX1300 では使用不可能。
第 3 書式は、 RTX1300 では使用不可能。
第 5 書式は、 vRX シリーズ  では使用不可能。
RTX1300 は、第 5書式のみ使用可能である。  macaddress-aging オプションは  switching-hub macaddress-aging  コマン
ドで設定できる。 port-based-option のうち  divide-network(LAN 分割機能 )は lan flexible-port  コマンドで代用できる。
split-into( ポート分離機能 )は使用できない。その他のオプションは  lan port type  コマンドで設定できる。
[設定例 ]
1.スイッチングハブを持つ  LAN インターフェースで、ポート  1、2 は 100BASE-TX 全二重、その他のポートはオー
トネゴシエーションで接続する。
# lan type lan1 100-fdx 1 2
2.スイッチングハブを持つ  LAN インターフェースで、ポート  1 は 100BASE-TX 全二重、その他のポートはオート
ネゴシエーションで接続し、 LAN 分割機能を使用する。
# lan type lan1 100-fdx 1 port-based-option=divide-network
3.スイッチングハブを持つ  LAN インターフェースで、すべてのポートでオートネゴシエーションで接続する。ポ
ート分離機能でポートを分離する。
• 4 つのポートを持つスイッチングハブの  1、2 と 3、4 を分離する場合
# lan type lan1 port-based-option=split-into-12:34
• 8 つのポートを持つスイッチングハブの  1、2、3 と 4、5、6 とその他を分離する場合
# lan type lan1 port-based-option=split-into-123:456:78
•分離パターンを省略して記述する場合
# lan type lan1 port-based-option=split-into-123:456
4.LAN1 で、ジャンボフレーム  (9000 バイト  ) を使用できるようにする。
# lan type lan1 auto mtu=9000
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.51 スタティックリンクアグリゲーションの設定
[書式 ]
lan link-aggregation  static  link_id  interface :port interface :port [interface :port ...]
no lan link-aggregation  static  link_id  [interface :port ...]
[設定値及び初期値 ]
•link_id
• [設定値 ] : リンク識別子  (1..10)
• [初期値 ] : -
•interface
• [設定値 ] : スイッチングハブを持つ  LAN インタフェース名
• [初期値 ] : -
•port
• [設定値 ] : 集約対象のポート番号
• [初期値 ] : -
[説明 ]
スイッチングハブを持つ  LAN インタフェース内の複数のポートの物理リンクを集約し、一つの論理リンクを形成す
る。集約対象ポートに接続された複数の  LAN ケーブルは、 仮想的に  1 本の  LAN ケーブルと見なされるようになる。
なお、 集約されたポートの中で実際にパケットが出力されるポートは、 パケットの宛先  MAC アドレスと送信元  MAC
アドレスを基に決められる。
同一の  LAN インタフェースに属するポートを集約させることができる。一つのポートを複数の論理リンク  (複数の
リンク識別子 ) に従属させることはできない。86 | コマンドリファレンス  | 機器の設定

集約対象の各ポートで学習した  MAC アドレスは同一の論理リンクに属する全ポートで共有され、 常に一番大きいポ
ート番号の  MAC アドレステーブルに保持される。これは、 一番大きいポート番号の物理リンクがダウンしている状
態においても同じである。そのため、 show status switching-hub macaddress  コマンドでは常に一番大きいポート番号
の欄にまとめて  MAC アドレスが表示される。 show arp  コマンドや  ARP ログで表示されるポート番号も同様に、
MAC アドレスを学習したポートが集約対象になっている場合は常に一番大きいポート番号となる。
LAN 分割機能、ポート分離機能、ポートミラーリング機能との併用が可能である。ただし、 LAN 分割機能またはポ
ート分離機能と併用する場合は、分割または分離したスイッチポートと同一のセグメントに属するポートのみを集
約させることができる。
フレキシブル  LAN/WAN ポートに対応した機種では、 port に指定した集約対象のポートが  interface  に指定した  LAN
インターフェースにマッピングされていない場合、入力エラーにはならないがリンクアグリゲーションが正常に機
能しない。本コマンドの設定前に、集約対象のポートが同一  LAN インターフェースにマッピングされるように  lan
flexible-port  コマンドを設定しておく必要がある。
RTX1300 では、 1つの論理リンクに最大 8ポートを集約できる。また、論理リンク上でパケットの出力ポートが分
散していれば、論理リンク全体として利用できる帯域が集約したポートの分だけ増加する。
[ノート ]
パケットのループを避けるため、リンク相手機器の設定も含め、先にリンクアグリゲーションの設定を済ませてか
ら LAN ケーブルを結線することに注意する。
RTX5000 、RTX3500 は、このコマンドを実行すると、対象の  LAN インタフェースのみがリセットされる。
RTX3510 、RTX1300 は、このコマンドを実行すると、すべての  LAN インタフェースがリセットされる。
RTX1220 、RTX1210 は、このコマンドを実行すると、 LAN1 インタフェースのみがリセットされる。
RTX1300 では、 Rev.23.00.04 以降で使用可能。
[設定例 ]
• LAN1 のポート  1 とポート  2 を集約する。
# lan link-aggregation static 1 lan1:1 lan1:2
• LAN1 のポート  3 とポート  4 を集約する。
# lan link-aggregation static 2 lan1:3 lan1:4
• LAN2 の 4 つのポートを集約する。
# lan link-aggregation static 3 lan2:1 lan2:2 lan2:3 lan2:4
[適用モデル ]
RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210
4.52 LAN インタフェースの受信パケットバッファサイズの設定
[書式 ]
lan receive-buffer-size  size
no lan receive-buffer-size  [size]
[設定値及び初期値 ]
•size
• [設定値 ] : 受信パケットバッファサイズ  (1..16384)
• [初期値 ] :
• 8 ( QoS を設定した  vRX Amazon EC2 版 )
• 64 ( QoS を設定した  RTX3510 および  RTX1300 )
• 128 ( QoS を設定した  RTX5000 および  RTX3500 )
• 1024 ( 上記以外  )
[説明 ]
LAN インタフェースの受信パケットバッファサイズ  (受信キュー長 ) をパケットの個数で設定する。
本コマンドで設定したサイズが受信処理を行う全ての CPUコアに適用され、 LAN インタフェースごとの設定はでき
ない。
QoS 設定の有無で初期値が変化するが、本コマンドを使用してサイズを明示的に設定している場合は、 QoS 設定の
有無に関係なく、常にその設定値が適用される。コマンドリファレンス  | 機器の設定  | 87

[ノート ]
RTX5000 、RTX3500 は、 Rev.14.00.18 以降で使用可能。
RTX1300 は、 Rev.23.00.05 以降で使用可能。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300
4.53 ログインタイマの設定
[書式 ]
login  timer  time
no login  timer  [time]
[設定値及び初期値 ]
•time
• [設定値 ] :
設定値 説明
120..21474836キー入力がない場合に自動的にログアウトするまで
の秒数
clear ログインタイマを設定しない
• [初期値 ] : 300
[説明 ]
キー入力がない場合に自動的にログアウトするまでの時間を設定する。
[ノート ]
TELNET 、SSH、SFTP、HTTPで接続した場合、 clear が設定されていてもタイマ値は  300 秒として扱う。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.54 TFTP によりアクセスできるホストの設定
[書式 ]
tftp host ip_range  [ip_range ...]
tftp host any
tftp host none
tftp host lan
no tftp host
[設定値及び初期値 ]
•ip_range  : TFTP サーバーへのアクセスを許可するホストの  IP アドレスまたはニーモニック
• [設定値 ] :
設定値 説明
1 個の  IP アドレスまたは間にハイフン  (-) をはさん
だ IP アドレス  ( 範囲指定  )、およびこれらを任意に並
べたもの指定したホストからのアクセスを許可する
lanN LAN インターフェースからのアクセスを許可する
wan1 WAN インターフェースからのアクセスを許可する
( vRX シリーズ、 RTX5000 、および  RTX3500 では指
定不可能  )
WAN インターフェースからのアクセスを許可する88 | コマンドリファレンス  | 機器の設定

設定値 説明
bridge1 ブリッジインターフェースからのアクセスを許可す
る
vlanN VLAN インターフェースからのアクセスを許可する
( vRX シリーズ  では指定不可能  )
lanN/M タグ  VLAN インターフェースからのアクセスを許可
する
( vRX シリーズ  では指定不可能  )
• [初期値 ] : -
•any
• [設定値 ] : すべてのホストからのアクセスを許可する
• [初期値 ] : -
•none
• [設定値 ] : すべてのホストからのアクセスを禁止する
• [初期値 ] : none
•lan
• [設定値 ] : すべての  LAN 側ネットワーク内からのアクセスを許可する
• [初期値 ] : -
[説明 ]
TFTP サーバーへのアクセスを許可するホストを設定する。
[ノート ]
セキュリティの観点から、プログラムのリビジョンアップや設定ファイルの読み書きが終了したらすぐに  none にす
る。
IP アドレスの範囲および複数キーワードの指定と、 LAN インターフェース、 WAN インターフェース、 VLAN イン
ターフェース、タグ  VLAN インターフェース、 lan キーワードの指定は、 RTX5000 、RTX3500 、および  RTX1210
Rev.14.01.15 以前では不可能。
ブリッジインターフェースは、 vRX Amazon EC2 版、 RTX5000 、RTX3500 、および  RTX1210 Rev.14.01.15 以前では指
定不可能。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.55 Magic Packet を LAN に中継するか否かの設定
[書式 ]
ip interface  wol relay  relay
no ip interface  wol relay
[設定値及び初期値 ]
•interface
• [設定値 ] : LAN インタフェース名
• [初期値 ] : -
•relay
• [設定値 ] :
設定値 説明
broadcast Magic Packet をブロードキャストパケットとして中
継する
unicast Magic Packet をユニキャストパケットとして中継す
る
off Magic Packet かどうか検査しない
• [初期値 ] : offコマンドリファレンス  | 機器の設定  | 89

[説明 ]
遠隔地から送信された、ディレクティッドブロードキャスト宛の  IPv4 パケットとして構成された  MagicPacket を指
定した  LAN インタフェースに中継する。 IPv4 パケットの終点  IP アドレスは指定した  LAN インタフェースのディ
レクティッドブロードキャスト宛でなくてはいけない。
broadcast または  unicast を指定した場合には、受信したパケットの内容をチェックし、 Magic Packet データシーケン
スが存在する場合にのみパケットを中継する。
broadcast を指定した場合には、 MagicPacket をブロードキャストパケットとして  LAN インタフェースに送信する。
unicast を指定した場合には  Magic Packet データシーケンスから  MAC アドレスを抜きだし、 それを終点  MAC アドレ
スとしたユニキャストパケットとして送信する。
off を指定した場合には、 Magic Packet かどうかの検査は行わない。
[ノート ]
いずれの場合も、 Magic Packet として中継されなかった場合のパケットは、 ip filter directed-broadcast  コマンドの設
定に基づき処理される。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.56 インタフェースまたはシステムの説明の設定
[書式 ]
description  id description
no description  id [description ]
description  interface  description
no description  interface  [description ]
[設定値及び初期値 ]
•id
• [設定値 ] : システム全体の説明を記述する場合の  ID (1..21474836)
• [初期値 ] : -
•interface
• [設定値 ] :
• LAN インタフェース名
• WAN インタフェース名
• vRX シリーズ、 RTX5000 、および  RTX3500 では指定不可能
• pp
• tunnel
• [初期値 ] : -
•description
• [設定値 ] : 説明の文字列  ( 最大  64 文字 /ASCII、32 文字 /シフト  JIS)
• [初期値 ] : -
[説明 ]
システム全体の説明、あるいはインタフェースの説明を設定しておく。
設定内容はあくまで説明のためだけであり、動作には影響を与えない。
システム全体の説明の場合は、 ID の値を変えることで複数行の説明を設定できる。
インタフェースの説明は一行に限定される。
interface  として  'pp' あるいは  'tunnel' を指示したときにはそれぞれ、 pp select  あるいは tunnel select  で選択したインタ
フェースの説明となる。
設定内容は show config  コマンドで表示される。また、インタフェースに対する設定内容はインタフェースに対する
show status  コマンドでも表示される。
システム全体の説明は、 show config  コマンドではすべての設定よりも先に、 ID 順に表示される。90 | コマンドリファレンス  | 機器の設定

説明には、 ASCII 文字だけではなく、シフト  JIS で表現できる範囲の日本語文字  ( 半角カタカナを除く  ) も使用でき
る。ただし、 console character  コマンドの設定が  sjis の場合にのみ、正しく設定、表示でき、他の設定の場合には文
字化けすることがある。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.57 TCP のコネクションレベルの  syslog を出力するか否かの設定
[書式 ]
tcp log switch  [src_addr [/mask ] [dst_addr [/mask ] [tcpflag [src_port_list  [dst_port_list ]]]]]
no tcp log [...]
[設定値及び初期値 ]
•switch
• [設定値 ] :
設定値 説明
on TCP コネクションの  syslog を出力する
off TCP コネクションの  syslog を出力しない
• [初期値 ] : off
•src_addr  : 始点アドレス
• [設定値 ] :
• IPアドレス
• xxx.xxx.xxx.xxx は
• 10 進数
• *( ネットマスクの対応するビットが  8 ビットとも  0 と同じ  )
•間に  - を挟んだ  2 つの上項目、 - を前につけた上項目、 - を後ろにつけた上項目、これらは範囲を指定
• , を区切りとして複数設定することができる。
• FQDN
•任意の文字列  (半角  255 文字以内。 / ： は使用できない。 , は区切り文字として使われるため、使用でき
ない )
• * から始まる  FQDN は * より後ろの文字列を後方一致条件として判断する  例えば  *.example.co.jp は
www.example.co.jp 、mail.example.co.jp などと一致する
• , を区切りとして複数設定することができる。
• *( すべての  IP アドレス  )
• [初期値 ] : -
•dst_addr  : 終点アドレス
• [設定値 ] :
•src_addr  と同じ形式
•省略時は  1 個の  * と同じ
• [初期値 ] : -
•mask  : IP アドレスのビットマスク。 src_addr  および dst_addr  がネットワークアドレスの場合にのみ指定可能。
• [設定値 ] :
• "0xffffff00" のような 16進表記
• "/24"のようなビット数表記
•省略時は  0xffffffff と同じ
• [初期値 ] : -
•tcpflag  : フィルタリングする  TCP パケットの種類
• [設定値 ] :
•プロトコルを表す  10 進数  (6 のみ  )
•プロトコルを表すニーモニックコマンドリファレンス  | 機器の設定  | 91

ニーモニック 10 進数 説明
tcp 6 すべての  TCP パケット
tcpsyn -SYN フラグの立っているパケッ
ト
tcpfin - FIN フラグの立っているパケット
tcprst -RST フラグの立っているパケッ
ト
established -ACK フラグの立っているパケッ
ト
• tcpflag=flag_value/flag_mask 、または  tcpflag!=flag_value/flag_mask
• flag_value, flag_mask は16進表記
•参考フラグ値
0x0001 FIN
0x0002 SYN
0x0004 RST
0x0008 PSH
0x0010 ACK
0x0020 URG
• *( すべての  TCP パケット。ニーモニックに  tcp を指定したときと同じ  )
•省略時は  * と同じ
• [初期値 ] : -
•src_port_list  : TCP のソースポート番号
• [設定値 ] :
•ポート番号、タイプを表す  10 進数
•ポート番号を表すニーモニック
ニーモニック ポート番号
ftp 20,21
ftpdata 20
telnet 23
smtp 25
domain 53
gopher 70
finger 79
www 80
pop3 110
sunrpc 111
ident 113
ntp 123
nntp 119
snmp 161
syslog 514
printer 515
talk 51792 | コマンドリファレンス  | 機器の設定

ニーモニック ポート番号
route 520
uucp 540
submission 587
•間に  - を挟んだ  2 つの上項目、 - を前につけた上項目、 - を後ろにつけた上項目、これらは範囲を指定する。
•上項目のカンマで区切った並び  (10 個以内  )
• *( すべてのポート、タイプ  )
•省略時は  * と同じ
• [初期値 ] : -
•dest_port_list  : TCP のデスティネーションポート番号
• [設定値 ] : src_port_list  と同じ形式
• [初期値 ] : -
[説明 ]
TCP の syslog を出力する。 syslog debug  on も設定されている必要がある。 IPv4 のみに対応している。システムに負
荷がかかるため、トラブルシュート等の一時的な使用にしか推奨されない。
[ノート ]
src_addr  および  dest_addr  への FQDNの指定は  RTX5000 Rev.14.00.26 以降、 RTX3500 Rev.14.00.26 以降、 RTX1210
Rev.14.01.26 以降、 RTX830 Rev.15.02.03 以降、および、 Rev.15.04 系以降で指定可能。
[設定例 ]
tcp log on * * tcpsyn * 1723 (PPTP のポートに  SYN が来ているか  )
tcp log on * * tcpflag!=0x0000/0x0007 (FIN,RST,SYN の立った  TCP パケット  )
tcp log on ( すべての  TCP パケット。 tcp log on * * * * * と同じ  )
[適用モデル ]
RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.58 HTTP リビジョンアップ実行を許可するか否かの設定
[書式 ]
http revision-up  permit  permit
no http revision-up  permit  [permit ]
[設定値及び初期値 ]
•permit
• [設定値 ] :
設定値 説明
on 許可する
off 許可しない
• [初期値 ] : on
[説明 ]
HTTP リビジョンアップを許可するか否かを設定する。
[ノート ]
このコマンドの設定は、コマンドによる直接の  HTTP リビジョンアップ、かんたん設定ページによるリビジョンア
ップ、 DOWNLOAD ボタンによるリビジョンアップに影響する。
RTX5000 、RTX3500 は Rev.14.00.26 以降で使用可能。
[適用モデル ]
RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830コマンドリファレンス  | 機器の設定  | 93

4.59 HTTP リビジョンアップ用  URL の設定
[書式 ]
http revision-up  url url
no http revision-up  url [url]
[設定値及び初期値 ]
•url
• [設定値 ] : ファームウェアが置いてある  URL を設定する
• [初期値 ] : http://www.rtpro.yamaha.co.jp/firmware/revision-up/( 機種名  ). bin
[説明 ]
HTTP リビジョンアップとしてファームウェアが置いてある  URL を設定する。
入力形式は “http://サーバーの  IP アドレスあるいはホスト名 /パス名 ”という形式となる。
サーバーのポート番号が  80 以外の場合は、 “http://サーバーの  IP アドレスあるいはホスト名  : ポート番号 /パス名 ”と
いう形式で、 URL の中に指定する必要がある。
[ノート ]
RTX5000 、RTX3500 は Rev.14.00.26 以降で使用可能。
[適用モデル ]
RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.60 HTTP リビジョンアップ用  Proxy サーバーの設定
[書式 ]
http revision-up  proxy  proxy_server  [port]
no http revision-up  proxy  [proxy_server  [port]]
[設定値及び初期値 ]
•proxy_server
• [設定値 ] : HTTP リビジョンアップ時に使用する  Proxy サーバー
• [初期値 ] : -
•port
• [設定値 ] : Proxy サーバーのポート番号
• [初期値 ] : -
[説明 ]
Proxy サーバーのホスト名または、 IP アドレスとポート番号を指定する。
[ノート ]
RTX5000 、RTX3500 は Rev.14.00.26 以降で使用可能。
[適用モデル ]
RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.61 HTTP リビジョンアップ処理のタイムアウトの設定
[書式 ]
http revision-up  timeout  time
no http revision-up  timeout  [time]
[設定値及び初期値 ]
•time
• [設定値 ] : タイムアウト時間  ( 秒 )
• [初期値 ] : 3094 | コマンドリファレンス  | 機器の設定

[説明 ]
HTTP リビジョンアップ処理のタイムアウト時間を設定する。
[ノート ]
RTX5000 、RTX3500 は Rev.14.00.26 以降で使用可能。
[適用モデル ]
RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.62 リビジョンダウンを許可するか否かの設定
[書式 ]
http revision-down  permit  permit
no http revision-down  permit  [permit ]
[設定値及び初期値 ]
•permit
• [設定値 ] :
設定値 説明
on 現在のリビジョンより古いリビジョンへのリビジョ
ンダウンを許可する
off 現在のリビジョンより古いリビジョンへのリビジョ
ンダウンを許可しない
• [初期値 ] : off
[説明 ]
HTTP リビジョンアップ機能にて、 現在のリビジョンよりも古いリビジョンへのファームウェアのリビジョンダウン
を許可するか否かを設定する。
[ノート ]
RTX5000 、RTX3500 は Rev.14.00.26 以降で使用可能。
[適用モデル ]
RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.63 DOWNLOAD ボタンによるリビジョンアップ操作を許可するか否かの設定
[書式 ]
operation  http revision-up  permit  permit
no operation  http revision-up  permit  [permit ]
[設定値及び初期値 ]
•permit
• [設定値 ] :
設定値 説明
on DOWNLOAD ボタンによるリビジョンアップ操作を
許可する
off DOWNLOAD ボタンによるリビジョンアップ操作を
許可しない
• [初期値 ] : off
[説明 ]
DOWNLOAD ボタンによりファームウェアのリビジョンアップ機能を使用するか否かを設定する。コマンドリファレンス  | 機器の設定  | 95

[ノート ]
リビジョンアップ機能は  HTTP リビジョンアップ機能に準ずる。
STATUS ランプがエラーを表示している状態で本コマンドを  off に設定すると、エラー表示が解除される。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.64 リビジョンアップ実行のスケジュール
[書式 ]
http revision-up  schedule  period  time1  time2
http revision-up  schedule  startup
no http revision-up  schedule  [period  time1  time2 ]
no http revision-up  schedule  startup
[設定値及び初期値 ]
•period  : ファームウェアのリビジョンアップを試みるスケジュールを設定する。
• [設定値 ] :
設定値 説明
daily 毎日
weekly day毎週
day は曜日を表す文字列で、以下のいずれか
sun,mon,tue,wed,thu,fri,sat
monthly date 毎月
date は 1～31 の数字で月内の日を表す
• [初期値 ] : -
•time1,time2  : リビジョンアップを試みる時間帯を設定する。
• [設定値 ] : time1,time2  は 24 時間制で、 HH:MM 形式で指定する。
• [初期値 ] : -
[説明 ]
ファームウェアのリビジョンアップを試みるスケジュールを設定する。
period  ではリビジョンアップを試みる間隔を指定する。毎日、毎週、毎月の指定をそれぞれ、 daily、weekly、monthly
で指定する。 weekly、monthly の場合はそれぞれ曜日、日の指定が必要になる。
monthly の場合で、指定した日がその月に存在しない場合には、その月にはリビジョンアップは試みられない。たと
えば、 'monthly 31' と指定した場合、 31 日が存在しない  2 月、 4 月、 6 月、 9 月、 11 月にはリビジョンアップは試み
られない。
time1、time2  ではリビジョンアップを試みる時間帯を設定する。 time1  で指定した時刻から time2  で指定した時刻の
間のランダムな時刻に  1 回だけ、リビジョンアップを試みる。そこでリビジョンアップできなかった場合には、次
の日 /週/月までリビジョンアップは行われない。
time1  で指定した時刻が time2  で指定した時刻より遅い場合には、 time2  は翌日の時刻と解釈される。
http revision-up schedule startup  コマンドでは起動時に  1 回だけ、リビジョンアップを試みる。そこでリビジョンア
ップできなかった場合には、次の起動までリビジョンアップは行われない。
http revision-up permit  コマンドで  HTTP リビジョンアップを許可されていない時は、ファームウェアのリビジョン
アップは行わない。
http revision-down permit  コマンドでリビジョンダウンが許可されている場合は、 WEB サーバーにおいてあるファ
ームウェアが現在のファームウェアよりも古いリビジョンであってもファームウェアの書き換えを行う。
なお、 WEB サーバーにおいてあるファームウェアが現在のファームウェアと同一リビジョンの場合には、ファーム
ウェアの書き換えは行わない。96 | コマンドリファレンス  | 機器の設定

[ノート ]
RTX5000 、RTX3500 は Rev.14.00.26 以降で使用可能。
startup は RTX5000 、RTX3500 は Rev.14.00.29 以降、 RTX1210 Rev.14.01.34 以降、 RTX830 Rev.15.02.10 以降、および、
Rev.15.04 系以降のファームウェアで使用可能。
[設定例 ]
http revision-up schedule daily 23:00 02:00        # 毎日、 23 時から翌日  2 時までの間
http revision-up schedule weekly sun 12:00 13:00   # 日曜日の昼  12 時から  13 時までの間
http revision-up schedule monthly 1 23:00 0:00     # 毎月 1 日の 23 時から  24 時までの間
http revision-up schedule startup                  # 起動時
[適用モデル ]
RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.65 SSH サーバー機能の  ON/OFF の設定
[書式 ]
sshd  service  service
no sshd  service  [service ]
[設定値及び初期値 ]
•service
• [設定値 ] :
設定値 説明
on SSH サーバー機能を有効にする
off SSH サーバー機能を停止させる
• [初期値 ] : off
[説明 ]
SSH サーバー機能の利用を選択する。
[ノート ]
SSH サーバー機能が停止している場合、 SSH サーバーはアクセス要求に一切応答しない。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.66 SSH サーバー機能の  listen ポートの設定
[書式 ]
sshd  listen  port
no sshd  listen  [port]
[設定値及び初期値 ]
•port
• [設定値 ] : SSH サーバー機能の待ち受け  (listen) ポート番号  (1..65535)
• [初期値 ] : 22
[説明 ]
SSH サーバーの  listen ポートを選択する。
[ノート ]
SSH サーバーは、 TCP の 22 番ポートで待ち受けしているが、本コマンドにより待ち受けポートを変更することがで
きる。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830コマンドリファレンス  | 機器の設定  | 97

4.67 SSH サーバーへアクセスできるホストの設定
[書式 ]
sshd  host ip_range  [ip_range ...]
sshd  host any
sshd  host none
sshd  host lan
no sshd  host
[設定値及び初期値 ]
•ip_range  : SSH サーバーへのアクセスを許可するホストの  IP アドレスまたはニーモニック
• [設定値 ] :
設定値 説明
1 個の  IP アドレスまたは間にハイフン  (-) をはさん
だ IP アドレス  ( 範囲指定  )、およびこれらを任意に並
べたもの指定したホストからのアクセスを許可する
lanN LAN インターフェースからのアクセスを許可する
wan1 WAN インターフェースからのアクセスを許可する
( vRX シリーズ、 RTX5000 、および  RTX3500 では指
定不可能  )
bridge1 ブリッジインターフェースからのアクセスを許可す
る
vlanN VLAN インターフェースからのアクセスを許可する
( vRX シリーズ  では指定不可能  )
lanN/M タグ  VLAN インターフェースからのアクセスを許可
する
( vRX シリーズ  では指定不可能  )
• [初期値 ] : -
•any
• [設定値 ] : すべてのホストからのアクセスを許可する
• [初期値 ] : any
•none
• [設定値 ] : すべてのホストからのアクセスを禁止する
• [初期値 ] : -
•lan
• [設定値 ] : すべての  LAN 側ネットワーク内からのアクセスを許可する
• [初期値 ] : -
[説明 ]
SSH サーバーへのアクセスを許可するホストを設定する。
[ノート ]
設定後の新しい  SSH 接続から適用される。
ブリッジインターフェースは、 vRX Amazon EC2 版、および  RTX5000 / RTX3500 Rev.14.00.11 以前では指定不可能。
lan キーワードは  RTX5000 / RTX3500 Rev.14.00.31 以前、および  RTX1210 Rev.14.01.15 以前では指定不可能。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.68 SSH サーバーへ同時に接続できるユーザ数の設定
[書式 ]
sshd  session  num
no sshd  session  [num]98 | コマンドリファレンス  | 機器の設定

[設定値及び初期値 ]
•num
• [設定値 ] : 同時接続数  (1..8)
• [初期値 ] : 8
[説明 ]
SSH に同時に接続できるユーザ数を設定する。
[ノート ]
設定を変更したときに変更した値よりも多くのユーザが接続している場合は、接続しているユーザはそれを維持す
ることができるが、接続しているユーザ数が設定値より少なくなるまで新たな接続は許可しない。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.69 SSH サーバーホスト鍵の設定
[書式 ]
sshd  host key generate  [bit= bit]
no sshd  host key generate  [...]
[設定値及び初期値 ]
•bit
• [設定値 ] : 鍵のビット長 (1024, 2048)
• [初期値 ] :
• 1024 ( RTX5000 、RTX3500 、RTX1210 )
• 2048 ( 上記以外の機種  )
[説明 ]
SSH サーバーのホスト鍵を設定する。
bit パラメータによって、生成する鍵のビット数を指定できる。
[ノート ]
SSH サーバー機能を利用する場合は、事前に本コマンドを実行してホスト鍵を生成する必要がある。
既にホスト鍵が設定されている状態で本コマンドを実行した場合、ユーザに対してホスト鍵を更新するか否かを確
認する。
ホスト鍵の生成には、機種によって異なるが、 1024ビット鍵では数秒から  数分程度、 2048ビット鍵では数分から十
数分程度の時間がかかる。
TFTP で設定を取得した場合は、 sshd host key generate  [bit= bit] KEY1  KEY2  KEY3  という形式で保存される。
KEY1  〜 KEY3  は、秘密鍵を機器固有の方式で暗号化した文字列である。
[ノート ]
bit キーワードは、 RTX5000 / RTX3500 Rev.14.00.20 以前、および  RTX1210 Rev.14.01.10 以前では使用不可能。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.70 SSH サーバーホスト鍵の表示
[書式 ]
show  sshd  host key [type= fingerprint  [hash_algorithm ]]
[設定値及び初期値 ]
•fingerprint  : 鍵指紋を表示することを示すキーワード
• [初期値 ] : -
•hash_algorithm  : 鍵指紋を表示する際に使用するハッシュ関数のアルゴリズム
• [設定値 ] :コマンドリファレンス  | 機器の設定  | 99

設定値 説明
md5 MD5
sha256 SHA-256
• [初期値 ] : sha256
[説明 ]
SSH サーバーのホスト鍵を表示する。
fingerprint  キーワードを指定した場合は、公開鍵の鍵長と鍵指紋を表示する。
[ノート ]
RTX5000 は Rev.14.00.32 以降で使用可能。
RTX3500 は Rev.14.00.32 以降で使用可能。
RTX1210 は Rev.14.01.35 以降で使用可能。
RTX830 は Rev.15.02.14 以降で使用可能。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.71 SSH サーバーで利用可能な暗号アルゴリズムの設定
[書式 ]
sshd  encrypt  algorithm  algorithm  [algorithm  ...]
no sshd  encrypt  algorithm  [...]
[設定値及び初期値 ]
•algorithm  : 暗号アルゴリズム  ( 空白で区切って複数指定可能  )
• [設定値 ] :
設定値 説明
aes128-ctr AES128-CTR
aes192-ctr AES192-CTR
aes256-ctr AES256-CTR
aes128-cbc AES128-CBC
aes192-cbc AES192-CBC
aes256-cbc AES256-CBC
3des-cbc 3DES-CBC
blowfish-cbcBlowfish-CBC
( RTX5000 、RTX3500 、RTX1210 Rev.14.01.33 以前、
および  RTX830 Rev.15.02.09 以前で指定可能  )
cast128-cbcCAST-128-CBC
( RTX5000 、RTX3500 、RTX1210 Rev.14.01.33 以前、
および  RTX830 Rev.15.02.09 以前で指定可能  )
arcfourArcfour
( RTX5000 、RTX3500 、RTX1210 Rev.14.01.33 以前、
および  RTX830 Rev.15.02.09 以前で指定可能  )
• [初期値 ] : aes128-ctr aes192-ctr aes256-ctr
[説明 ]
SSH サーバーで利用可能な暗号アルゴリズムを設定する。
algorithm  で指定した暗号アルゴリズムのリストを  SSH 接続時にクライアントへ提案する。100 | コマンドリファレンス  | 機器の設定

[ノート ]
algorithm  で指定した暗号アルゴリズムをクライアントがサポートしていない場合には、そのクライアントと  SSH に
よる接続ができない。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.72 SSH クライアントの生存確認
[書式 ]
sshd  client  alive  switch  [interval  [count ]]
no sshd  client  alive  [switch  ...]
[設定値及び初期値 ]
•switch
• [設定値 ] :
設定値 説明
on クライアントの生存確認を行う
off クライアントの生存確認を行わない
• [初期値 ] : off
•interval
• [設定値 ] : 送信間隔の秒数  (1..2147483647)
• [初期値 ] : 100
•count
• [設定値 ] : 試行回数  (1..2147483647)
• [初期値 ] : 3
[説明 ]
クライアントの生存確認を行うか否かを設定する。
クライアントに interval  で設定した間隔で応答を要求するメッセージを送る。 count  で指定した回数だけ連続して応
答がなかったら、このクライアントとの接続を切り、セッションを終了する。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.73 SSH サーバー応答に含まれる OpenSSH のバージョン情報の非表示設定
[書式 ]
sshd  hide openssh  version  use
no sshd  hide openssh  version  [use]
[設定値及び初期値 ]
•use
• [設定値 ] :
設定値 説明
on SSH バージョン情報を表示しない
off SSH バージョン情報を表示する
• [初期値 ] : off
[説明 ]
SSH接続時のサーバー応答に含まれる OpenSSH のバージョン情報を表示するか否かを設定する。
このコマンドはセキュリティー目的として OpenSSH のバージョン情報を隠匿したい場合に使用する。
このコマンドを onに設定した場合は、 "SSH-2.0-OpenSSH" と通知する。コマンドリファレンス  | 機器の設定  | 101

[ノート ]
このバージョン情報は、 SSH接続時にサーバーとクライアントのプロトコルの互換性を調整するために使用される。
このコマンドを onに設定することにより、クライアントソフトによっては、接続できなくなる可能性がある。
その場合には、クライアントソフトを変更するか、このコマンドを offに設定する。
RTX5000 、RTX3500 は Rev.14.00.18 以降で使用可能。
RTX1210 は Rev.14.01.09 以降で使用可能。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.74 SSH サーバーで利用可能な認証方式の設定
[書式 ]
sshd  auth  method  all
sshd  auth  method  method  [method ]
no sshd  auth  method  [...]
[設定値及び初期値 ]
•all : パスワード認証、および、公開鍵認証を受け入れる
• [初期値 ] : all ( vRX さくらのクラウド版、 RTX840 以外  )
•method
• [設定値 ] :
設定値 説明
password パスワード認証を受け入れる
publickey 公開鍵認証を受け入れる
• [初期値 ] : publickey ( vRX さくらのクラウド版、 RTX840 )
[説明 ]
SSH サーバーで利用可能な認証方式を設定する。
パスワード認証より公開鍵認証が安全な認証方式である。
[ノート ]
本コマンドが使用できないファームでは、 sshd auth method  password 相当の動作となります。
RTX5000 は Rev.14.00.32 以降で使用可能。
RTX3500 は Rev.14.00.32 以降で使用可能。
RTX1210 は Rev.14.01.35 以降で使用可能。
RTX830 は Rev.15.02.14 以降で使用可能。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.75 SSH サーバーの公開鍵認証に用いる公開鍵情報を保存するファイルの設定
[書式 ]
sshd  authorized-keys  filename  [user] path= path
no sshd  authorized-keys  filename  [user] [path= path]
[設定値及び初期値 ]
•user : 登録されているユーザー名
• [初期値 ] : -
•path : SSH クライアントの公開鍵を格納したファイル名
• [初期値 ] :
• /ssh/authorized_keys/ ユーザー名  (登録されているユーザーの場合 )
• /ssh/authorized_keys/no.name ( 無名ユーザーの場合 )102 | コマンドリファレンス  | 機器の設定

[説明 ]
SSH クライアントの公開鍵を格納したファイル  (authorized_keys ファイル ) を設定する。ユーザーが公開鍵認証する
際に使用する。
本コマンドを設定する場合、無名ユーザー以外は事前に  login user  コマンドでユーザーを登録しておく必要がある。
登録されていないユーザーに対して本コマンドを設定するとエラーになる。
user を省略した場合は、無名ユーザーに対する設定となる。
path には  mount  コマンドでマウントした外部ストレージを指定できる。外部ストレージのパスは、マウント時に設
定したプレフィックスを先頭に付与して指定する。例えば、プレフィックスが  "storage:" である外部ストレージの
"/dir/sample" を指定する場合は、 "storage:/dir/sample" と指定する。
公開鍵認証を使用する場合は、あらかじめ許可する  SSH クライアントの公開鍵をファイルに格納しておく必要があ
る。対応しているファイルのフォーマットは以下のとおり。
•各行にひとつの公開鍵を格納する。
• 1つの公開鍵は、 "(公開鍵の種類 ) (base64 エンコードされた鍵本体 ) (鍵のコメント )"の順に記載する。
•ファイルには 33個まで公開鍵を登録できる。 34 個目以降の公開鍵は無視する。
•空行や #で始まる行は無視する。
• 1 行の長さは、 4094 文字  (改行コードを除く ) まで対応する。 4094 文字より長い行は無視する。
•改行コードは、 CR+LF、LF、CR に対応する。最終行の場合は改行がなくてもよい。
•ファイルの文字コードは、 ASCII に対応する。
•公開鍵の種類には、 ecdsa-sha2-nistp256 、ecdsa-sha2-nistp384 、ecdsa-sha2-nistp521 、ssh-ed25519 、ssh-dss、ssh-rsa(※)
を設定できる。
• ※ssh-rsa の鍵長は、 1024bit、2048bit、4096bit に対応する。
• OpenSSH の authorized_keys ファイルではオプションを指定できるが対応しない。オプションの記載を無視する。
[サンプル ]
例:RSA 2048bit の公開鍵の場合
ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAp3eK3sk60fhHP9zsRgI39tqAoNfljbnCNiJ7horhwu6
1ZyaKDKf8BiiCsKnvFsLIfSgcOejllflBtrFX3bN8iu+me2Ggh52vuIWDS/SUEQNWcYCalY0Ign8u8O
zVxldx1QABzuAKEKA654gkhQA40iaCKbKD5RGp4zujqDA6p8Y9o06pC/Ns7GzkgegrMxg40feB+0hjS
+K2eY49uqqwqYUYCdNw6bTIJiH6nAgsXSUDjbo3N+b9CY/9/7txKBykt1zt04WCXepngxVRw2ss+JOV
kPisDmtl0//Q7Xdi+MxiLKhjeZk3jpqrSHiLon6D30xU/5/FY0cwcRBwrj4Uuw== user1
例:ECDSA 256bit の公開鍵の場合
ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBP211Vy
IP8Bg+r8rZhNmRq+ber0+sOaYCsvm5TN1CGt5WpCNkpwkV3c3rxwA6GAgGxuJsSn4J6Bo1mABhHg+YH
M= user2
login user  コマンドで登録されていないユーザーから接続された場合は、無名ユーザーとして公開鍵認証を試みる。
[ノート ]
vRX Amazon EC2 版、 vRX VMware ESXi 版、 RTX5000 、RTX3500 、RTX1220 、RTX1210 、および  RTX830 を除く各
機種では、無名ユーザーを登録できないため  user を省略することはできない。
path パラメーターへの外部ストレージの指定は、 vRX Amazon EC2 版 を除く  vRX シリーズ  で可能。
RTX5000 は Rev.14.00.32 以降で使用可能。
RTX3500 は Rev.14.00.32 以降で使用可能。
RTX1210 は Rev.14.01.35 以降で使用可能。
RTX830 は Rev.15.02.14 以降で使用可能。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.76 SSH サーバーの公開鍵認証に用いる公開鍵の設定
[書式 ]
import  sshd  authorized-keys  [user]
[設定値及び初期値 ]
•userコマンドリファレンス  | 機器の設定  | 103

• [設定値 ] : 登録されているユーザー名
• [初期値 ] : -
[説明 ]
SSH クライアントの公開鍵を格納したファイル  (authorized_keys ファイル ) に設定を追加する。
本コマンドを実行する場合、無名ユーザー以外は事前に  login user  コマンドでユーザーを登録しておく必要がある。
登録されていないユーザーに対して本コマンドを設定するとエラーになる。
userを省略した場合は、無名ユーザーに対する設定となる。
sshd authorized-keys filename  コマンドで指定した  authorized_keys ファイルに対して設定を追加する。
authorized_keys ファイルやディレクトリーが存在しない場合は、新規に作成する。
コマンド入力後にプロンプトに応じて公開鍵を 1つ入力する。入力した公開鍵が、 authorized_keys ファイルに追加書
き込みされる。公開鍵は、 "(公開鍵の種類 ) (base64 エンコードされた鍵本体 ) (鍵のコメント )"の順に記載する。 4094
文字まで入力できる。
公開鍵のフォーマットは、 sshd authorized-keys filename  コマンドと同様である。
authorized_keys ファイルを削除または初期化したいときは、 delete  コマンドを使用する。
[ノート ]
vRX Amazon EC2 版、 vRX VMware ESXi 版、 RTX5000 、RTX3500 、RTX1220 、RTX1210 、および  RTX830 を除く各
機種では、無名ユーザーを登録できないため  user を省略することはできない。
RTX5000 は Rev.14.00.32 以降で使用可能。
RTX3500 は Rev.14.00.32 以降で使用可能。
RTX1210 は Rev.14.01.35 以降で使用可能。
RTX830 は Rev.15.02.14 以降で使用可能。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.77 SSH サーバーの公開鍵認証に用いる公開鍵の表示
[書式 ]
show  sshd  authorized-keys  [user] [type= fingerprint  [hash_algorithm ]]
show  sshd  authorized-keys  * [type= fingerprint  [hash_algorithm ]]
[設定値及び初期値 ]
•user : 登録されているユーザー名
• [初期値 ] : -
•fingerprint  : 鍵指紋を表示することを示すキーワード
• [初期値 ] : -
•hash_algorithm  : 鍵指紋を表示する際に使用するハッシュ関数のアルゴリズム
• [設定値 ] :
設定値 説明
md5 MD5
sha256 SHA-256
• [初期値 ] : sha256
•* : 全ユーザー
• [初期値 ] : -
[説明 ]
SSH クライアントの公開鍵を格納したファイル  (authorized_keys ファイル ) を表示する。
fingerprint  を指定した場合は、公開鍵の鍵長と鍵指紋を表示する。
第 1 書式では、ユーザーに対応した  authorized_keys ファイルを表示する。 user を省略した場合は、無名ユーザーの
情報を表示する。
第 2 書式では、全ユーザーの  authorized_keys ファイルを表示する。104 | コマンドリファレンス  | 機器の設定

[ノート ]
vRX Amazon EC2 版、 vRX VMware ESXi 版、 RTX5000 、RTX3500 、RTX1220 、RTX1210 、および  RTX830 を除く各
機種では、無名ユーザーを登録できないため  user を省略することはできない。
RTX5000 は Rev.14.00.32 以降で使用可能。
RTX3500 は Rev.14.00.32 以降で使用可能。
RTX1210 は Rev.14.01.35 以降で使用可能。
RTX830 は Rev.15.02.14 以降で使用可能。
[設定例 ]
例: RSA 2048bit の公開鍵を表示する場合
# show sshd authorized-keys user1
ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAp3eK3sk60fhHP9zsRgI39tqAoNfljbnCNiJ7horhwu6
1ZyaKDKf8BiiCsKnvFsLIfSgcOejllflBtrFX3bN8iu+me2Ggh52vuIWDS/SUEQNWcYCalY0Ign8u8O
zVxldx1QABzuAKEKA654gkhQA40iaCKbKD5RGp4zujqDA6p8Y9o06pC/Ns7GzkgegrMxg40feB+0hjS
+K2eY49uqqwqYUYCdNw6bTIJiH6nAgsXSUDjbo3N+b9CY/9/7txKBykt1zt04WCXepngxVRw2ss+JOV
kPisDmtl0//Q7Xdi+MxiLKhjeZk3jpqrSHiLon6D30xU/5/FY0cwcRBwrj4Uuw== user1
例:RSA 2048bit の公開鍵の鍵指紋を  SHA-256 で表示した場合
# show sshd authorized-keys user1 type=fingerprint sha256
2048 SHA256:uk2janKfeZXBsUniTMdNwL2fhdcAdfY0MsGSsCtpg8E user1 (RSA)
例:RSA 2048bit の公開鍵の鍵指紋を  MD5 で表示した場合
# show sshd authorized-keys user1 type=fingerprint md5
2048 MD5:6e:fe:21:cc:d2:a4:55:78:07:7f:7f:f7:59:17:56:3a user1 (RSA)
例:全ユーザーを表示した場合
# 無名ユーザーと  user1, user2, user3 が存在している。
# user2 は、sshd authorized-keys filename コマンドでファイルの置き場所を変更している。
# user3 は、authorized_keys ファイルが存在しない。
# show sshd authorized-keys * type=fingerprint sha256
(noname) /ssh/authorized_keys/no.name
2048 SHA256:fMlGwY5YlQvz9xEObkDXaO7TuvIlgFIAkmV0K2MGbyU (RSA)
user1 /ssh/authorized_keys/user1
2048 SHA256:uk2janKfeZXBsUniTMdNwL2fhdcAdfY0MsGSsCtpg8E user1 (RSA)
user2 /pub-key
2048 SHA256:Ul7sScopCUNPA5IndPWzHhkANqr3PkD2k3GMv0qS5NA user2 (RSA)
user3 /ssh/authorized_keys/user3
/ssh/authorized_keys/user3 : ファイルデータの読み込みに失敗しました。  : No such
 file or directory
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.78 SFTP サーバーへアクセスできるホストの設定
[書式 ]
sftpd  host ip_range  [ip_range ...]
sftpd  host any
sftpd  host none
sftpd  host lan
no sftpd  host
[設定値及び初期値 ]
•ip_range  : SFTP サーバーへのアクセスを許可するホストの  IP アドレスまたはニーモニック
• [設定値 ] :コマンドリファレンス  | 機器の設定  | 105

設定値 説明
1 個の  IP アドレスまたは間にハイフン  (-) をはさん
だ IP アドレス  ( 範囲指定  )、およびこれらを任意に並
べたもの指定したホストからのアクセスを許可する
lanN LAN インターフェースからのアクセスを許可する
wan1 WAN インターフェースからのアクセスを許可する
( vRX シリーズ、 RTX5000 、および  RTX3500 では指
定不可能  )
bridge1 ブリッジインターフェースからのアクセスを許可す
る
vlanN VLAN インターフェースからのアクセスを許可する
( vRX シリーズ  では指定不可能  )
lanN/M タグ  VLAN インターフェースからのアクセスを許可
する
( vRX シリーズ  では指定不可能  )
• [初期値 ] : -
•any
• [設定値 ] : すべてのホストからのアクセスを許可する
• [初期値 ] : -
•none
• [設定値 ] : すべてのホストからのアクセスを禁止する
• [初期値 ] : none
•lan
• [設定値 ] : すべての  LAN 側ネットワーク内からのアクセスを許可する
• [初期値 ] : -
[説明 ]
SFTP サーバーへのアクセスを許可するホストを設定する。
[ノート ]
対象となるホストは  sshd host  コマンドでもアクセスが許可されていなければならない。
設定後の新しい  SFTP 接続から適用される。
ブリッジインターフェースは、 vRX Amazon EC2 版、および  RTX5000 / RTX3500 Rev.14.00.11 以前では指定不可能。
lan キーワードは  RTX5000 / RTX3500 Rev.14.00.31 以前、および  RTX1210 Rev.14.01.15 以前では指定不可能。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.79 SSH クライアント
[書式 ]
ssh [-p port] [-e escape ] [user@]host
[設定値及び初期値 ]
•port
• [設定値 ] : リモートホストのポート番号
• [初期値 ] : 22
•escape
• [設定値 ] : エスケープ文字の文字コード  (0 ... 255)
• [初期値 ] : 126 (~)
•user
• [設定値 ] : リモートホストにログインする際に使用するユーザー名
• [初期値 ] : -106 | コマンドリファレンス  | 機器の設定

•host
• [設定値 ] : リモートホストのホスト名、または  IP アドレス
• [初期値 ] : -
[説明 ]
SSH を実行し、指定したホストにリモートログインする。
userを省略した場合、ルーターにログインした際に入力したユーザ名を使用して  SSH サーバーへのアクセスを試み
る。
hostに IPv6 アドレスを指定する場合には、 "["、"]" で IP アドレスを囲む。
escapeで指定したエスケープ文字は行頭に入力されたときだけ、エスケープ文字として認識される。エスケープ文
字に続けてピリオド (.)が入力された場合、強制的に接続を閉じる。行頭からエスケープ文字を２回続けて入力した
場合には、この文字が１回だけサーバに送られる。
実行例は以下の通り。
リモートホスト  (192.168.1.1 、ポート :10022) へアクセスする。
    # ssh -p 10022 user@192.168.1.1
リモートホスト  (2001:1::1) へアクセスする。
    # ssh user@[2001:1::1]
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.80 SCP クライアント
[書式 ]
scp [[user@]host:]file1 [[user@]host:]file2 [port]
[設定値及び初期値 ]
•user
• [設定値 ] : リモートホストにログインする際に使用するユーザー名
• [初期値 ] : -
•host
• [設定値 ] : リモートホストのホスト名、または IPアドレス
• [初期値 ] : -
•file1
• [設定値 ] : 転送元ファイル名
• [初期値 ] : -
•file2
• [設定値 ] : 転送先ファイル名
• [初期値 ] : -
•port
• [設定値 ] : リモートホストのポート番号
• [初期値 ] : 22
[説明 ]
SCPを実行する。
file1または file2のどちらか一方はリモートホスト上のファイルを指定し、もう一方にはルータのファイルシステム
にあるファイルを指定する。
file1、file2の両方にリモートホストのファイルを指定することはできない。
同様に file1、file2の両方にルータのファイルシステムにあるファイルを指定することはできない。
RTFS、外部メモリ、および外部ストレージにあるファイルを指定する場合、 userおよび hostを省略し fileのみを絶
対パスで指定する。
ルータの設定ファイル  (config、config0〜config4) やファームウェア  (exec、exec0、exec1) を指定する場合には、 file
に "config" や "exec0" のようにファイル名のみを指定する。コマンドリファレンス  | 機器の設定  | 107

外部ストレージを指定する場合には、マウント時に設定したプレフィックスを先頭に付与して指定する。例えば、
プレフィックスが  "storage:" である外部ストレージの  "/dir/sample.txt" を指定する場合は、 "storage:/dir/sample.txt" と指
定する。
hostにIPv6アドレスを指定する場合には、 "["、"]" でIPアドレスを囲む。
[ノート ]
外部ストレージ上のファイルの指定は、 vRX Amazon EC2 版 を除く  vRX シリーズ  で可能。
[設定例 ]
リモートホスト  (192.168.1.1) から、ルーターの  exec0 にファイルをコピーする。
    # scp user@192.168.1.1:rtx1300.bin exec0
ルーター上のファイル  usb1:/log.txt を、リモートホスト  (2001:1::1) へコピーする。
    # scp usb1:/log.txt user@[2001:1::1]:log.txt
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.81 SSH クライアントで利用可能な暗号アルゴリズムの設定
[書式 ]
ssh encrypt  algorithm  algorithm  [algorithm ...]
no ssh encrypt  algorithm  [algorithm ...]
[設定値及び初期値 ]
•algorithm  : 暗号アルゴリズム (空白で区切って複数指定可能 )
• [設定値 ] :
設定値 説明
aes128-ctr AES128-CTR
aes192-ctr AES192-CTR
aes256-ctr AES256-CTR
aes128-cbc AES128-CBC
aes192-cbc AES192-CBC
aes256-cbc AES256-CBC
3des-cbc 3DES-CBC
blowfish-cbc Blowfish-CBC
( RTX5000 、RTX3500 、RTX1210 Rev.14.01.33 以前、
および  RTX830 Rev.15.02.09 以前で指定可能  )
cast128-cbc CAST-128-CBC
( RTX5000 、RTX3500 、RTX1210 Rev.14.01.33 以前、
および  RTX830 Rev.15.02.09 以前で指定可能  )
arcfour Arcfour
( RTX5000 、RTX3500 、RTX1210 Rev.14.01.33 以前、
および  RTX830 Rev.15.02.09 以前で指定可能  )
• [初期値 ] : aes128-ctr aes192-ctr aes256-ctr
[説明 ]
SCP クライアントで利用可能な暗号アルゴリズムを設定する。
algorithm で指定した暗号アルゴリズムのリストを  SSH 接続時にサーバーに提案する。
[ノート ]
algorithm で指定した暗号アルゴリズムをサーバーがサポートしていない場合には、そのサーバーと  SSH による接続
ができない。108 | コマンドリファレンス  | 機器の設定

[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.82 SSH サーバーの公開鍵情報を保存するファイルの設定
[書式 ]
ssh known  hosts  file
no ssh known  hosts  [file]
[設定値及び初期値 ]
•file
• [設定値 ] : SSH サーバーの公開鍵情報を保存するファイル名
• [初期値 ] : /ssh/known_hosts
[説明 ]
SSH サーバーの公開鍵情報を保存するファイルを指定する。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.83 パケットバッファのパラメータを変更する
[書式 ]
system  packet-buffer  group  parameter =value  [parameter =value  ...]
no system  packet-buffer  group  [parameter =value  ...]
[設定値及び初期値 ]
•group  : パケットバッファのグループを指定する。
• [設定値 ] : グループ名  ( small, middle, large, jumbo, huge )
• [初期値 ] : -
•parameter  : 変更するパラメータを指定する。
• [設定値 ] :
設定値 説明
max-buffer パケットバッファの最大割り当て数
max-free フリーリストの最大値
( vRX シリーズ、 RTX3510 、および  RTX1300 では指
定不可能  )
min-free フリーリストの最小値
( vRX シリーズ、 RTX3510 、および  RTX1300 では指
定不可能  )
buffer-in-chunk チャンク内のパケットバッファ数
( vRX シリーズ、 RTX3510 、および  RTX1300 では指
定不可能  )
init-chunk 起動時に確保するチャンク数
( vRX シリーズ、 RTX3510 、および  RTX1300 では指
定不可能  )
• [初期値 ] : -
•value
• [設定値 ] : 変更する値を指定する。
• [初期値 ] :
vRX シリーズコマンドリファレンス  | 機器の設定  | 109

groupmax-buffer
右記以外 vRX Amazon EC2 版 vRX VMware ESXi 版
small 45000 10000 45000
middle 120000 26664 120000
large 180000 40000 180000
huge 20 532 532
RTX1220 、RTX1210 、RTX840、RTX830
group max-buffer max-free min-free buffer-in-chunk init-chunk
small 2500 937 62 625 1
middle 6664 2499 166 1666 1
large 10000 2812 62 625 4
huge 20 0 0 1 0
RTX5000 、RTX3500
group max-buffer max-free min-free buffer-in-chunk init-chunk
small 10000 3750 250 2500 1
middle 26664 9999 666 6666 1
large 40000 11250 250 2500 4
jumbo 40000 11250 250 2500 4
huge 20 0 0 1 0
RTX1300
group max-buffer
small 5000
middle 13332
large 20000
jumbo 5000
huge 20
RTX3510
group max-buffer
small 10000
middle 26664
large 40000
jumbo 5000
huge 20
[説明 ]
パケットバッファの管理パラメータを変更する。
パラメータに指定できる値は以下の通り。
• vRX シリーズ
•以下の範囲で指定可能。110 | コマンドリファレンス  | 機器の設定

groupmax-buffer
右記以外 vRX Amazon EC2 版 vRX VMware ESXi 版
small 45000..75000 1..40000 45000..75000
middle 120000..200000 1..106656 120000..200000
large 180000..300000 1..160000 180000..300000
huge 20..80 1..2128 532
•その他の機種  ( RTX3510 、RTX1300 を除く  )
• huge ブロックとそれ以外で、指定できる値が異なる。
• huge ブロック以外のブロックでは、パラメータには  1 以上の整数を指定できる。同時に、各パラメータは以
下に示す条件をすべて満たす必要がある。
• max-buffer ≧ max-free
• max-free ＞ min-free
• max_free ≧ buffer-in-chunk
• max_free ≧ buffer-in-chunk × init-chunk
• huge ブロックでは、 max-free、min-free、init-chunk には  0 以上の整数を、 max-buffer 、buffer-in-chunk には  1 以
上の整数を指定できる。 max-free、min-free、init-chunk に 0 を指定する場合には、 3 つのパラメータがすべて
0 でなければならない。 max-free、min-free、init-chunk が 1 以上の場合には、各パラメータは他のグループと
同様、上記の条件を満たす必要がある。
[ノート ]
jumbo グループは、 LAN インタフェースとして  1000BASE-T インタフェース対応でかつ、ジャンボパケットの送受
信ができる機種でのみ利用できる。
vRX シリーズ、 RTX3510 、および  RTX1300 で本コマンドによる設定の変更を反映するには、ルーターの再起動が必
要となる。
[設定例 ]
# system packet-buffer small max-buffer=1000 max-free=500
# system packet-buffer large min-free=100
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.84 有効になっているアラーム音を鳴らすか全く鳴らさないかの設定
[書式 ]
alarm  entire  switch
no alarm  entire
[設定値及び初期値 ]
•switch
• [設定値 ] :
設定値 説明
on 鳴らす
off 鳴らさない
• [初期値 ] : on
[説明 ]
有効になっているアラーム音を鳴らすか全く鳴らさないかを選択する。
[適用モデル ]
RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.85 USB ホスト機能に関連するアラーム音を鳴らすか否かの設定
[書式 ]
alarm  usbhost  switchコマンドリファレンス  | 機器の設定  | 111

no alarm  usbhost
[設定値及び初期値 ]
•switch
• [設定値 ] :
設定値 説明
on 鳴らす
off 鳴らさない
• [初期値 ] : on
[説明 ]
USB ホスト機能に関連するアラーム音を鳴らすか否かを選択する。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.86 microSD 機能に関連するアラームを鳴らすか否かの設定
[書式 ]
alarm  sd switch
no alarm  sd [switch ]
[設定値及び初期値 ]
•switch
• [設定値 ] :
設定値 説明
on 鳴らす
off 鳴らさない
• [初期値 ] : on
[説明 ]
microSD 機能に関連するアラームを鳴らすかどうかを設定する。
[適用モデル ]
RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.87 バッチファイル実行機能に関連するアラーム音を鳴らすか否かの設定
[書式 ]
alarm  batch  switch
no alarm  batch
[設定値及び初期値 ]
•switch
• [設定値 ] :
設定値 説明
on 鳴らす
off 鳴らさない
• [初期値 ] : on
[説明 ]
バッチファイル実行機能に関連するアラーム音を鳴らすか否かを選択する。
[適用モデル ]
RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830112 | コマンドリファレンス  | 機器の設定

4.88 起動時のアラーム音を鳴らすか否かの設定
[書式 ]
alarm  startup  switch  [pattern ]
no alarm  startup  [switch ]
[設定値及び初期値 ]
•switch
• [設定値 ] :
設定値 説明
on 鳴らす
off 鳴らさない
• [初期値 ] : off
•pattern
• [設定値 ] : アラーム音のパターン  (1...3、省略時は  1)
• [初期値 ] : -
[説明 ]
起動時にアラーム音を鳴らすか否かを選択する。
[適用モデル ]
RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.89 HTTP リビジョンアップ機能に関連するアラームを鳴らすか否かの設定
[書式 ]
alarm  http revision-up  switch
no alarm  http revision-up  [switch ]
[設定値及び初期値 ]
•switch
• [設定値 ] :
設定値 説明
on 鳴らす
off 鳴らさない
• [初期値 ] : on
[説明 ]
HTTP リビジョンアップ機能に関連するアラームを鳴らすかどうかを設定する。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.90 環境変数の設定
[書式 ]
set name =value
no set name [=value ]
[設定値及び初期値 ]
•name
• [設定値 ] : 環境変数名
• [初期値 ] : -
•value
• [設定値 ] : 設定値
• [初期値 ] : -コマンドリファレンス  | 機器の設定  | 113

[説明 ]
ルーターの環境変数を設定する。
環境変数名の命名規則は次の通りである。
半角の英数字とアンダースコア  '_' が使用でき、先頭は必ず英文字でなければならない。
変数名の長さに制限はないが、 set コマンドはコマンドラインの最大長  (4095 文字  ) を超えて実行できない。
英文字の大文字、小文字を区別する。例えば、 abc と Abc は別の環境変数として扱われる。
value  に空白等の特殊文字を含む場合は、 value  全体を引用符で囲む必要がある。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.91 エイリアスの設定
[書式 ]
alias  name =value
no alias  name [=value ]
[設定値及び初期値 ]
•name
• [設定値 ] : エイリアス名
• [初期値 ] : -
•value
• [設定値 ] : 設定値
• [初期値 ] : -
[説明 ]
エイリアスを設定する。
エイリアスの命名規則は次の通りである。
半角の英数字とアンダースコア  '_' が使用でき、先頭は必ず英文字でなければならない。
英文字の大文字、小文字を区別する。例えば、 abc と Abc は別のエイリアスとして扱われる。
value  に空白等の特殊文字を含む場合は、 value  全体を引用符で囲む必要がある。
[ノート ]
RTX5000 、RTX3500 は Rev.14.00.26 以降で使用可能。
RTX1210 は Rev.14.01.26 以降で使用可能。
RTX830 は Rev.15.02.03 以降で使用可能。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.92 マクロの設定
[書式 ]
macro  [-v] [-x] name  <<eom
no macro  [-v] [-x] name  [<<eom]
[設定値及び初期値 ]
•-v
• [設定値 ] : 展開前の内容を表示しながら実行する
• [初期値 ] : -
•-x
• [設定値 ] : 展開した後の行を表示しながら実行する
• [初期値 ] : -
•name
• [設定値 ] : マクロ名114 | コマンドリファレンス  | 機器の設定

• [初期値 ] : -
•eom
• [設定値 ] : マクロの終端文字列
• [初期値 ] : -
[説明 ]
マクロを設定する。
このコマンド入力後はマクロ入力状態になるので、マクロの内容を入力していく。マクロの最後には、 eom で指定
した終端文字列だけを入力すれば、マクロ入力が終了する。
マクロ入力中でも、 Ctrl-C を入力すればコマンドを中断できる。
-v オプションを指定すると、マクロを実行するときに実行する各行について、環境変数とエイリアスの展開前の内
容を表示しながら実行する。
-x オプションは、環境変数とエイリアスを展開した後の行を表示しながらマクロを実行する。
name  に使用できる文字は、半角の英大文字、英小文字、数字、アンダースコア（ _）のみで、先頭は必ず英文字で
なければならない。
実行例は以下の通り。
# macro sample <<EOM
show ip route
show ip connection
EOM
#
[ノート ]
複数行からなるコマンドに対応していないため、 schedule at  コマンドからは実行できない。
Lua スクリプトの  rt.command() で複数行からなるコマンドを実行する場合には、各行を改行文字（ '\n'）で連結した
文字列をコマンドとして渡す。改行文字は  '\n' でなくてはならず、 '\r' や '\r\n' ではエラーとなる。
実行例は以下の通り。
rtn, err = rt.command("macro sample <<EOM\necho This is sample\nEOM")
RTX5000 、RTX3500 は Rev.14.00.26 以降で使用可能。
RTX1210 は Rev.14.01.26 以降で使用可能。
RTX830 は Rev.15.02.03 以降で使用可能。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.93 EMFS ファイルの作成、削除
[書式 ]
embedded  file [-b] filename  <<eof
no embedded  file [-b] filename  [<<eof]
[設定値及び初期値 ]
•-b
• [設定値 ] : BASE64 形式を指定
• [初期値 ] : -
•filename
• [設定値 ] : ファイル名
• [初期値 ] : -
•eof
• [設定値 ] : 終端文字列コマンドリファレンス  | 機器の設定  | 115

• [初期値 ] : -
[説明 ]
EMFS 上のファイルを作成、削除する。
embedded file  コマンドを投入すると、コンソールはファイルの内容を入力するモードとなる。 eof で指定した  EOF
文字列が入力されるまでが、ファイルの内容となる。 no embedded file  コマンドでファイルを削除できる。
-b オプションを指定した場合は、 入力されたファイルの内容は  BASE64 形式であるものとして処理される。 BASE64
形式として不正な内容の場合はエラーとなる。バイナリーファイルを保存する場合は、 BASE64 形式でなければなら
ない。 -b オプションが省略された場合は、入力された内容がそのままテキストファイルとして保存される。
EOF 文字列として利用できる文字種は、半角英数字  ( A-Z 、a-z 、0-9 ) のみである。英大文字、小文字は区別され
る。
実行例は以下の通り。
# embedded file sample.txt <<EOF
show ip route
show ip connection
EOF
#
[ノート ]
複数行からなるコマンドに対応していないため、 schedule at  コマンドからは実行できない。
Lua スクリプトの  rt.command() で複数行からなるコマンドを実行する場合には、各行を改行文字（ '\n'）で連結した
文字列をコマンドとして渡す。改行文字は  '\n' でなくてはならず、 '\r' や '\r\n' ではエラーとなる。
実行例は以下の通り。
rtn, err = rt.command("embedded file sample <<EOF\necho This is sample\nEOF")
RTX5000 、RTX3500 は Rev.14.00.26 以降で使用可能。
RTX1210 は Rev.14.01.26 以降で使用可能。
RTX830 は Rev.15.02.03 以降で使用可能。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300, RTX1220, RTX1210, RTX840, RTX830
4.94 CPU スケジューリング方式の設定
[書式 ]
system  packet-scheduling  mode
no system  packet-scheduling  [mode ]
[設定値及び初期値 ]
•mode  : CPUスケジューリング方式
• [設定値 ] :
設定値 説明
hash ハッシュ方式
load-balance ロードバランス方式
( vRX さくらのクラウド版  では指定不可能  )
lan-based LANインターフェース方式
( vRX さくらのクラウド版、 RTX3510 、および
RTX1300 では指定不可能  )116 | コマンドリファレンス  | 機器の設定

設定値 説明
fixed 固定方式
( vRX さくらのクラウド版、 RTX5000 、RTX3510 、
RTX3500 、および  RTX1300 では指定不可能  )
• [初期値 ] : hash
[説明 ]
CPUスケジューリング方式を設定する。
hash を選択した場合、 受信パケットから算出されたハッシュ値を基にしてパケットの転送処理を  実行する CPUコア
が決まる。
load-balance を選択した場合、各 CPUコアの負荷が均等になるようにパケットの転送処理を実行  する CPUコアがパ
ケット単位で変化する。
lan-based を選択した場合、パケットを受信した  LAN インターフェースによって転送処理を実行する  CPU コアが次
のように決まる。 ( vRX シリーズ  は CPU コア数が  4、NIC 数が  4 の場合の例  )
受信  LAN インターフェース vRX シリーズ その他の機種
LAN1 CPU1 CPU0
LAN2 CPU2 CPU1
LAN3 CPU3 CPU2
LAN4 CPU1 CPU3
fixed を選択した場合、パケットを受信した  LAN インターフェースによらず、転送処理は常に  CPU1 で実行される。
[ノート ]
BRI/PRI インターフェースで受信したパケットは、本コマンドの設定の対象にならない。
本コマンドを実行すると、すべての LANインターフェースの初期化処理が実行されるため、  すべての LANインタ
ーフェースにおいて一時的にリンクダウンが発生する。
vRX Amazon EC2 版 で本コマンドによる設定の変更を反映するには、ルーターの再起動が必要となる。
ノーマルパスの処理対象となるパケットは、 本コマンドの設定に従って決定された CPUコアでは  受信処理のみが実
行され、転送処理は常に  CPU0 ( vRX シリーズ  の場合 ) または  CPU1 ( その他の機種の場合  ) で実行される。これは、
ip routing  process  コマンドで  normal が設定されている場合はすべてのパケットが対象となる。
CPUスケジューリング方式に  hash を選択した場合、 IPv4/IPv6 ヘッダを持たない受信パケットの転送処理は  CPU1
( vRX シリーズ  の場合  ) または  CPU0 ( RTX5000 、RTX3500 の場合  ) で実行される。 RTX3510 、RTX1300 では以下の
通りとなる。
RTX3510 、RTX1300
プロトコル 転送処理を実行する CPUコア
ARP CPU0
上記以外 CPU2
CPUスケジューリング方式に  load-balance を選択した場合、パケットの順番が入れ替わる可能性がある。  パケット
の順番が入れ替わると UDPを用いるアプリケーションで問題が発生する可能性がある。 system packet-scheduling
filter  コマンドを使用可能な機種では、 該当パケットの転送処理を実行する  CPU コアを固定することでパケットの順
番の入れ替わりを抑制することができる。なお、 TCPではパケットの順番が入れ替わっても通常は問題は発生しな
い。
IPsecでは、どの CPUスケジューリング方式であっても、 ESPシーケンス番号の順序通りに ESPパケットが送信さ
れないことがあるため、対向側ルーターの受信処理で ESPシーケンスエラーが発生し、 ESPパケットが破棄される
可能性がある。 ESPシーケンスエラーは、対向側ルーターの  ipsec sa policy  コマンドで  anti-replay-check を off にし
て、 ESPシーケンス番号のチェックを行わないようにすることで回避できる。
RTX5000 、RTX3500 は Rev.14.00.13 以降で使用可能。
[適用モデル ]
vRX シリーズ , RTX5000, RTX3510, RTX3500, RTX1300コマンドリファレンス  | 機器の設定  | 117

4.95 CPU スケジューリングフィルターの設定
[書式 ]
system  packet-scheduling  filter  filter_num  cpu_num  ip src_ipv4_address [/mask ] [dest_ipv4_address [/mask ] [protocol
[src_port  [dest_port ]]]]
system  packet-scheduling  filter  filter_num  cpu_num  ipv6 src_ipv6_address [/prefix_len ] [dest_ipv6_address [/prefix_len ]
[protocol  [src_port  [dest_port ]]]]
no system  packet-scheduling  filter  filter_num  [cpu_num  ip src_ipv4_address [/mask ] [dest_ipv4_address [/mask ] [protocol
[src_port  [dest_port ]]]]]
no system  packet-scheduling  filter  filter_num  [cpu_num  ipv6 src_ipv6_address [/prefix_len ] [dest_ipv6_address [/
prefix_len ] [protocol  [src_port  [dest_port ]]]]]
[設定値及び初期値 ]
•filter_num
• [設定値 ] : フィルター番号  (1..40)
• [初期値 ] : -
•cpu_num
• [設定値 ] : CPU番号  (0..3)
• [初期値 ] : -
•src_ipv4_address  : IPv4パケットの始点 IPアドレス
• [設定値 ] :
• A.B.C.D (A ～D: 0～255 もしくは  *)
•上記表記で A～Dを * とすると、該当する 8ビット分についてはすべての値に対応する
• * (すべての IPアドレスに対応 )
• [初期値 ] : -
•dest_ipv4_address  : IPv4パケットの終点 IPアドレス
• [設定値 ] :
•src_ipv4_address  と同じ形式
•省略した場合は一個の  * と同じ
• [初期値 ] : -
•mask  : IPアドレスのネットマスク  (src_ipv4_address  および  dest_ipv4_address  がネットワークアドレスの場合のみ
指定可 )
• [設定値 ] :
• A.B.C.D (A ～D: 0～255)
• 0x に続く十六進数
•マスクビット数
•省略時は  0xffffffff と同じ
• [初期値 ] : -
•src_ipv6_address  : IPv6パケットの始点 IPアドレス
• [設定値 ] :
• IPv6アドレス
• * (すべての IPアドレスに対応 )
• [初期値 ] : -
•dest_ipv6_address  : IPv6パケットの終点 IPアドレス
• [設定値 ] :
•src_ipv6_address  と同じ形式
•省略した場合は  * と同じ
• [初期値 ] : -
•prefix_len  : IPアドレスのプレフィックス長  (src_ipv6_address  および  dest_ipv6_address  がネットワークアドレスの
場合のみ指定可 )
• [設定値 ] :
•プレフィックス長
•省略時は  128 と同じ
• [初期値 ] : -118 | コマンドリファレンス  | 機器の設定

•protocol  : スケジューリングするパケットの種類
• [設定値 ] :
•プロトコルを表す十進数
•プロトコルを表すニーモニック  (一部 )
ニーモニック プロトコル番号
icmp 1 (IPv4の場合 )、58 (IPv6の場合 )
tcp 6
udp 17
gre 47
esp 50
• * (すべてのプロトコルに対応 )
•省略した場合は  * と同じ。
• [初期値 ] : -
•src_port  : UDP、TCPの送信元ポート番号
• [設定値 ] :
•ポート番号を表す十進数
•ポート番号を表すニーモニック  (一部 )
ニーモニック ポート番号
ftp 21
ftpdata 20
telnet 23
smtp 25
domain 53
gopher 70
finger 79
www 80
pop3 110
sunrpc 111
ident 113
ntp 123
nntp 119
snmp 161
syslog 514
printer 515
talk 517
route 520
uucp 540
submission 587
• * (すべてのポートに対応 )
•省略時は  * と同じ
• [初期値 ] : -
•dest_port
• [設定値 ] : src_port  と同じ形式
• [初期値 ] : -コマンドリファレンス  | 機器の設定  | 119

[説明 ]
転送処理を実行する CPUコアを固定するためのフィルターを設定する。
フィルターに合致した受信パケットは、 cpu_num  で指定した CPUコアで転送処理が行われる。
[ノート ]
BRI/PRI インターフェースで受信したパケットは、本コマンドの設定の対象にならない。
ノーマルパスの処理対象となるパケットは、 本コマンドの設定に従って決定された CPUコアでは  受信処理のみが実
行され、転送処理は必ず CPU1で実行される。これは、 ip routing  process  コマンドで  normal が設定されている場合
はすべてのパケットが対象となる。
IPv4/IPv6 ヘッダを持たない受信パケットは、本コマンドの設定の対象にならない。
RTX5000 、RTX3500 の Rev.14.00.13 以降で使用可能。
[設定例 ]
# system packet-scheduling filter 1 0 ip 192.168.100.1
# system packet-scheduling filter 2 1 ip 172.16.1.1 172.16.2.1 icmp
# system packet-scheduling filter 3 2 ip * * 6 21
# system packet-scheduling filter 4 3 ip 10.10.10.0/24 * udp * *
# system packet-scheduling filter 5 0 ip 192.168.*.*
# system packet-scheduling filter 6 1 ipv6 2001:240:10::1
# system packet-scheduling filter 7 2 ipv6 * 2001:240:100::
# system packet-scheduling filter 8 3 ipv6 2002::/32 * tcp
[適用モデル ]
RTX5000, RTX3500
4.96 CPU スケジューリングフィルターの適用
[書式 ]
system  packet-scheduling  filter  list filter_list
no system  packet-scheduling  filter  list [filter_list ]
[設定値及び初期値 ]
•filter_list
• [設定値 ] : 空白で区切られた CPUスケジューリングフィルター番号の並び
• [初期値 ] : -
[説明 ]
system  packet-scheduling  filter  コマンドで設定したフィルターを適用する順番を設定する。
フィルターに合致した受信パケットは、 フィルターで指定した CPUコアで転送処理が行われる。  すべてのフィルタ
ーに合致しなかった受信パケットは、  system  packet-scheduling  コマンドの  設定に従って転送処理を実行する CPU
コアが決まる。
[ノート ]
RTX5000 、RTX3500 の Rev.14.00.13 以降で使用可能。
[適用モデル ]
RTX5000, RTX3500120 | コマンドリファレンス  | 機器の設定

