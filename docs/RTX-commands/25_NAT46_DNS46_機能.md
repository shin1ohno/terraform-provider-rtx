# 第25章: NAT46/DNS46 機能

> 元PDFページ: 427-429

---

第 25 章
NAT46/DNS46 機能
NAT46/DNS46 機能とは、 IPv4 パケットを  IPv6 パケットに変換して転送する機能です。
本来、 IP バージョンが異なるネットワークにあるホスト同士では、通信ができません。しかし、本機能を利用する
と、 LAN が IPv4 ネットワーク、 WAN が IPv6 ネットワークという構成において、 LAN にある  PC から  WAN にある
サーバーへのアクセスが可能になります。
既に  IPv4 アドレスで構築された  LAN を変更することなく、 IPv6 アドレスで提供されているサービスを利用できま
す。
25.1 NAT46 機能で使用する  IPv4 アドレスプールの設定
[書式 ]
nat46  ip address  pool ipaddress_list
no nat46  ip address  pool [ipaddress_list ]
[設定値及び初期値 ]
•ipaddress_list
• [設定値 ] : 1 個の  IPv4 アドレスまたは間に  - をはさんだ  IPv4 アドレス  ( 範囲指定  )、または、 IPv4 ネットワー
クアドレス、および、これらを任意に並べたもの
• [初期値 ] : -
[説明 ]
NAT46 機能で  IPv4 アドレスを  IPv6 アドレスに変換するために使用する  IPv4 アドレスのプールを設定する。
DNS46 機能が  AAAA レコードを  A レコードに変換するとき、 AAAA レコードの  IPv6 アドレスを当コマンドで設定
した範囲内の  IPv4 アドレスに変換する。
DNS46 機能で行われた  IPv4 アドレスと  IPv6 アドレスとの対応づけは、以降の通信において  NAT46 機能が  IP ヘッ
ダーを変換する際に使用する。
ipaddress_list  は 8 個まで設定可能。ただし、 ipaddress_list  に含まれる  IPv4 アドレス  の合計が  254 個を超えた場合は
コマンドエラーとなる。
[ノート ]
tunnel translation コマンドで変換種別として  nat46 を選択した場合だけ有効である。
RTX830 は Rev.15.02.20 以降で使用可能。
RTX1220 Rev.15.04.04 以降で使用可能。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX840, RTX830
25.2 NAT46 機能で使用する  IPv6 プレフィックスの設定
[書式 ]
nat46  ipv6 prefix  prefix_id
no nat46  ipv6 prefix  [prefix_id ]
[設定値及び初期値 ]
•prefix_id
• [設定値 ] : プレフィックス番号  ( 1..4294967295 )
• [初期値 ] : -
[説明 ]
NAT46 機能で送信元  IPv4 アドレスを送信元  IPv6 アドレスに変換するために使用するプレフィックスを設定する。
ipv6 prefix コマンドで設定したプレフィックス番号を指定する。コマンドリファレンス  | NAT46/DNS46 機能  | 427

[ノート ]
本コマンドで指定する  ipv6 prefix コマンドのプレフィックスは以下の条件を満たす必要がある。
•プレフィックス長が  /96 であること
• XXXX:XXXX:XXXX:XXXX:YYXX:XXXX:0000:0000/96 ：64 ～ 71 ビット目  (YY) が 0 であること
RTX830 は Rev.15.02.20 以降で使用可能。
RTX1220 Rev.15.04.04 以降で使用可能。
[設定例 ]
LAN2 で受信した  /64 の RA のプレフィックスから、 NAT46 機能で使用する  IPv6 プレフィックスを設定する。
RA で配られる  プレフィックス (/64)：XXXX:XXXX:XXXX:XXXX:0000:0000:0000:0000/64
IPv4 アドレスに付与するプレフィックス： XXXX:XXXX:XXXX:XXXX:0000:0000:0000:0000/96
IPv6 アドレスに変換された  IPv4 アドレス： XXXX:XXXX:XXXX:XXXX:0000:0000:YYY .YYY .YYY .YYY
# ipv6 prefix 1 ra-prefix@lan2::/96
# nat46 ipv6 prefix 1
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX840, RTX830
25.3 NAT46 機能で使用する宛先アドレスを静的に対応づける設定
[書式 ]
nat46  static  id ipv4_address  ipv6_address
no nat46  static  id [[ipv4_address ] ipv6_address ]
[設定値及び初期値 ]
•id
• [設定値 ] : 識別情報  ( 1..2147483647 )
• [初期値 ] : -
•ipv4_address
• [設定値 ] : IPv4 アドレス  ( 1 個 )
• [初期値 ] : -
•ipv6_address
• [設定値 ] : IPv6 アドレス  ( 1 個 )
• [初期値 ] : -
[説明 ]
NAT46 機能で使用する宛先の  IPv6 アドレスに対応する  IPv4 アドレスを静的に設定する。
宛先にホスト名ではなく  IPv4 アドレスを指定してアクセスする場合  ( DNS46 機能で名前解決させずに  NAT46 機能
を使用する場合 ) に設定する。
[ノート ]
nat46 ip address pool コマンドで設定している  IPv4 アドレスとは異なるアドレスを設定する必要がある。
RTX830 は Rev.15.02.20 以降で使用可能。
RTX1220 Rev.15.04.04 以降で使用可能。
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX840, RTX830
25.4 NAT46 エントリーの表示
[書式 ]
show  status  nat46  table  [tunnel  tunnel_num ] [type]428 | コマンドリファレンス  | NAT46/DNS46 機能

[設定値及び初期値 ]
•tunnel_num  : トンネルインターフェース番号
• [初期値 ] : -
•type
• [設定値 ] :
設定値 説明
static 静的エントリーの情報を表示する
dynamic 動的エントリーの情報を表示する
all 静的エントリーと動的エントリーの情報を表示する
• [初期値 ] : all
[説明 ]
NAT46 エントリーを表示する。 TYPE を省略した場合は、静的エントリーと動的エントリーの情報を表示する。
[ノート ]
RTX830 は Rev.15.02.20 以降で使用可能。
RTX1220 Rev.15.04.04 以降で使用可能。
[拡張ライセンス対応 ]
拡張ライセンス をインポートすると、以下のパラメーターに入力できる上限値が拡張される。
•tunnel_num
ライセンス名拡張後の上限値
( ライセンス本数ごとの値  )
1本 2本 3本 4本 5本
YSL-VPN-EX1 100 - - - -
YSL-VPN-EX2 300 500 700 900 1100
YSL-VPN-EX3 1500 2000 2500 3000 -
[適用モデル ]
RTX3510, RTX1300, RTX1220, RTX840, RTX830コマンドリファレンス  | NAT46/DNS46 機能  | 429

